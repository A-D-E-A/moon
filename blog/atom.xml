<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://moonrepo.dev/blog</id>
    <title>moonrepo Blog</title>
    <updated>2023-12-19T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://moonrepo.dev/blog"/>
    <subtitle>moonrepo Blog</subtitle>
    <icon>https://moonrepo.dev/img/favicon.svg</icon>
    <entry>
        <title type="html"><![CDATA[proto v0.26 (rc) - Release candidate available for testing!]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.26-rc</id>
        <link href="https://moonrepo.dev/blog/proto-v0.26-rc"/>
        <updated>2023-12-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We've got a very special release candidate that we'd love to stress test before an official release!]]></summary>
        <content type="html"><![CDATA[<p>We've got a very special release candidate that we'd love to stress test before an official release!</p>
<p>proto at its core is a version manager, which means like most version managers, it relies on a
concept known as shims. Shims are lightweight executable scripts that act like a proxy to the
underlying binary, and are useful for proto to intercept executions and inject custom functionality,
like our dynamic version detection.</p>
<p>On Unix machines, we relied on Bash scripts for shims, which worked rather well. However, on
Windows, we relied on PowerShell scripts (<code>.ps1</code>), batch/cmd scripts (<code>.cmd</code>), and Bash scripts, all
with differing levels of functionality, and each serving a separate purpose. Windows support <em>did
not</em> work well.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="what-didnt-work">What didn't work?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#what-didnt-work" class="hash-link" aria-label="Direct link to What didn't work?" title="Direct link to What didn't work?">​</a></h2>
<p>When using shims, you must ensure that all the following scenarios work well: piping data/commands,
redirection, stdin prompts, interactivity, signal handling, exit code bubbling, so on and so forth.
Bash solves a lot of this for us, but Windows does not have a native Bash shell, and thus we had to
rely on other scripting languages. The <code>.cmd</code> files barely supported any of this, and the <code>.ps1</code>
files were a bit better, but still not great.</p>
<p>For the most part, executing a shim as-is and doing basic work was fine, but once you needed a
complex scenario (like above), it broke down pretty quickly. It was also further exacerbated when
dealing with nested shim exections, for example, <code>npm</code> calls <code>node</code> under the hood. The parent shim
may be executed with <code>.ps1</code> but the child may be <code>.cmd</code>, and these do not play well together.</p>
<p>The other problem on Windows is that scripts are not true executables, and are not easily located on
<code>PATH</code> (excluding <code>.cmd</code> files).</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-new">What's new?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#whats-new" class="hash-link" aria-label="Direct link to What's new?" title="Direct link to What's new?">​</a></h2>
<p>To combat all of these problems, we needed a truly native solution, and that's exactly what we did.
We wrote our own Rust based executable, that will replace all of the custom shim scripts, and can
properly handle all of the required scenarios. This new executable is named <code>proto-shim</code>
(<code>proto-shim.exe</code> on Windows) and is published alongside the <code>proto</code> binary.</p>
<p>This new executable solves all of the following problems (hopfully):</p>
<ul>
<li>Locatable on <code>PATH</code> (is an <code>.exe</code> for Windows)</li>
<li>Can pipe/redirect data</li>
<li>Handles stdin prompts/interactivity</li>
<li>Supports ctrl+c interruptions</li>
<li>Passes parent signals to child processes</li>
<li>Attempts to kill child processes on parent exit</li>
<li>Bubbles exit codes</li>
<li>Native performance</li>
<li>Doesn't require special privileges (no symlinks)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="how-to-test">How to test?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#how-to-test" class="hash-link" aria-label="Direct link to How to test?" title="Direct link to How to test?">​</a></h2>
<p>If you're interested in testing this new implementation (we'd appreciate it), you can do so by
downloading the latest release candidate from GitHub: <a href="https://github.com/moonrepo/proto/releases" target="_blank" rel="noopener noreferrer">https://github.com/moonrepo/proto/releases</a></p>
<p>Once downloaded, unpack the archive, and move the <code>proto</code> and <code>proto-shim</code> binaries to the
<code>~/.proto/bin</code> directory (or the location of your <code>PROTO_INSTALL_DIR</code> environment variable). From
here, you can execute <code>proto</code> or your tool binaries as normal.</p>
<div class="theme-admonition theme-admonition-warning admonition_WCGJ alert alert--warning"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_pbrs"><p>If you run into issues, try deleting the old <code>~/.proto/shims</code> directory and trying again. If
problems still persist, please report an issue or reach out to us on Discord!</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>On macOS, you may need to add the binary to the trusted list, in your Priacy &amp; Security settings.
This can also be achieved on the command line with <code>xattr -c ~/.proto/bin/*</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="what-to-test">What to test?<a href="https://moonrepo.dev/blog/proto-v0.26-rc#what-to-test" class="hash-link" aria-label="Direct link to What to test?" title="Direct link to What to test?">​</a></h2>
<p>Basically everything. We want to ensure that all of the functionality in <a href="https://moonrepo.dev/blog/proto-v0.26-rc#whats-new">What's new?</a>
works as expected, so simply go about your day to day development and let us know if you run into
any issues!</p>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="shim" term="shim"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.18 - New task execution flow and custom project names]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.18</id>
        <link href="https://moonrepo.dev/blog/moon-v1.18"/>
        <updated>2023-12-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[With this release, we've focused heavily on 2 important aspects: task execution, and our onboarding]]></summary>
        <content type="html"><![CDATA[<p>With this release, we've focused heavily on 2 important aspects: task execution, and our onboarding
flow.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-path-based-task-execution">New path based task execution<a href="https://moonrepo.dev/blog/moon-v1.18#new-path-based-task-execution" class="hash-link" aria-label="Direct link to New path based task execution" title="Direct link to New path based task execution">​</a></h2>
<p>Since moon's inception, before we would execute a task's command, we would locate its executable on
the file system and execute it directly. We went with this approach as we wanted to avoid all of the
baggage and "unknown behavior" that came with executing through a shell, and to ensure a more
deterministic outcome. This approach worked very well for stand-alone binaries, like <code>node</code>,
<code>cargo</code>, and built-in commands like <code>rm</code>, <code>mkdir</code>, and <code>git</code>.</p>
<p>However, it was very problematic in 2 scenarios: executables from language dependencies (Node.js
modules, etc), and multi-command based tasks (using <code>&amp;&amp;</code>). To remedy this situation, we're no longer
locating the executables ourselves, and instead are prepending <code>PATH</code> with the locations in which we
know these executables should exist. We're also loosening the restriction on the
<a href="https://moonrepo.dev/docs/config/project#shell"><code>shell</code> task option</a>, which can now be enabled for <em>all</em> tasks, not
just system tasks.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="dependency-executables">Dependency executables<a href="https://moonrepo.dev/blog/moon-v1.18#dependency-executables" class="hash-link" aria-label="Direct link to Dependency executables" title="Direct link to Dependency executables">​</a></h3>
<p>For the 1st scenario, let's talk about Node.js modules. When we encountered an unknown task command,
like <code>eslint</code> or <code>prettier</code>, we'd attempt to locate its executable by traversing <code>node_modules/.bin</code>
directories, parsing Bash/PowerShell scripts, resolving the source <code>.js</code> files, and finally
executing with <code>node</code>. To demonstrate this, say you had the following task:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'prettier --write .'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When finally executed, internally it would become something like this command:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">~/.proto/tools/node/</span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:#b7a9f9">&gt;</span><span class="token plain">/bin/node </span><span class="token punctuation" style="color:#cad4e2">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#cad4e2">..</span><span class="token plain">/node_modules/prettier/internal/cli.mjs </span><span class="token parameter variable" style="color:#fef9c3">--write</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This was required since our runtime is Rust and we don't have access to Node.js's module resolution
algorithm... but this approach was very brittle and error prone. It took us many releases to iron
out all the bugs, and we're pretty sure there are still edge cases unaccounted for. So instead, as
mentioned above, we now prepend <code>PATH</code>, resulting in the following command:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token assign-left variable environment constant" style="color:#ff94ff;font-weight:bold">PATH</span><span class="token operator" style="color:#b7a9f9">=</span><span class="token string" style="color:#c9e166">"/path/to/node_modules/.bin:/path/to/proto/tools:</span><span class="token string environment constant" style="color:#ff94ff;font-weight:bold">$PATH</span><span class="token string" style="color:#c9e166">"</span><span class="token plain"> prettier </span><span class="token parameter variable" style="color:#fef9c3">--write</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a much cleaner approach and is far easier to understand as a user.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="multi-command-tasks">Multi-command tasks<a href="https://moonrepo.dev/blog/moon-v1.18#multi-command-tasks" class="hash-link" aria-label="Direct link to Multi-command tasks" title="Direct link to Multi-command tasks">​</a></h3>
<p>While not officially supported in moon, it's been possible to run multiple commands in a single task
using <code>&amp;&amp;</code> syntax. However, this approach did not work correctly with our integrated toolchain, as
only the 1st command in the list would have its binary be located and executed correctly.</p>
<p>For example, say we wanted to run 2 npm packages, the following would <em>not</em> work:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rm -rf dist &amp;&amp; vite build &amp;&amp; tsc --build'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this new <code>PATH</code> based approach, this will now work correctly. And furthermore, this also
enables executables within Bash and PowerShell scripts to be located and executed correctly as well.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="https://moonrepo.dev/blog/moon-v1.18#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h3>
<p>In the future, we'll continue to expand on this functionality, and our ultimate goal is to remove
the concept of <code>platform</code> from tasks, which has been a bit confusing for new users.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="customize-the-project-name-in-moonyml">Customize the project name in <code>moon.yml</code><a href="https://moonrepo.dev/blog/moon-v1.18#customize-the-project-name-in-moonyml" class="hash-link" aria-label="Direct link to customize-the-project-name-in-moonyml" title="Direct link to customize-the-project-name-in-moonyml">​</a></h2>
<p>This has been a long requested feature, but thanks to the project graph rework and improvements over
the last few releases, this is now possible. In <a href="https://moonrepo.dev/docs/config/project"><code>moon.yml</code></a>, you can now
configure the <a href="https://moonrepo.dev/docs/config/project#id"><code>id</code></a> setting to override the project name (identifier)
derived from <a href="https://moonrepo.dev/docs/config/workspace#projects"><code>projects</code></a> in
<a href="https://moonrepo.dev/docs/config/workspace"><code>.moon/workspace.yml</code></a> (most applicable to glob based project locations).</p>
<p>For example, say we have the following <code>projects</code> glob.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">projects</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'apps/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'packages/*'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, the project folder name becomes the project name. For the most part this is fine, but
what if you have a very large monorepo? Or have conflicting project names? Or are migrating
projects? It becomes difficult to manage and organize. But now, simply configure <code>id</code>!</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'custom-project-name'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Be sure that all targets, project dependencies, task dependencies, and other references are using
the new identifier, otherwise an error will be triggered!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-onboarding-flow">Improved onboarding flow<a href="https://moonrepo.dev/blog/moon-v1.18#improved-onboarding-flow" class="hash-link" aria-label="Direct link to Improved onboarding flow" title="Direct link to Improved onboarding flow">​</a></h2>
<p>While this doesn't affect current users, we still want to announce that we've made some slight
changes to our onboarding process and the <a href="https://moonrepo.dev/docs/commands/init"><code>moon init</code></a> command. The previous
command prompted far too many questions, as we would attempt to detect what languages are currently
in use, and integrate them into the toolchain.</p>
<p>This was confusing for new users, so starting with this release, we've simplified the process to
only create the moon workspace within a repository.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">moon init</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With that being said, you can still integrate tools into the toolchain, by passing the identifier of
a supported moon tool as an argument.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">moon init </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token comment" style="color:#97a1af;font-style:italic"># bun, rust, etc</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-success admonition_WCGJ alert alert--success"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_pbrs"><p>We've also rewritten a good portion of the "<a href="https://moonrepo.dev/docs/setup-workspace">Getting started</a>" documentation
to reflect these changes!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.18#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.18.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Improved string allocation and performance for queries, task tokens, and process commands.</li>
<li>Improved remote caching flow and handling.</li>
<li>Updated proto to v0.25.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="toolchain" term="toolchain"/>
        <category label="shell" term="shell"/>
        <category label="id" term="id"/>
        <category label="name" term="name"/>
        <category label="project" term="project"/>
        <category label="init" term="init"/>
        <category label="onboarding" term="onboarding"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.25 - Linux arm64 gnu and musl support]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.25</id>
        <link href="https://moonrepo.dev/blog/proto-v0.25"/>
        <updated>2023-12-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This is a very small release that primarily adds support for Linux arm64 targets.]]></summary>
        <content type="html"><![CDATA[<p>This is a very small release that primarily adds support for Linux arm64 targets.</p>
<p>Thanks to <a href="https://github.com/axodotdev/cargo-dist" target="_blank" rel="noopener noreferrer">cargo-dist</a>, we can now build and distribute
arm64 binaries with relative ease. When building the binary, libraries are statically linked to
ensure that the binary can run on any Linux distribution.</p>
<p>You can download the binary from the official
<a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">GitHub release</a> or by running the
<a href="https://moonrepo.dev/docs/proto/install#linux-macos-wsl">Bash installation script</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.25#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.25.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added a <a href="https://moonrepo.dev/docs/proto/commands/debug/config"><code>proto debug config</code></a> command, to debug all loaded
configs and the final merged config.</li>
<li>Added a <code>PROTO_BYPASS_VERSION_CHECK</code> environment variable, to bypass loading and checking of
versions.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="linux" term="linux"/>
        <category label="musl" term="musl"/>
        <category label="gnu" term="gnu"/>
        <category label="arm64" term="arm64"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.24 - Standardized configuration and 10x WASM boost]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.24</id>
        <link href="https://moonrepo.dev/blog/proto-v0.24"/>
        <updated>2023-12-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we've standardized our configuration from the ground-up.]]></summary>
        <content type="html"><![CDATA[<p>In this release, we've standardized our configuration from the ground-up.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-wasm-performance-up-to-20x">Improved WASM performance up to 20x<a href="https://moonrepo.dev/blog/proto-v0.24#improved-wasm-performance-up-to-20x" class="hash-link" aria-label="Direct link to Improved WASM performance up to 20x" title="Direct link to Improved WASM performance up to 20x">​</a></h2>
<p>Before we dive into the major changes of this release, we want to highlight the performance
improvements that have landed recently. Thanks to <a href="https://dylibso.com/" target="_blank" rel="noopener noreferrer">Dylibso</a> and the
<a href="https://extism.org/" target="_blank" rel="noopener noreferrer">Extism</a> team, we've been able to improve the performance of our WASM plugins
by 10-20x! This was achieved by plugging into wasmtime's ahead-of-time (AOT) compiler and caching
layer.</p>
<p>Here's an example of the performance improvements when running <code>node --version</code>. On older versions,
the execution time was anywhere from 100ms-200ms, but is now down to 10-20ms! This is almost as fast
as native's 5-10ms!</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># proto v0.23.5 and below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">hyperfine </span><span class="token parameter variable" style="color:#fef9c3">--warmup</span><span class="token plain"> </span><span class="token number" style="color:#94dded">10</span><span class="token plain"> -- </span><span class="token string" style="color:#c9e166">'node --version'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Benchmark </span><span class="token number" style="color:#94dded">1</span><span class="token plain">: </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Time </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">mean ± σ</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:      </span><span class="token number" style="color:#94dded">99.2</span><span class="token plain"> ms ±   </span><span class="token number" style="color:#94dded">6.3</span><span class="token plain"> ms    </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain">User: </span><span class="token number" style="color:#94dded">662.5</span><span class="token plain"> ms, System: </span><span class="token number" style="color:#94dded">79.4</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Range </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">min … max</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:    </span><span class="token number" style="color:#94dded">91.3</span><span class="token plain"> ms … </span><span class="token number" style="color:#94dded">119.7</span><span class="token plain"> ms    </span><span class="token number" style="color:#94dded">29</span><span class="token plain"> runs</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># proto v0.23.6 and above</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">hyperfine </span><span class="token parameter variable" style="color:#fef9c3">--warmup</span><span class="token plain"> </span><span class="token number" style="color:#94dded">10</span><span class="token plain"> -- </span><span class="token string" style="color:#c9e166">'node --version'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Benchmark </span><span class="token number" style="color:#94dded">1</span><span class="token plain">: </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Time </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">mean ± σ</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:      </span><span class="token number" style="color:#94dded">18.5</span><span class="token plain"> ms ±   </span><span class="token number" style="color:#94dded">1.0</span><span class="token plain"> ms    </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain">User: </span><span class="token number" style="color:#94dded">7.9</span><span class="token plain"> ms, System: </span><span class="token number" style="color:#94dded">12.7</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Range </span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">min … max</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain">:    </span><span class="token number" style="color:#94dded">17.1</span><span class="token plain"> ms …  </span><span class="token number" style="color:#94dded">23.8</span><span class="token plain"> ms    </span><span class="token number" style="color:#94dded">146</span><span class="token plain"> runs</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-success admonition_WCGJ alert alert--success"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</div><div class="admonitionContent_pbrs"><p>Dylibso is hosting an <a href="https://dylibso.com/events/2023/hack-for-good/" target="_blank" rel="noopener noreferrer">Extism hackathon</a> through the
month of December, that'll donate to children in need. Check it out and participate!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="standardized-configuration-breaking">Standardized configuration (breaking)<a href="https://moonrepo.dev/blog/proto-v0.24#standardized-configuration-breaking" class="hash-link" aria-label="Direct link to Standardized configuration (breaking)" title="Direct link to Standardized configuration (breaking)">​</a></h2>
<p>Up until now, proto has supported 2 types of configuration, <code>.prototools</code> and
<code>~/.proto/config.toml</code>. The former can exist in any folder, and is used for pinning versions and
defining plugins. The latter is a per-user file that is used for customizing how proto works and
also defining plugins.</p>
<p>Over time, functionality in both of these files has grown, and so has the overlap between them. We
felt it was time to standardize these files into a single configuration file, and as such, have
removed <code>~/.proto/config.toml</code> and merged its functionality into
<a href="https://moonrepo.dev/docs/proto/config"><code>.prototools</code></a>. The biggest changes are:</p>
<ul>
<li>proto settings (like <code>auto-clean</code> and <code>http</code>) must now exist within a
<a href="https://moonrepo.dev/docs/proto/config#settings"><code>[settings]</code> table</a>.</li>
<li>Tool specific settings (like <code>node-intercept-globals</code>) have moved to the new
<a href="https://moonrepo.dev/docs/proto/config#tools"><code>[tools.node]</code> table</a> (<a href="https://moonrepo.dev/blog/proto-v0.24#tool-level-settings">more info below</a>).</li>
<li>Plugins are still configured within a <a href="https://moonrepo.dev/docs/proto/config#plugins"><code>[plugins]</code> table</a>.</li>
<li>Global/default settings can be defined in <code>~/.proto/.prototools</code>.</li>
</ul>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"20.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">settings</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">auto-clean</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">settings.http</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">allow-invalid-certs</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The other massive benefit of this change, is that settings <em>can now be defined anywhere</em>!
Previously, settings like <code>auto-clean</code> or <code>detect-strategy</code> could only be defined at the user-level,
but what if your company or team wanted to control this setting? It wasn't possible without asking
all team members to update their configuration manually. With this change, settings can now be tied
to projects or repositories!</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>After upgrading, run <code>proto migrate v0.24</code> to migrate the old user configuration to the new format!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="tool-level-settings">Tool-level settings<a href="https://moonrepo.dev/blog/proto-v0.24#tool-level-settings" class="hash-link" aria-label="Direct link to Tool-level settings" title="Direct link to Tool-level settings">​</a></h3>
<p>While working on these configuration changes, we also landed the
<a href="https://github.com/moonrepo/proto/issues/261" target="_blank" rel="noopener noreferrer">Tool-level configuration RFC</a>, although with a
different implementation. This enables users to define settings that will be passed to the WASM
plugin of a specific tool, controlling how it works. These settings can be configured with the new
<a href="https://moonrepo.dev/docs/proto/config#tools"><code>[tools.&lt;name&gt;]</code> table</a>.</p>
<p>For example, the <code>node</code> tool has a setting called <code>intercept-globals</code>, which will trigger an error
when npm/pnpm/yarn attempt to install a global package.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.go</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">gobin</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.node</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">intercept-globals</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token boolean" style="color:#94dded">false</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As of now, only the <a href="https://github.com/moonrepo/node-plugin" target="_blank" rel="noopener noreferrer">Node.js</a> and
<a href="https://github.com/moonrepo/go-plugin" target="_blank" rel="noopener noreferrer">Go</a> plugins support settings.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="moved-aliases-and-default-versions-breaking">Moved aliases and default versions (breaking)<a href="https://moonrepo.dev/blog/proto-v0.24#moved-aliases-and-default-versions-breaking" class="hash-link" aria-label="Direct link to Moved aliases and default versions (breaking)" title="Direct link to Moved aliases and default versions (breaking)">​</a></h2>
<p>To continue with these configuration changes, we've also moved aliases and the default version into
this new configuration. Previously, both of these values were stored in
<code>~/.proto/tools/&lt;name&gt;/manifest.json</code>, but the problem was, that this file is internally managed by
proto, and should not be modified by users. This made it difficult for users to manage, and to
persist these values across machines (think dotfile syncing).</p>
<p>Now these values are stored in <a href="https://moonrepo.dev/docs/proto/config"><code>.prototools</code></a>, with aliases being configured in
<a href="https://moonrepo.dev/docs/proto/config#toolsaliases"><code>[tools.&lt;name&gt;.aliases]</code></a>, and the default version (global) being
pinned as a version in <code>~/.proto/.prototools</code>. Here's an example:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/.prototools</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"20.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">tools.node.aliases</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">work</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"18"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This change also enables aliases to be defined anywhere! Previously, aliases were only allowed to be
defined globally for a user, but now they can be defined per-project, or even per-directory.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>After upgrading, run <code>proto migrate v0.24</code> to migrate your aliases and default versions to the new
configuration format!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.24#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.24.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>proto now supports <a href="https://moonrepo.dev/docs/proto/install#canary-releases">canary</a> and
<a href="https://moonrepo.dev/docs/proto/install#nightly-releases">nightly</a> releases.</li>
<li>Updated non-latest plugins to be cached for 30 days, instead of forever.</li>
<li>Fixed an issue where resolving canary versions wouldn't work correctly.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="config" term="config"/>
        <category label="tools" term="tools"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.17 - Full Bun support, TypeScript improvements, and more!]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.17</id>
        <link href="https://moonrepo.dev/blog/moon-v1.17"/>
        <updated>2023-11-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we've focused heavily on the JavaScript and TypeScript ecosystems, by improving our]]></summary>
        <content type="html"><![CDATA[<p>In this release, we've focused heavily on the JavaScript and TypeScript ecosystems, by improving our
implementations, and providing full Bun support.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="bun-tier-1-2-and-3-support">Bun tier 1, 2, and 3 support<a href="https://moonrepo.dev/blog/moon-v1.17#bun-tier-1-2-and-3-support" class="hash-link" aria-label="Direct link to Bun tier 1, 2, and 3 support" title="Direct link to Bun tier 1, 2, and 3 support">​</a></h2>
<p>Yes you read that right! Not just 1 tier, not just 2 tiers, but all 3 language tiers have been
implemented for Bun, providing <a href="https://moonrepo.dev/docs/how-it-works/languages">full language support</a>, and parity
with Node.js. Thanks to the Bun work in <a href="https://moonrepo.dev/proto">proto</a> and the previous
<a href="https://moonrepo.dev/blog/moon-v1.16">v1.16 release</a>, we were able to add full Bun support with relative easy.</p>
<p>So what does Bun support look like? To start, you can now configure a
<a href="https://moonrepo.dev/docs/config/toolchain#bun"><code>bun</code></a> setting in <a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>,
including an optional <code>version</code> to download and install, and settings similar to Node.js.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">bun</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.0.13'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">syncProjectWorkspaceDependencies</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will enable the <code>bun</code> platform and the following integrations are applied:</p>
<ul>
<li>Will automatically download and install Bun for the configured version.</li>
<li>Will install dependencies using <code>bun install</code> (deduping currently not supported).</li>
<li>Will parse <code>bun.lockb</code> for dependency resolution and task hashing.</li>
<li>Will use <code>bunx</code> instead of <code>npx</code> for one-off package executions.</li>
<li>Can execute <code>bun</code> commands within tasks.</li>
</ul>
<p>With the <code>bun</code> platform enabled, you can now configure the platform for projects and tasks (is
automatically detected when running the <code>bun</code> or <code>bunx</code> commands).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Default platform for all tasks (optional)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun run dev'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint .'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># Only required for npm packages (if not defined above)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="typescript-improvements">TypeScript improvements<a href="https://moonrepo.dev/blog/moon-v1.17#typescript-improvements" class="hash-link" aria-label="Direct link to TypeScript improvements" title="Direct link to TypeScript improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="configure-the-root-directory">Configure the root directory<a href="https://moonrepo.dev/blog/moon-v1.17#configure-the-root-directory" class="hash-link" aria-label="Direct link to Configure the root directory" title="Direct link to Configure the root directory">​</a></h3>
<p>When moon was first designed, it was designed for JavaScript based monorepos. Because of this, there
were a handful of assumptions that still exist today, one of which is that the moon workspace root
was assumed to be the JavaScript and TypeScript root. The root is extremely important in resolving
relative paths for project references and other path based functionality, so using the workspace
root made the most sense.</p>
<p>However, what if your TypeScript root isn't the workspace root? Or the TypeScript root and
JavaScript root are different? Well, you were out of luck... until now! We're introducing a new
setting called <a href="https://moonrepo.dev/docs/config/toolchain#root"><code>typescript.root</code></a>, that denotes the root directory for
TypeScript related functionality (relative from moon's workspace root).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">root</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'./typescript'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="include-shared-types">Include shared types<a href="https://moonrepo.dev/blog/moon-v1.17#include-shared-types" class="hash-link" aria-label="Direct link to Include shared types" title="Direct link to Include shared types">​</a></h3>
<p>Another common TypeScript practice is to have shared <code>.d.ts</code> types that are used across multiple
projects, or to augment third-party types. This is so common that we felt obligated to support it in
some capacity within moon. With that said, we're introducing a new setting,
<a href="https://moonrepo.dev/docs/config/toolchain#includesharedtypes"><code>typescript.includeSharedTypes</code></a>.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">includeSharedTypes</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, we'll automatically sync the shared types path to the <code>include</code> field of all relevant
project <code>tsconfig.json</code>s. However, for this to work correctly, the shared types <em>must</em> exist in a
<code>types</code> folder relative from the <a href="https://moonrepo.dev/blog/moon-v1.17#configure-the-root-directory">TypeScript root</a>.</p>
<p>For example, if the TypeScript root is <code>/</code>, and shared types is <code>/types</code>, then all packages in
<code>/packages/*</code> will be updated with the following:</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"../../types/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This setting can be overridden on a per-project basis.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="include-sources-of-project-references">Include sources of project references<a href="https://moonrepo.dev/blog/moon-v1.17#include-sources-of-project-references" class="hash-link" aria-label="Direct link to Include sources of project references" title="Direct link to Include sources of project references">​</a></h3>
<p>Continuing with <code>include</code> related functionality, we've introducing yet another new setting,
<a href="https://moonrepo.dev/docs/config/toolchain#includeprojectreferencesources"><code>typescript.includeProjectReferenceSources</code></a>,
which does exactly as its name implies. It automatically appends the sources (<code>**/*</code>) of all project
references to the <code>include</code> field of all relevant project <code>tsconfig.json</code>s.</p>
<p>This is useful (and sometimes required) for the following reasons:</p>
<ul>
<li>It makes files within a referenced project available for import into the consuming project. This
is required for "press tab to auto-import" nested/deep files, otherwise only index imports will
work (and barrel files are costly).</li>
<li>It also improves the editor experience by making the source files available for intellisense,
autocomplete, and other features.</li>
</ul>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">includeProjectReferenceSources</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To understand this functionality, say you have a project with the following <code>tsconfig.json</code>, and
this project depends on 2 other projects: ui and utils.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"src/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When our syncing process occurs, we'll automatically sync project references, and include referenced
sources, like so.</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">packages/example/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"include"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"src/**/*"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../ui/**/*"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../utils/**/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"references"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"> </span><span class="token property" style="color:#b7a9f9">"path"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../ui"</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"> </span><span class="token property" style="color:#b7a9f9">"path"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../utils"</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This setting can also be overridden on a per-project basis.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="javascript-improvements">JavaScript improvements<a href="https://moonrepo.dev/blog/moon-v1.17#javascript-improvements" class="hash-link" aria-label="Direct link to JavaScript improvements" title="Direct link to JavaScript improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="supporting-the-single-version-policy-pattern">Supporting the "single version policy" pattern<a href="https://moonrepo.dev/blog/moon-v1.17#supporting-the-single-version-policy-pattern" class="hash-link" aria-label="Direct link to Supporting the &quot;single version policy&quot; pattern" title="Direct link to Supporting the &quot;single version policy&quot; pattern">​</a></h3>
<p>If you're unfamiliar with the single version policy, or the one version rule, it's a pattern that
only allows dependencies to be configured in a single location, typically the root <code>package.json</code>.
This pattern forces <em>all</em> projects in a monorepo to use the same dependencies, and avoid the package
<code>workspaces</code> functionality.</p>
<p>This pattern was previously not possible in moon, as our automatic dependency installation process
did not account for it, and it would either install in the root if using <code>workspaces</code>, or in a
project otherwise. To support this pattern, we're introducing the new setting
<a href="https://moonrepo.dev/docs/config/toolchain#rootpackageonly"><code>node.rootPackageOnly</code></a> for Node.js, and
<code>bun.rootPackageOnly</code> for Bun.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">rootPackageOnly</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, we'll only install dependencies in the workspace root, regardless of other settings or
how <code>package.json</code>s are configured. However, this setting <em>does not</em> verify that other
<code>package.json</code>s <em>do not</em> have dependencies. It's up to you to ensure that other <code>package.json</code>s do
not have dependencies.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.17#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.17.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated automatic dependency linking to use the <code>build</code> scope instead of <code>peer</code> scope. This should
alleviate some of the pain points with <code>package.json</code> syncing.</li>
<li>Improved project reference syncing and edge case handling.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="bun" term="bun"/>
        <category label="typescript" term="typescript"/>
        <category label="javascript" term="javascript"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.23 - New detection strategy, tool commands, and more]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.23</id>
        <link href="https://moonrepo.dev/blog/proto-v0.23"/>
        <updated>2023-11-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[With this release, we've reorganized our commands, improved version detection, and Windows support.]]></summary>
        <content type="html"><![CDATA[<p>With this release, we've reorganized our commands, improved version detection, and Windows support.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-detect-strategy-setting">New <code>detect-strategy</code> setting<a href="https://moonrepo.dev/blog/proto-v0.23#new-detect-strategy-setting" class="hash-link" aria-label="Direct link to new-detect-strategy-setting" title="Direct link to new-detect-strategy-setting">​</a></h2>
<p>Up until now, when proto would attempt to detect a version, it would use a version from the closest
<code>.prototools</code> file, or tool specific file (<code>package.json</code>, <code>.nvmrc</code>, etc), which ever matched first.
For the most part, this works great, but what if you wanted <code>.prototools</code> to take precedence over
other files, even if found in a higher parent directory? You unfortunately couldn't.</p>
<p>To support this new flow, we're introducing a new
<a href="https://moonrepo.dev/docs/proto/config#user-configuration"><code>~/.proto/config.toml</code></a> setting called
<a href="https://moonrepo.dev/docs/proto/config#detect-strategy"><code>detect-strategy</code></a>. This setting supports the following values,
with more possibly in the future!</p>
<ul>
<li><code>first-available</code> (default) - Will use the first available version that is found. Either from
<code>.prototools</code> or a tool specific file.</li>
<li><code>prefer-prototools</code> - Prefer a <code>.prototools</code> version, even if found in a parent directory. If none
found, falls back to tool specific file.</li>
</ul>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/config.toml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">detect-strategy</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"prefer-prototools"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-tool-command-group-breaking">New <code>proto tool</code> command group (breaking)<a href="https://moonrepo.dev/blog/proto-v0.23#new-proto-tool-command-group-breaking" class="hash-link" aria-label="Direct link to new-proto-tool-command-group-breaking" title="Direct link to new-proto-tool-command-group-breaking">​</a></h2>
<p>Our CLI surface area has been growing and we felt it was time to start grouping commands, starting
with the new <a href="https://moonrepo.dev/docs/proto/commands/tool"><code>proto tool</code></a> command. This command will contain "not used
very often" subcommands in relation to tools and their plugins, primarily for managing plugins, and
viewing tool information and inventory. As such, we've deprecated and moved the following top-level
commands:</p>
<ul>
<li>Moved <code>proto add-plugin</code> to <code>proto tool add</code>.</li>
<li>Moved <code>proto remove-plugin</code> to <code>proto tool remove</code>.</li>
<li>Moved <code>proto plugins</code> to <code>proto tool list-plugins</code>.</li>
<li>Moved <code>proto tools</code> to <code>proto tool list</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-tool-info-command">New <code>proto tool info</code> command<a href="https://moonrepo.dev/blog/proto-v0.23#new-proto-tool-info-command" class="hash-link" aria-label="Direct link to new-proto-tool-info-command" title="Direct link to new-proto-tool-info-command">​</a></h2>
<p>Continuing with the changes above, we're also introducing a new command,
<a href="https://moonrepo.dev/docs/proto/commands/tool/info"><code>proto tool info</code></a>, which displays detailed information about a
tool and its backing plugin. For example:</p>
<div class="codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-text codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto tool info node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">node - Node.js</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Inventory</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Store: ~/.proto/tools/node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Executable: ~/.proto/tools/node/20.0.0/bin/node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Globals directory: ~/.proto/tools/node/globals/bin</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Binaries:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    - ~/.proto/bin/node (primary)</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Shims:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    - ~/.proto/shims/node (primary)</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">Plugin</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Version: 0.5.2</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Source: https://github.com/moonrepo/node-plugin/releases/download/v0.5.2/node_plugin.wasm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This command also supports JSON output via <code>--json</code>.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.23#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.23.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added support to plugins to ignore certain paths when detecting a version.</li>
<li>Updated Windows to create 3 shim files for each tool: <code>.cmd</code> (cmd.exe), <code>.ps1</code> (powershell), and
no extension (bash).</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.16 - Bun support, Rust improvements, and more!]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.16</id>
        <link href="https://moonrepo.dev/blog/moon-v1.16"/>
        <updated>2023-10-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[With this release, we've focused on requests from the community, instead of internal migration work]]></summary>
        <content type="html"><![CDATA[<p>With this release, we've focused on requests from the community, instead of internal migration work
or new features.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="bun-as-a-package-manager">Bun as a package manager<a href="https://moonrepo.dev/blog/moon-v1.16#bun-as-a-package-manager" class="hash-link" aria-label="Direct link to Bun as a package manager" title="Direct link to Bun as a package manager">​</a></h2>
<p>Now that <a href="https://bun.sh/blog/bun-v1.0" target="_blank" rel="noopener noreferrer">Bun v1 has officially released</a> and our
<a href="https://github.com/moonrepo/bun-plugin" target="_blank" rel="noopener noreferrer">bun-plugin</a> for proto has stabilized, we can start slowly
integrating Bun support into moon. The first step in this series is adding Bun as a supported
package manager for Node.js. Seems odd as they are conflicting runtimes... right? While true, a lot
of users are interested in using Bun purely as a package manager, as it can install dependencies
incredibly fast. So why not support it?</p>
<p>In this release, you can now install dependencies with Bun by configuring
<a href="https://moonrepo.dev/docs/config/toolchain#packagemanager"><code>node.packageManager</code></a> and
<a href="https://moonrepo.dev/docs/config/toolchain#npm-pnpm-yarn"><code>node.bun</code></a> in your toolchain.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">packageManager</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">bun</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.0.0'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionally, you can now execute Bun commands within tasks! However, ensure the task's platform is
still set to <code>node</code> though, as this is using Bun as a package manager within Node.js, not as a
separate runtime.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'bun test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'node'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using Bun, the following integrations are applied:</p>
<ul>
<li>Will automatically download and install Bun for the configured version.</li>
<li>Will install dependencies using <code>bun install</code> (deduping currently not supported).</li>
<li>Will parse <code>bun.lockb</code> for dependency resolution and task hashing.</li>
<li>Will use <code>bunx</code> instead of <code>npx</code> for one-off package executions.</li>
<li>Can execute <code>bun</code> commands within tasks.</li>
</ul>
<blockquote>
<p>This change <em>only</em> adds support for Bun as a package manager for Node.js. It does not add Bun as a
supported language/platform in the toolchain, but it does pave the way for this to happen! Also
note that Bun <em>is not supported on Windows</em>!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-rust-components-and-targets">Configure Rust components and targets<a href="https://moonrepo.dev/blog/moon-v1.16#configure-rust-components-and-targets" class="hash-link" aria-label="Direct link to Configure Rust components and targets" title="Direct link to Configure Rust components and targets">​</a></h2>
<p>We've had Rust tier 2 and 3 support for quite a while now, but there was a big missing piece: the
ability to configure and install additional
<a href="https://rust-lang.github.io/rustup/concepts/components.html" target="_blank" rel="noopener noreferrer">components</a> and
<a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html" target="_blank" rel="noopener noreferrer">targets</a> for the current toolchain.
In this release, we've added support for both!</p>
<p>Simply configure the <a href="https://moonrepo.dev/docs/config/toolchain#components"><code>rust.components</code></a> or
<a href="https://moonrepo.dev/docs/config/toolchain#targets"><code>rust.targets</code></a> settings in
<a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>, and moon will automatically install them when the
pipeline is ran. This functionality uses the same hashing implementation as
<a href="https://moonrepo.dev/docs/config/toolchain#bins-1"><code>rust.bins</code></a>, so will only install the first time, and again if the
configuration changes (or the cache is removed).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">rust</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'1.73.0'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">components</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'clippy'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rust-analyzer'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'wasm32-wasi'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="force-toolchain-to-use-global-binaries">Force toolchain to use global binaries<a href="https://moonrepo.dev/blog/moon-v1.16#force-toolchain-to-use-global-binaries" class="hash-link" aria-label="Direct link to Force toolchain to use global binaries" title="Direct link to Force toolchain to use global binaries">​</a></h2>
<p>Our <a href="https://moonrepo.dev/docs/concepts/toolchain">toolchain</a> is great for local development, as it ensures all
developers and machines are running the exact versions of tools required for the workspace. However,
it becomes overkill for other environments like CI and Docker where the environment has been
pre-configured.</p>
<p>To avoid the unnecessary overhead of download and installing tools in the toolchain, we're
introducing the <code>MOON_TOOLCHAIN_FORCE_GLOBALS</code> environment variable. When provided, this will:</p>
<ul>
<li>Disable downloading and installing tools (will still download the WASM plugins).</li>
<li>Execute all tool commands using the global binary available on <code>PATH</code>.</li>
</ul>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token assign-left variable" style="color:#fef9c3">MOON_TOOLCHAIN_FORCE_GLOBALS</span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain">true moon ci</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>We're looking into ways to automate this process, but for now, this is the best solution.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.16#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.16.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added an improved task inheritance chain resolver. To fallback to the previous behavior, set
<code>experiments.interweavedTaskInheritance: false</code> in <code>.moon/workspace.yml</code>.</li>
<li>Added a new <a href="https://moonrepo.dev/docs/config/project#type">project type <code>automation</code></a>, for projects like E2E and
integration testing.</li>
<li>Updated action graph cycle detection to list all nodes in the cycle (when detectable).</li>
<li>Updated all npx calls to use a package manager equivalent. For example: <code>yarn dlx</code>, <code>pnpm dlx</code>,
<code>bunx</code>.</li>
<li>Updated to support Yarn v4.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="bun" term="bun"/>
        <category label="rust" term="rust"/>
        <category label="toolchain" term="toolchain"/>
        <category label="automation" term="automation"/>
        <category label="package" term="package"/>
        <category label="manager" term="manager"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.21 - Linux x64 musl support]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.21</id>
        <link href="https://moonrepo.dev/blog/proto-v0.21"/>
        <updated>2023-10-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This is a very small release that primarily adds support for the Linux x64 musl target.]]></summary>
        <content type="html"><![CDATA[<p>This is a very small release that primarily adds support for the Linux x64 musl target.</p>
<p>Thanks to <a href="https://github.com/axodotdev/cargo-dist" target="_blank" rel="noopener noreferrer">cargo-dist</a>, we can now build and distribute
musl binaries with relative ease. When building the binary, libraries are statically linked to
ensure that the binary can run on any Linux distribution.</p>
<p>You can download the binary from the official
<a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">GitHub release</a> or by running the
<a href="https://moonrepo.dev/docs/proto/install#linux-macos-wsl">Bash installation script</a>. In the future, we plan to support
arm64 builds for both Linux gnu and musl.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.21#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.21.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Improved file and directory locking. Will now work correctly across processes and signals,
especially for those killed/dropped.</li>
<li>Updated WASM functions to use explicit Rust enum types for versions to properly handle all
variations (version, alias, requirement, range).</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="linux" term="linux"/>
        <category label="musl" term="musl"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.20 - New shims and binaries management]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.20</id>
        <link href="https://moonrepo.dev/blog/proto-v0.20"/>
        <updated>2023-10-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we're reworking how shims and binaries work.]]></summary>
        <content type="html"><![CDATA[<p>In this release, we're reworking how shims and binaries work.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="shims-and-binaries-breaking">Shims <em>and</em> Binaries (breaking)<a href="https://moonrepo.dev/blog/proto-v0.20#shims-and-binaries-breaking" class="hash-link" aria-label="Direct link to shims-and-binaries-breaking" title="Direct link to shims-and-binaries-breaking">​</a></h2>
<p>Since proto's inception, we've used shims as a way to execute installed tools. This allowed us to
wrap the underlying tool binary to provide additional functionality, such as automatic version
detection, runtime hooks, and more. However, this approach has some limitations, such as:</p>
<ul>
<li>Shims are forced onto you and there's no way to use proto without shims.</li>
<li>Shims are slower than executing the native binary, upwards of 10x slower. While this equates in
milliseconds, it can be noticeable dependending on the tool.</li>
<li>For Windows, our shim files are <code>.cmd</code> <em>and not</em> <code>.exe</code>. This causes a lot of weird and unexpected
problems when an environment expects a real executable, or uses a hard-coded <code>.exe</code> extension.</li>
</ul>
<p>To remedy this, we're introducing both a shim and non-shim approach, which has resulted in a pretty
big breaking change. Shims are now generated in <code>~/.proto/shims</code> (instead of <code>~/.proto/bin</code>), while
<code>~/.proto/bin</code> will now store symlinks to native binaries. To migrate to this new pattern, we're
introducing a new <code>proto migrate</code> command (this only needs to be ran once).</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto upgrade</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto migrate v0.20 </span><span class="token parameter variable" style="color:#fef9c3">--log</span><span class="token plain"> debug</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="how-it-works">How it works<a href="https://moonrepo.dev/blog/proto-v0.20#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h3>
<p>When installing proto for the first time, or running the <code>proto migrate</code> command, we prepend <code>PATH</code>
with <code>$PROTO_HOME/shims:$PROTO_HOME/bin</code>. This allows shims to be executed <em>first</em> and fallthrough
to native binaries if a shim does not exist (for example, <code>.exe</code> on Windows).</p>
<p>Furthermore, if you'd prefer to <em>only use</em> shims, or <em>only use</em> binaries, you can update <code>PATH</code> and
remove the unwanted directory path.</p>
<p>And lastly, if shims are causing problems, you can now easily reference the native binaries
directly. This was rather complicated before.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="comparison">Comparison<a href="https://moonrepo.dev/blog/proto-v0.20#comparison" class="hash-link" aria-label="Direct link to Comparison" title="Direct link to Comparison">​</a></h3>
<table><thead><tr><th></th><th>Shims</th><th>Binaries</th></tr></thead><tbody><tr><td><strong>Location</strong></td><td><code>~/.proto/shims</code></td><td><code>~/.proto/bin</code></td></tr><tr><td><strong>Created as</strong></td><td>Scripts that run <code>proto run</code></td><td>Symlinks to the native binary</td></tr><tr><td><strong>Version executed</strong></td><td>Detects version at runtime</td><td>Last version that was installed + pinned</td></tr><tr><td><strong>Supported for</strong></td><td>All tools</td><td>Only tools that support native execution (may not work for <code>.js</code> files)</td></tr><tr><td><strong>Additional files</strong></td><td>Creates extra files (like <code>bunx</code>, <code>node-gyp</code>, etc)</td><td>Only links the primary binary</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="support-for-minisign-checksums">Support for minisign checksums<a href="https://moonrepo.dev/blog/proto-v0.20#support-for-minisign-checksums" class="hash-link" aria-label="Direct link to Support for minisign checksums" title="Direct link to Support for minisign checksums">​</a></h2>
<p>When proto installs a tool, it runs a process known as checksum verification, where we ensure the
download hasn't been modified maliciously in anyway. Historically we only supported SHA256
checksums, but now, we also support the new <a href="https://jedisct1.github.io/minisign/" target="_blank" rel="noopener noreferrer">minisign</a> tool,
used by popular tools like <a href="https://ziglang.org/" target="_blank" rel="noopener noreferrer">Zig</a>.</p>
<p>If you're building a plugin for a tool that uses minisign, you can use the new
<a href="https://moonrepo.dev/docs/proto/wasm-plugin#downloading-pre-builts"><code>checksum_public_key</code></a> (WASM) or
<a href="https://moonrepo.dev/docs/proto/toml-plugin#downloading-and-installing"><code>install.checksum-public-key</code></a> (TOML) field to
provide the public key for use in verification.</p>
<p>When the checksum URL ends in a <code>.minisig</code> extension, proto will automatically use minisign for
checksum verification!</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">install</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">checksum-url</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"https://domain.com/some/path/to/checksum.minisig"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">checksum-public-key</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"untrusted comment: ..."</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.20#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.20.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Updated <code>proto use</code> to install tools in parallel.</li>
<li>Updated <code>proto plugins</code> and <code>proto tools</code> to load plugins in parallel.</li>
<li>Updated <code>proto run</code> to error when the tool attempts to self-upgrade outside of proto.</li>
<li>Rust plugin<!-- -->
<ul>
<li>Will now attempt to install <code>rustup</code> if it does not exist on the current machine.</li>
<li>Will now respect the <code>RUSTUP_HOME</code> environment variable when locating the <code>.rustup</code> store.</li>
</ul>
</li>
<li>Schema plugin<!-- -->
<ul>
<li>Added <code>install.checksum_public_key</code> for defining the public key used to verify checksums.</li>
<li>Added <code>metadata.self_upgrade_commands</code> for defining which sub-commands should be blocked for
self-upgrades.</li>
</ul>
</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="bin" term="bin"/>
        <category label="shim" term="shim"/>
        <category label="checksum" term="checksum"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.15 - Next-generation action graph]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.15</id>
        <link href="https://moonrepo.dev/blog/moon-v1.15"/>
        <updated>2023-10-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we've taken the next step in modernizing our action pipeline, by rewriting the]]></summary>
        <content type="html"><![CDATA[<p>In this release, we've taken the next step in modernizing our action pipeline, by rewriting the
dependency graph.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="hello-action-graph-goodbye-dependency-graph">Hello action graph, goodbye dependency graph<a href="https://moonrepo.dev/blog/moon-v1.15#hello-action-graph-goodbye-dependency-graph" class="hash-link" aria-label="Direct link to Hello action graph, goodbye dependency graph" title="Direct link to Hello action graph, goodbye dependency graph">​</a></h2>
<p>For the past few months, we've been working on a rewrite of our action pipeline, which consists of
the project graph, dependency graph, task executor, process pipeline, and more. It's a slow process,
with many different pieces that must land in sequence, but we're almost done. The next step in this
process is the <a href="https://moonrepo.dev/docs/how-it-works/action-graph">introduction of the new action graph</a>, which
replaces the previous dependency graph.</p>
<p>For the most part, the graphs work in a similar fashion, but since we rewrote it from the ground up,
we were able to resolve any discrepancies and performance issues. The biggest changes between the
new and old graphs are:</p>
<ul>
<li>All actions now depend on the <code>SyncWorkspace</code> action, instead of this action running arbitrarily.</li>
<li>Cleaned up dependency chains between actions, greatly reducing the number of nodes in the graph.</li>
<li>Renamed <code>RunTarget</code> to <code>RunTask</code>, including interactive and persistent variants.</li>
<li>And lastly, we ditched our batched task approach for a ready queue. Continue reading for more
information!</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="a-new-performant-thread-pool">A new performant thread pool<a href="https://moonrepo.dev/blog/moon-v1.15#a-new-performant-thread-pool" class="hash-link" aria-label="Direct link to A new performant thread pool" title="Direct link to A new performant thread pool">​</a></h3>
<p>In the old dependency graph, when we'd execute a task, we'd order the graph topologically and then
group actions into batches (or buckets) based on their dependency chains. Batches would then be
executed in order within the thread pool. This approach worked well, but had one major flaw: it
wasn't as performant as could be. For example, if our thread pool size was 12, and a batch only had
2 tasks in it, what were the other 10 threads doing? Absolutely nothing. They were sitting idly,
waiting for a task.</p>
<p>And now with the new action graph, we take full advantage of all threads in the pool. Instead of the
batched approach above, we now use a topological task-ready queue, where a thread without work (or
is waiting for work) can poll the graph for a new task to run. A task is considered ready to run if
it either has no dependencies, or all of its dependencies (in the chain) have been ran.</p>
<p>For large graphs, this should result in a significant performance improvement!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="automatic-dependency-linking-breaking">Automatic dependency linking (breaking)<a href="https://moonrepo.dev/blog/moon-v1.15#automatic-dependency-linking-breaking" class="hash-link" aria-label="Direct link to Automatic dependency linking (breaking)" title="Direct link to Automatic dependency linking (breaking)">​</a></h3>
<blockquote>
<p>In v1.17, we changed the scope from "peer" to "build" to reduce friction.</p>
</blockquote>
<p>Because of these graph changes, we do have a minor "breaking change". Tasks that depend (via <code>deps</code>)
on other tasks from arbitrary projects (the parent project doesn't implicitly or explicitly depend
on the other project), not including the root-level project, will now automatically mark that other
project as a "peer" dependency (if not already configured with <code>dependsOn</code>). For example, "b"
becomes a peer dependency for "a".</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now internally becomes:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'b'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'peer'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you'd prefer this dependency to <em>not be</em> a peer, you can explicitly configure it with a different
scope. For Node.js projects, the "build" scope can be used as a no-op replacement.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">a/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'b'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'build'</span><span class="token plain"> </span><span class="token comment" style="color:#97a1af;font-style:italic"># production, development</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">'b:build'</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We're marking this as a breaking change as this could subtly introduce cycles in the project graph
that weren't present before, and for Node.js projects, this may inject <code>peerDependencies</code>. However,
this change was necessary to ensure accurate dependency chains in the graph.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-moonreposetup-toolchain-github-action">New <code>moonrepo/setup-toolchain</code> GitHub action<a href="https://moonrepo.dev/blog/moon-v1.15#new-moonreposetup-toolchain-github-action" class="hash-link" aria-label="Direct link to new-moonreposetup-toolchain-github-action" title="Direct link to new-moonreposetup-toolchain-github-action">​</a></h2>
<p>We've begun a process to deprecate the
<a href="https://github.com/moonrepo/setup-moon-action" target="_blank" rel="noopener noreferrer">moonrepo/setup-moon-action</a> and
<a href="https://github.com/moonrepo/setup-proto" target="_blank" rel="noopener noreferrer">moonrepo/setup-proto</a> GitHub actions, and instead, combine
and replace them with a new <a href="https://github.com/moonrepo/setup-toolchain" target="_blank" rel="noopener noreferrer">moonrepo/setup-toolchain</a>
action. Why a new action instead of fixing the others?</p>
<p>The biggest problem was that both previous actions shared about 90% of the same code, but were
slightly different in how they installed the binaries and cached the toolchain. It was was also
confusing for consumers to understand and know which action to use (because they shouldn't be used
together).</p>
<p>To remedy this, we're prototyping the new
<a href="https://github.com/moonrepo/setup-toolchain" target="_blank" rel="noopener noreferrer">moonrepo/setup-toolchain</a> action, which has been
working quite well. It aims to solve the following:</p>
<ul>
<li>Installs <code>proto</code> globally so that installed tools can also be executed globally.</li>
<li>Conditionally installs <code>moon</code> globally if the repository is using moon (attempts to detect a
<code>.moon</code> directory).</li>
<li>Caches the toolchain (<code>~/.proto</code>) so subsequent runs are faster.</li>
<li>Hashes <code>.prototools</code> and <code>.moon/toolchain.yml</code> files to generate a unique cache key.</li>
<li>Cleans the toolchain before caching to remove unused or stale tools.</li>
<li>Can auto-install tools when used.</li>
</ul>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">jobs:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ci:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   name: CI</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   steps:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     - uses: actions/checkout@v4</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">       with:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         fetch-depth: 0</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#ff7c89">-</span><span class="token deleted-sign deleted line" style="color:#ff7c89">      - uses: moonrepo/setup-moon-action@v1</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token deleted-sign deleted line" style="color:#ff7c89"></span><span class="token inserted-sign inserted prefix inserted" style="color:#b7d733">+</span><span class="token inserted-sign inserted line" style="color:#b7d733">      - uses: moonrepo/setup-toolchain@v0</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="now-supported-in-railway">Now supported in Railway<a href="https://moonrepo.dev/blog/moon-v1.15#now-supported-in-railway" class="hash-link" aria-label="Direct link to Now supported in Railway" title="Direct link to Now supported in Railway">​</a></h2>
<p>If you're a big fan of <a href="https://railway.app/" target="_blank" rel="noopener noreferrer">Railway</a> (like we are), and you're deploying a Node.js
backed application, then you'll be happy to hear that Railway now officially and natively supports
moon! We spent some time over the past month
<a href="https://nixpacks.com/docs/providers/node" target="_blank" rel="noopener noreferrer">integrating moon support into their Nixpacks architecture</a>.</p>
<p>To make use of this, set the <code>NIXPACKS_MOON_APP_NAME</code> environment variable to the name of your moon
project that you want to be deployed. This will then automatically run <code>moon run &lt;app&gt;:build</code> and
<code>moon run &lt;app&gt;:start</code> respectively. To customize the task names, you can set the
<code>NIXPACKS_MOON_BUILD_TASK</code> and <code>NIXPACKS_MOON_START_TASK</code> environment variables.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>This is currently only supported for Node.js projects, but will be expanded to other languages in
the future!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.15#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.15.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added a <code>moon action-graph</code> command.</li>
<li>Added a <code>--dependents</code> argument to <code>moon action-graph</code>.</li>
<li>Added the ability to skip non-<code>RunTask</code> actions using environment variables.</li>
<li>Deprecated the <code>moon dep-graph</code> command.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="action" term="action"/>
        <category label="dependency" term="dependency"/>
        <category label="graph" term="graph"/>
        <category label="pipeline" term="pipeline"/>
        <category label="railway" term="railway"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.19 - Version pinning and outdated checks]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.19</id>
        <link href="https://moonrepo.dev/blog/proto-v0.19"/>
        <updated>2023-09-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we're improving version pinning and introducing a new command to check for outdated]]></summary>
        <content type="html"><![CDATA[<p>In this release, we're improving version pinning and introducing a new command to check for outdated
versions.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-pin-command-breaking">New <code>proto pin</code> command (breaking)<a href="https://moonrepo.dev/blog/proto-v0.19#new-proto-pin-command-breaking" class="hash-link" aria-label="Direct link to new-proto-pin-command-breaking" title="Direct link to new-proto-pin-command-breaking">​</a></h2>
<p>Before our official v1 release, which is relatively soon, we'll be making some breaking changes with
the proto APIs. The first is the introduction of the new <a href="https://moonrepo.dev/docs/proto/commands/pin"><code>proto pin</code></a>
command, which replaces the previous <code>proto local</code> and <code>proto global</code> commands. We felt this was a
much cleaner change, and far easier to understand than the previous command names.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># v0.18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">local</span><span class="token plain"> go </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto global </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token number" style="color:#94dded">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># v0.19+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto pin go </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto pin </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> </span><span class="token number" style="color:#94dded">20</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--global</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-pin-latest-setting">New <code>pin-latest</code> setting<a href="https://moonrepo.dev/blog/proto-v0.19#new-pin-latest-setting" class="hash-link" aria-label="Direct link to new-pin-latest-setting" title="Direct link to new-pin-latest-setting">​</a></h2>
<p>While we're on the subject of pinning versions, we've also introduced a new
<a href="https://moonrepo.dev/docs/proto/config#pin-latest"><code>pin-latest</code></a> setting. Do you want the latest version to always be
pinned? Do you forgot to pass <code>--pin</code> when installing? Do you forget to run the <code>proto global</code> or
<code>proto local</code> commands (now <code>proto pin</code>)? If you answered yes to any of these questions, then this
setting is for you.</p>
<p>When enabled, and a tool is installed with the "latest" version, the resolved version will
automatically be pinned to the configuration of your choice. For example, say we have the following
user config:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/config.toml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">pin-latest</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"local"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And we run one of the following commands:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> go</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> latest</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then the resolved version of the tool will automatically be set to the <code>.prototools</code> file in the
current directory. Handy right?</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-outdated-command">New <code>proto outdated</code> command<a href="https://moonrepo.dev/blog/proto-v0.19#new-proto-outdated-command" class="hash-link" aria-label="Direct link to new-proto-outdated-command" title="Direct link to new-proto-outdated-command">​</a></h2>
<p>By request of the community, we're introducing yet another new command,
<a href="https://moonrepo.dev/docs/proto/commands/outdated"><code>proto outdated</code></a>. If you're familiar with package managers, you can
probably guess what this command does! It'll check for newer available versions, for all tools
configured in the closest <code>.prototools</code> file. Very handy for keeping your tools up to date.</p>
<div class="codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-text codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto outdated</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">go - current version 1.20.2 (via ~1.20), newer version 1.20.8, update available!</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">node - current version 20.7.0 (via 20.7.0), latest version 20.8.0, update available!</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.19#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.19.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added <code>PROTO_WASM_LOG</code> environment variable to toggle the logging of messages from Extism and WASM
plugins. Useful for debugging.</li>
<li>Updated <code>proto install</code> to auto-clean stale plugins after a successful installation.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="pin" term="pin"/>
        <category label="global" term="global"/>
        <category label="local" term="local"/>
        <category label="outdated" term="outdated"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.14 - Improvements to running targets and toolchain versions]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.14</id>
        <link href="https://moonrepo.dev/blog/moon-v1.14"/>
        <updated>2023-09-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we've focused on loosening restrictions to improve the overall developer]]></summary>
        <content type="html"><![CDATA[<p>In this release, we've focused on loosening restrictions to improve the overall developer
experience.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="shorthand-for-moon-run">Shorthand for <code>moon run</code><a href="https://moonrepo.dev/blog/moon-v1.14#shorthand-for-moon-run" class="hash-link" aria-label="Direct link to shorthand-for-moon-run" title="Direct link to shorthand-for-moon-run">​</a></h2>
<p>This has been a long requested feature and we're happy to finally deliver it! You can now omit the
"run" keyword for the <a href="https://moonrepo.dev/docs/commands/run"><code>moon run</code></a> command, just so long as the first non-option
argument is a target (must contain a <code>:</code>).</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># v1.13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run app:build</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># v1.14+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon app:build</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="choose-targets-for-moon-ci">Choose targets for <code>moon ci</code><a href="https://moonrepo.dev/blog/moon-v1.14#choose-targets-for-moon-ci" class="hash-link" aria-label="Direct link to choose-targets-for-moon-ci" title="Direct link to choose-targets-for-moon-ci">​</a></h2>
<p>When we initially built <a href="https://moonrepo.dev/docs/commands/ci"><code>moon ci</code></a>, we wanted a solution that simply ran
everything in CI that <em>should be ran</em>, taking care of all the complicated logic to determine
affected tasks, comparing Git branches, gathering targets, partitioning across jobs, etc... And it
does just that, and it does it well!</p>
<p>However, one major caveat to using <code>moon ci</code> is that it runs <em>every task</em> in the workspace (assuming
they're affected). This has been quite a blocker for adoption as teams may want fine-grained control
of their CI. For example, running build tasks in one job, lint tasks in another, so on and so forth.</p>
<p>In this release, we've made the necessary changes to allow these workflows, by supporting a list of
targets for <code>moon ci</code>, similar to how <code>moon run</code> works. If no targets are provide, the existing "run
everything" logic will be used.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># v1.13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon ci</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># v1.14+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon ci :build :lint :etc</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Splitting targets across jobs is demonstrated with the following GitHub Action workflow:</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.github/workflows/ci.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">name</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'CI'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'master'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">pull_request</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'ubuntu-latest'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'actions/checkout@v4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token key atrule">fetch-depth</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moonrepo/setup-moon-action@v1'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moon ci :build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">format-lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Format + Lint'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'ubuntu-latest'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'actions/checkout@v4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token key atrule">fetch-depth</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moonrepo/setup-moon-action@v1'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moon ci :format :lint'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'ubuntu-latest'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'actions/checkout@v4'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">          </span><span class="token key atrule">fetch-depth</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token number" style="color:#94dded">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moonrepo/setup-moon-action@v1'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'moon ci :test'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-partial-toolchain-versions">Configure partial toolchain versions<a href="https://moonrepo.dev/blog/moon-v1.14#configure-partial-toolchain-versions" class="hash-link" aria-label="Direct link to Configure partial toolchain versions" title="Direct link to Configure partial toolchain versions">​</a></h2>
<p>Since moon's inception, our <a href="https://moonrepo.dev/docs/concepts/toolchain">integrated toolchain</a> required fully
qualified semantic versions (major.minor.patch) for tools. This was by design to ensure that we
could provide a consistent, reliable, and deterministic experience for all users. This solved the
problem of "Is X using the correct version of Y?".</p>
<p>However, this also meant that we were unable to support partial versions (major.minor) of tools,
which is a common use case and request for many users. Over the last few months, we've made immense
progress in <a href="https://moonrepo.dev/proto">proto</a> on how it parses, resolves, and evaluates versions, known as the
<a href="https://crates.io/crates/version_spec" target="_blank" rel="noopener noreferrer">version specification</a>.</p>
<p>We felt the time was right to pull these changes into moon, and as such, all <code>version</code> fields in
<a href="https://moonrepo.dev/docs/config/toolchain"><code>.moon/toolchain.yml</code></a> now support partial versions, version
requirements/ranges, and even aliases!</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'20.7'</span><span class="token plain"> </span><span class="token comment" style="color:#97a1af;font-style:italic"># ~20.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">npm</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'^9'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">rust</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'stable'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>Learn more about how this works under the hood in the
<a href="https://moonrepo.dev/docs/concepts/toolchain#version-specification">official version specification documentation</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.14#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.14.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added <code>packemon</code>, <code>sveltekit</code>, <code>vite</code>, <code>vitest</code> to
<a href="https://github.com/moonrepo/moon-configs" target="_blank" rel="noopener noreferrer">moonrepo/moon-configs</a>.</li>
<li>Updated <code>.moon/tasks</code> to support nested folders, for better organization of task files.</li>
<li>Improved handling of certificates and proxies.</li>
<li>Updated to proto v0.18.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="run" term="run"/>
        <category label="target" term="target"/>
        <category label="toolchain" term="toolchain"/>
        <category label="version" term="version"/>
        <category label="ci" term="ci"/>
        <category label="shorthand" term="shorthand"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.18 - List installed tools and configure HTTP client]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.18</id>
        <link href="https://moonrepo.dev/blog/proto-v0.18"/>
        <updated>2023-09-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Today we've got a small release that includes some helpful features.]]></summary>
        <content type="html"><![CDATA[<p>Today we've got a small release that includes some helpful features.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-proto-tools-command">New <code>proto tools</code> command<a href="https://moonrepo.dev/blog/proto-v0.18#new-proto-tools-command" class="hash-link" aria-label="Direct link to new-proto-tools-command" title="Direct link to new-proto-tools-command">​</a></h2>
<p>Are you curious what tools you have installed? And more specifically, which versions? What about
configured aliases? Until now, you had to manually check the <code>~/.proto/tools</code> directory for this
information, but now, you can simply run <a href="https://moonrepo.dev/docs/proto/commands/tool/list"><code>proto tools</code></a> to get a
list of all installed tools.</p>
<p>This command will list all tools that have been installed, along with their installed versions,
relevant timestamps, available aliases, and store location.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto tools</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">go - Go</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Store: ~/.proto/tools/go</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Versions:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain">.0 - installed 08/24/23, last used 09/18/23</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">1.20</span><span class="token plain">.2 - installed 01/01/70, last used 09/18/23, default version</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> - Node.js</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Store: ~/.proto/tools/node</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Aliases:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    ~20 </span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain"> stable</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  Versions:</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">18.0</span><span class="token plain">.0 - installed 09/03/23, last used 09/18/23, default version</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">18.14</span><span class="token plain">.0 - installed 09/04/23, last used 09/04/23</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">18.17</span><span class="token plain">.1 - installed 09/04/23, last used 09/04/23</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">19.0</span><span class="token plain">.0 - installed 09/03/23</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">20.0</span><span class="token plain">.0 - installed 09/03/23</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token number" style="color:#94dded">20.6</span><span class="token plain">.0 - installed 09/04/23, last used 09/18/23</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>This information can also be represented as JSON by passing the <code>--json</code> flag.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-http-user-settings">New <code>[http]</code> user settings<a href="https://moonrepo.dev/blog/proto-v0.18#new-http-user-settings" class="hash-link" aria-label="Direct link to new-http-user-settings" title="Direct link to new-http-user-settings">​</a></h2>
<p>Furthermore, we've added a new <a href="https://moonrepo.dev/docs/proto/config#http"><code>[http]</code> setting to <code>~/.proto/config.toml</code></a>
that allows you to configure aspects of the HTTP client, which is primarily used for downloading
tools.</p>
<p>This may useful if you're behind a proxy, a VPN, or corporate network, and certain requests and
certificates are blocked.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">~/.proto/config.toml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">http</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">proxies</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"http://intra.net/proxy"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">root-cert</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"/path/to/root/cert.pem"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="index-for-third-party-tools">Index for third-party tools<a href="https://moonrepo.dev/blog/proto-v0.18#index-for-third-party-tools" class="hash-link" aria-label="Direct link to Index for third-party tools" title="Direct link to Index for third-party tools">​</a></h2>
<p>Now that our TOML and WASM plugins have stabilized, we felt the time was right to start working on a
third-party index, a registry of all available tools. We've updated the official
<a href="https://moonrepo.dev/docs/proto/tools">Supported tools</a> documentation to now include third-party tools.</p>
<p>At this time, the list of tools is powered by a JS/JSON object,
<a href="https://github.com/moonrepo/moon/blob/master/website/src/data/proto-tools.tsx" target="_blank" rel="noopener noreferrer">which can be found here</a>.
In the future, we may move this to a database, add filtering, sorting, and everything else necessary
for showcasing tools maintained by the community!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.18#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.18.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>For TOML plugins, we updated the schema internally to be represented as JSON instead of TOML,
which may cause breakages depending on a version mismatch between proto and the plugin.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="http" term="http"/>
        <category label="registry" term="registry"/>
        <category label="index" term="index"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.17 - Experimental Python support and canary releases]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.17</id>
        <link href="https://moonrepo.dev/blog/proto-v0.17"/>
        <updated>2023-09-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This release implements two long requested features, Python language support and canary releases.]]></summary>
        <content type="html"><![CDATA[<p>This release implements two long requested features, Python language support and canary releases.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="experimental-python-support">Experimental Python support<a href="https://moonrepo.dev/blog/proto-v0.17#experimental-python-support" class="hash-link" aria-label="Direct link to Experimental Python support" title="Direct link to Experimental Python support">​</a></h2>
<p>It's been quite a while since we've introduced a new language into proto, and we're excited to
announce the highly requested language, Python! Since Python is now an
<a href="https://github.com/moonrepo/python-plugin" target="_blank" rel="noopener noreferrer">officially supported language</a>, installing Python (and
pip) is as simple as:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> python</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, we're marking language support as experimental for the time being. We expect our
implementation to work for modern Python versions, but may not work for older versions, especially
Python 2. The reasons for this are as follows:</p>
<ul>
<li>proto will install pre-built binaries from
<a href="https://github.com/indygreg/python-build-standalone" target="_blank" rel="noopener noreferrer">indygreg/python-build-standalone</a>. This is
an unofficial project, and <em>does not</em> support all Python versions.</li>
<li>If <a href="https://github.com/pyenv/pyenv/blob/master/plugins/python-build/README.md" target="_blank" rel="noopener noreferrer"><code>python-build</code></a> is
available, we'll attempt to use it to build + install Python. This currently requires <code>pyenv</code> to
be installed, and <em>does not</em> work on Windows.</li>
<li>Furthermore, we only support <code>cpython</code> at the moment, and do not support <code>pypy</code>, <code>jython</code>, or
other Python implementations. It's unknown whether this functionality should be in the core Python
plugin, or another plugin entirely.</li>
</ul>
<p>In a future proto version, we want to support a true "build from source" approach for all tools.
Once that functionality has landed, we can properly support Python on all platforms, but until then,
let us know how this works for you!</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="install-canary-releases">Install canary releases<a href="https://moonrepo.dev/blog/proto-v0.17#install-canary-releases" class="hash-link" aria-label="Direct link to Install canary releases" title="Direct link to Install canary releases">​</a></h2>
<p>A canary release is a mechanism for rolling out new features and changes to a small subset of users,
without it being an official release on an official channel. This allows users to opt-in and test
functionality if they so choose. Canary releases are not meant to be used in production, and may
contain bugs or breaking changes. A canary is similar to a nightly (or weekly) release, depending on
the tool.</p>
<p>We now support this workflow in proto. To install a canary release, simply use the
<a href="https://moonrepo.dev/docs/proto/commands/install"><code>--canary</code> flag when installing a tool</a>:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto </span><span class="token function" style="color:#ff94ff;font-weight:bold">install</span><span class="token plain"> </span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token plain">tool</span><span class="token operator" style="color:#b7a9f9">&gt;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#fef9c3">--canary</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will install the latest canary release to <code>~/.proto/tools/&lt;tool&gt;/canary</code>, and <em>only</em> the latest
release can be used. Re-installing with <code>--canary</code> will overwrite the previous canary installation.</p>
<p>However, because we <a href="https://moonrepo.dev/docs/proto/detection">detect a version to run with at runtime</a>, how should you
actually run canary? The easiest way is to prefix the shim with an environment variable:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ </span><span class="token assign-left variable" style="color:#fef9c3">PROTO_BUN_VERSION</span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain">canary bun ./index.ts</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or to explicitly configure the version in <a href="https://moonrepo.dev/docs/proto/config"><code>.prototools</code></a>:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key property" style="color:#b7a9f9">bun</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"canary"</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.17#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.17.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added colors to command line <code>--help</code> menus.</li>
<li>Updated the following locations to support partial versions and aliases:<!-- -->
<ul>
<li>Tool versions in <code>.prototools</code>.</li>
<li>Pinning a default version with <code>proto install --pin</code>.</li>
<li>Setting global version with <code>proto global</code>.</li>
<li>Setting local version with <code>proto local</code>.</li>
</ul>
</li>
<li>Node, npm, pnpm, and yarn will again extract a version from <code>package.json</code> engines.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="plugin" term="plugin"/>
        <category label="tool" term="tool"/>
        <category label="canary" term="canary"/>
        <category label="python" term="python"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.13 - Toolchain now uses WASM plugins]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.13</id>
        <link href="https://moonrepo.dev/blog/moon-v1.13"/>
        <updated>2023-09-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This is a light release that focused primarily on upgrading to the WASM based proto implementation.]]></summary>
        <content type="html"><![CDATA[<p>This is a light release that focused primarily on upgrading to the WASM based proto implementation.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="proto-upgrade-and-wasm-plugins">proto upgrade and WASM plugins<a href="https://moonrepo.dev/blog/moon-v1.13#proto-upgrade-and-wasm-plugins" class="hash-link" aria-label="Direct link to proto upgrade and WASM plugins" title="Direct link to proto upgrade and WASM plugins">​</a></h2>
<p>Over the last few months, we've made immense strides on <a href="https://moonrepo.dev/proto">proto</a>, our multi-language
toolchain. For those of you unaware, moon's toolchain is built on top of proto, and we accomplish
this by utilizing the same Rust code between both tools.</p>
<p>However, moon has been locked to <a href="https://moonrepo.dev/blog/proto-v0.12">proto v0.12</a>, which was a purely Rust based
implementation. With the release of <a href="https://moonrepo.dev/blog/proto-v0.13">proto v0.13</a> and onward, proto has moved to
a WASM based plugin architecture (with the core still in Rust), which allows us to support more
languages, and enables developers to write plugins in non-Rust languages.</p>
<p>And since our WASM plugins have stabilized by <a href="https://moonrepo.dev/blog/proto-v0.16">proto v0.16</a>, we felt it was time
to finally upgrade moon's implementation to the latest and greatest. So what does this mean exactly?
A few things:</p>
<ul>
<li>If you're using moon's <a href="https://moonrepo.dev/docs/config/toolchain">toolchain</a> (like <code>node</code>), we will now download the
<a href="https://github.com/moonrepo/node-plugin" target="_blank" rel="noopener noreferrer">Node.js WASM plugins</a> in the background (to
<code>~/.proto/plugins</code>).</li>
<li>These plugins are in charge of downloading and installing the Node.js, npm, pnpm, or yarn version
specified in your toolchain configuration.</li>
<li>The entire plugin flow is now logged to the console, so you can see what's happening behind the
scenes.</li>
<li>In the future (most likely moon v2), our platform and language integration will also be powered by
WASM plugins. This enables you to build your own custom plugins!</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>This entire process should be transparent to all users, and you should not notice any changes.
However, in case this upgrade causes issues, we wanted to isolate it from other changes, hence the
light release!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="allow-tasks-to-fail">Allow tasks to fail<a href="https://moonrepo.dev/blog/moon-v1.13#allow-tasks-to-fail" class="hash-link" aria-label="Direct link to Allow tasks to fail" title="Direct link to Allow tasks to fail">​</a></h2>
<p>"Allow tasks to fail?" You ask yourself. "Doesn't that defeat the point of a task runner?" You
question further. "You're not wrong!" We reply. These questions assume a perfect repository state,
where all tasks either pass or fail, and there's no middle ground. In reality, very rarely is that
true, and we want to support those stuck in the middle, such as:</p>
<ul>
<li>In a heavy migration and it's known that a task is currently broken.</li>
<li>The task is flaky but you've been unable to find the root cause.</li>
<li>Upstream dependencies have published a backwards incompatible change, and you're waiting on a fix.</li>
<li>And of course, in the middle of adopting moon!</li>
</ul>
<p>For situations where a task consistently or sometimes fails, but you don't want it to fail the
entire pipeline (especially in CI), you can enable the new
<a href="https://moonrepo.dev/docs/config/project#allowfailure"><code>allowFailure</code> task option</a>.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">typecheck</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'tsc --build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">allowFailure</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When enabled, failing tasks will no longer bail <a href="https://moonrepo.dev/docs/commands/run"><code>moon run</code></a> early, nor will it
exit <a href="https://moonrepo.dev/docs/commands/ci"><code>moon ci</code></a> with a non-zero exit code. However, we still built guard rails
around this feature, as we don't want to encourage bad practices, and one of these guard rails is
that tasks that enable <code>allowFailure</code> <em>cannot</em> be depended on by other tasks, as we cannot guarantee
that it's side-effect free.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.13#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.13.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added colors to command line <code>--help</code> menus.</li>
<li>Updated <code>runner.archivableTargets</code> to support tag scoped targets.</li>
<li>Updated <code>moon query tasks --affected</code> to filter based on affected task, instead of affected
project.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="tasks" term="tasks"/>
        <category label="proto" term="proto"/>
        <category label="wasm" term="wasm"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.16 - Add, remove, and purge plugins]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.16</id>
        <link href="https://moonrepo.dev/blog/proto-v0.16"/>
        <updated>2023-09-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This release adds functionality for managing plugins and purging the proto store.]]></summary>
        <content type="html"><![CDATA[<p>This release adds functionality for managing plugins and purging the proto store.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="add-and-remove-plugins">Add and remove plugins<a href="https://moonrepo.dev/blog/proto-v0.16#add-and-remove-plugins" class="hash-link" aria-label="Direct link to Add and remove plugins" title="Direct link to Add and remove plugins">​</a></h2>
<p>Now that proto has fully embraced a plugin based architecture, we thought it'd be nice to support
the management of these plugins through the CLI. This release adds two new commands:
<a href="https://moonrepo.dev/docs/proto/commands/tool/add"><code>proto add-plugin</code></a> and
<a href="https://moonrepo.dev/docs/proto/commands/tool/remove"><code>proto remove-plugin</code></a>.</p>
<p>Adding a plugin requires a unique ID and what we call a locator, which is a string that dictates
where to locate and download the plugin from. Here's an example for Node.js, but this isn't
necessary as it's built-in:</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto add-plugin </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> source:https://github.com/moonrepo/node-plugin/releases/latest/download/node_plugin.wasm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionally, removing a plugin is even easier.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto remove-plugin </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="purge-tools-and-plugins">Purge tools and plugins<a href="https://moonrepo.dev/blog/proto-v0.16#purge-tools-and-plugins" class="hash-link" aria-label="Direct link to Purge tools and plugins" title="Direct link to Purge tools and plugins">​</a></h2>
<p>proto has supported cleaning for quite some time through the
<a href="https://moonrepo.dev/docs/proto/commands/clean"><code>proto clean</code></a> command (and the
<a href="https://moonrepo.dev/docs/proto/config#user-configuration"><code>auto-clean</code> setting</a>), which would automatically delete
installed tool versions and temporary files that are older then a specific timeframe. This helps to
free up disk space for unused or rarely used tools.</p>
<p>In this release, we're expanding the <code>clean</code> command's functionality with a concept known as
purging, which will "delete entirely". The first being the new <code>--purge</code> option, which will delete a
tool, its manifest, <em>all</em> installed versions, and the entire <code>~/.proto/tools/&lt;id&gt;</code> directory.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Delete all traces of Node.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto clean </span><span class="token parameter variable" style="color:#fef9c3">--purge</span><span class="token plain"> </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionaly, a new <code>--purge-plugins</code> option can be used to delete all downloaded plugins (the
<code>~/.proto/plugins</code> directory). Useful for house keeping or if you want to start fresh.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ proto clean --purge-plugins</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.16#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.16.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added folder locking during tool installation to avoid colliding processes.</li>
<li>Renamed <code>PROTO_ROOT</code> to <code>PROTO_HOME</code>, but we'll support <code>PROTO_ROOT</code> for the time being.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="plugin" term="plugin"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.15 - Install and uninstall globals]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.15</id>
        <link href="https://moonrepo.dev/blog/proto-v0.15"/>
        <updated>2023-08-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This is a small release that adds support for uninstalling globals, and improves our WASM APIs.]]></summary>
        <content type="html"><![CDATA[<p>This is a small release that adds support for uninstalling globals, and improves our WASM APIs.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="uninstall-global-dependencies">Uninstall global dependencies<a href="https://moonrepo.dev/blog/proto-v0.15#uninstall-global-dependencies" class="hash-link" aria-label="Direct link to Uninstall global dependencies" title="Direct link to Uninstall global dependencies">​</a></h2>
<p>proto has supported <a href="https://moonrepo.dev/blog/proto-v0.5">installing globals since v0.5</a>, but there's been no way to
uninstall an existing global, until now! In this release, we're introducing the
<a href="https://moonrepo.dev/docs/proto/commands/uninstall-global"><code>proto uninstall-global</code></a> command, which will do just that!
The API is exactly the same as its installation counter-part.</p>
<div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">proto install-global </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> prettier</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># On second thought, nevermind...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">proto uninstall-global </span><span class="token function" style="color:#ff94ff;font-weight:bold">node</span><span class="token plain"> prettier</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="wasm-functions">WASM functions<a href="https://moonrepo.dev/blog/proto-v0.15#wasm-functions" class="hash-link" aria-label="Direct link to WASM functions" title="Direct link to WASM functions">​</a></h3>
<p>Implementing this command was rather straight forward, but most of the work went into supporting
<a href="https://moonrepo.dev/docs/proto/wasm-plugin#installing-and-uninstalling-globals"><code>install_global</code> and <code>uninstall_global</code></a>
functions for WASM plugins, and then updating all existing plugins! For those of you writing your
own plugins, here's an example of what the Rust code looks like:</p>
<div class="language-rust codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-rust codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token attribute attr-name" style="color:#fde047">#[plugin_fn]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token keyword" style="color:#b7a9f9">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#b7a9f9">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#ff94ff;font-weight:bold">install_global</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token class-name" style="color:#ff94ff;font-weight:bold">Json</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token class-name" style="color:#ff94ff;font-weight:bold">Json</span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token class-name" style="color:#ff94ff;font-weight:bold">InstallGlobalInput</span><span class="token operator" style="color:#b7a9f9">&gt;</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#ff94ff;font-weight:bold">FnResult</span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token class-name" style="color:#ff94ff;font-weight:bold">Json</span><span class="token operator" style="color:#b7a9f9">&lt;</span><span class="token class-name" style="color:#ff94ff;font-weight:bold">InstallGlobalOutput</span><span class="token operator" style="color:#b7a9f9">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token keyword" style="color:#b7a9f9">let</span><span class="token plain"> result </span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain"> </span><span class="token macro property" style="color:#b7a9f9">exec_command!</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">inherit</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"npm"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"install"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"--global"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token operator" style="color:#b7a9f9">&amp;</span><span class="token plain">input</span><span class="token punctuation" style="color:#cad4e2">.</span><span class="token plain">dependency</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token punctuation" style="color:#cad4e2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token class-name" style="color:#ff94ff;font-weight:bold">Ok</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token class-name" style="color:#ff94ff;font-weight:bold">Json</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token class-name" style="color:#ff94ff;font-weight:bold">InstallGlobalOutput</span><span class="token punctuation" style="color:#cad4e2">::</span><span class="token function" style="color:#ff94ff;font-weight:bold">from_exec_command</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="toml-setting">TOML setting<a href="https://moonrepo.dev/blog/proto-v0.15#toml-setting" class="hash-link" aria-label="Direct link to TOML setting" title="Direct link to TOML setting">​</a></h3>
<p>We've also updated our TOML plugins to support uninstalling globals through the new
<a href="https://moonrepo.dev/docs/proto/toml-plugin#global-packages"><code>globals.uninstall-args</code></a> setting. Hopefully the name is
self explanatory, but it's a list of arguments passed to the tool's binary, that'll uninstall the
global.</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">globals</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">install-args</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"install"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"--global"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"{dependency}"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">uninstall-args</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"uninstall"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"--global"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"{dependency}"</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-wasm-documentation">Improved WASM documentation<a href="https://moonrepo.dev/blog/proto-v0.15#improved-wasm-documentation" class="hash-link" aria-label="Direct link to Improved WASM documentation" title="Direct link to Improved WASM documentation">​</a></h2>
<p>With each release we're slowly stabilizing the WASM and TOML APIs for an official v1 release (which
is soon), and with this, it requires more documentation. As part of this release, we've done a giant
polish pass on our WASM documentation, and have included the following sections:</p>
<ul>
<li><a href="https://moonrepo.dev/docs/proto/wasm-plugin#virtual-paths">Virtual paths</a></li>
<li><a href="https://moonrepo.dev/docs/proto/wasm-plugin#host-environment">Host environment</a></li>
<li><a href="https://moonrepo.dev/docs/proto/wasm-plugin#host-functions">Host functions</a></li>
<li><a href="https://moonrepo.dev/docs/proto/wasm-plugin#tool-id-and-context">Tool ID and context</a></li>
<li><a href="https://moonrepo.dev/docs/proto/wasm-plugin#installing-and-uninstalling-globals">Installing and uninstalling globals</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.15#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.15.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Major WASM API improvements, including backwards incompatible changes.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="wasm" term="wasm"/>
        <category label="plugin" term="plugin"/>
        <category label="global" term="global"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.12 - Task improvements: extending, interactive, and more]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.12</id>
        <link href="https://moonrepo.dev/blog/moon-v1.12"/>
        <updated>2023-08-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this release, we focused heavily on improving tasks, its configuration, and related systems.]]></summary>
        <content type="html"><![CDATA[<p>In this release, we focused heavily on improving tasks, its configuration, and related systems.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="extending-sibling-or-inherited-tasks">Extending sibling or inherited tasks<a href="https://moonrepo.dev/blog/moon-v1.12#extending-sibling-or-inherited-tasks" class="hash-link" aria-label="Direct link to Extending sibling or inherited tasks" title="Direct link to Extending sibling or inherited tasks">​</a></h2>
<p>Three months ago, we posted an
<a href="https://github.com/moonrepo/moon/issues/849" target="_blank" rel="noopener noreferrer">RFC on how to support task extending / task variants</a>.
On paper this doesn't sound like a hard problem to solve, but internally it would of been an uphill
battle to implement. Thanks to previous releases from the past few months, and the rewrite of the
project graph, task builder, and more, this implementation was a breeze. To finalize the RFC, we
went with option 2, by adding a new <code>extends</code> field to task configurations.</p>
<p>With this new addition, we can now rewrite this old configuration, which was needlessly
repetitive...</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint .'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(sources)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(tests)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'*.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'tsconfig.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintignore'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.eslint.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.options.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint-fix</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint . --fix'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(sources)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(tests)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'*.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'tsconfig.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintignore'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.eslint.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.options.json'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Into the following configuration.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint .'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(sources)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@globs(tests)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'*.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'tsconfig.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintignore'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/.eslintrc.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.eslint.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'/tsconfig.options.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint-fix</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">extends</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'lint'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'--fix'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We're very happy with this solution, as it's far more readable, maintainable, and doesn't introduce
yet another paradigm to learn. Our goal was to be as familiar as possible, while providing extensive
functionality behind the scenes, which we believe to have achieved.</p>
<p>Some other interesting facts around task extending:</p>
<ul>
<li>When extending a task, <a href="https://moonrepo.dev/docs/concepts/task-inheritance#merge-strategies">merge strategies</a> are
applied in a similar fashion to inheritance.</li>
<li>Inherited tasks can be extended from by project-level tasks.</li>
<li>It's possible to create multiple extended chains.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configure-tasks-as-interactive">Configure tasks as interactive<a href="https://moonrepo.dev/blog/moon-v1.12#configure-tasks-as-interactive" class="hash-link" aria-label="Direct link to Configure tasks as interactive" title="Direct link to Configure tasks as interactive">​</a></h2>
<p>Six months ago, we added support for <a href="https://moonrepo.dev/blog/v0.24#interactive-tasks">interactive tasks in v0.24</a>, but
only if certain conditions were met: if only 1 target is running, they are considered interactive,
or if the <code>--interactive</code> option was passed to <a href="https://moonrepo.dev/docs/commands/run"><code>moon run</code></a>. However, we believe
it nice to support interactive tasks through task configuration directly, but it required some
thought into how this would work within the dependency graph and pipeline, as only 1 task can
interact with stdin at a time.</p>
<p>We solved this problem by reworking our dependency graph so that interactive tasks are isolated from
other actions in the graph, and are not run in parallel with other actions. This will result in
longer dependency chains, but results in a working stdin solution.</p>
<p>To mark a task as interactive, enable the <a href="https://moonrepo.dev/docs/config/project#interactive"><code>options.interactive</code></a>
setting.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">init</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'init-app'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">interactive</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="tokens-in-enviroment-variables">Tokens in enviroment variables<a href="https://moonrepo.dev/blog/moon-v1.12#tokens-in-enviroment-variables" class="hash-link" aria-label="Direct link to Tokens in enviroment variables" title="Direct link to Tokens in enviroment variables">​</a></h2>
<p>Up until now, <a href="https://moonrepo.dev/docs/concepts/token">token functions and variables</a> were only supported in task
commands, args, inputs, and outputs, but not environment variables... why? Honestly, there was no
real reason they weren't supported, it simply never crossed our mind! But thanks to requests from
the community, both token functions and variables are now supported in task
<a href="https://moonrepo.dev/docs/config/project#env-1"><code>env</code></a>.</p>
<p>This is great for propagating moon values to other systems. For example, say you want to use moon
project names for Sentry, keeping a 1:1 mapping.</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">start</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'run-server'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">SENTRY_PROJECT</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'$project'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you're familiar with tokens, you may be asking yourself, "How do token functions work since they
expand to a list of paths?" That's a great question! When token functions are used in an environment
variable, like <code>@group(sources)</code>, the list of paths will be joined with a comma (<code>,</code>).</p>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">SRCS</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(sources)'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since the environment variable is simply a string, you could parse it with your language of choice
to extract the list of paths.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token keyword" style="color:#b7a9f9">const</span><span class="token plain"> paths </span><span class="token operator" style="color:#b7a9f9">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#cad4e2">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#cad4e2">.</span><span class="token constant" style="color:#ff94ff;font-weight:bold">SRCS</span><span class="token punctuation" style="color:#cad4e2">.</span><span class="token method function property-access" style="color:#ff94ff;font-weight:bold">split</span><span class="token punctuation" style="color:#cad4e2">(</span><span class="token string" style="color:#c9e166">','</span><span class="token punctuation" style="color:#cad4e2">)</span><span class="token punctuation" style="color:#cad4e2">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.12#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.12.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Added git worktree support.</li>
<li>Updated task <code>outputs</code> to support negated globs.</li>
<li>Will now log a warning to the console if a configuration file uses the <code>.yaml</code> extension.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="tasks" term="tasks"/>
        <category label="inheritance" term="inheritance"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[proto v0.14 - Node.js and Rust now powered by WASM plugins]]></title>
        <id>https://moonrepo.dev/blog/proto-v0.14</id>
        <link href="https://moonrepo.dev/blog/proto-v0.14"/>
        <updated>2023-08-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[With this release, we've finished our migration to a WASM based plugin architecture.]]></summary>
        <content type="html"><![CDATA[<p>With this release, we've finished our migration to a WASM based plugin architecture.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="full-migration-to-wasm">Full migration to WASM<a href="https://moonrepo.dev/blog/proto-v0.14#full-migration-to-wasm" class="hash-link" aria-label="Direct link to Full migration to WASM" title="Direct link to Full migration to WASM">​</a></h2>
<p>In <a href="https://moonrepo.dev/blog/proto-v0.13">our last release</a>, we migrated the Bun, Deno, and Go plugins to WASM. In this
release, we're excited to announce that we have completed our WASM migration by also converting
Node.js (and npm, etc) and Rust to WASM plugins. We've also updated our TOML plugin layer to use
WASM under the hood.</p>
<p>With this, 100% of our tools are now powered by WASM, and the APIs are stable enough for you, the
consumers, to build your own plugins! We have plans for additional APIs in the next release,
primarily installing and uninstall globals, and a hooks system, so look forward to that! To learn
more about our official plugins, check out the their repositories!</p>
<ul>
<li><a href="https://github.com/moonrepo/bun-plugin" target="_blank" rel="noopener noreferrer">Bun</a></li>
<li><a href="https://github.com/moonrepo/deno-plugin" target="_blank" rel="noopener noreferrer">Deno</a></li>
<li><a href="https://github.com/moonrepo/go-plugin" target="_blank" rel="noopener noreferrer">Go</a></li>
<li><a href="https://github.com/moonrepo/node-plugin" target="_blank" rel="noopener noreferrer">Node</a></li>
<li><a href="https://github.com/moonrepo/rust-plugin" target="_blank" rel="noopener noreferrer">Rust</a></li>
<li><a href="https://github.com/moonrepo/schema-plugin" target="_blank" rel="noopener noreferrer">Schema</a></li>
</ul>
<p>This release may seem light, but we
<a href="https://github.com/moonrepo/proto/pull/161" target="_blank" rel="noopener noreferrer">rewrote the entire core</a> from the ground up to support
a pure plugin based architecture. This was a lot of work, but our implementation is far easier to
work with, and more robust. As part of this process, we improved version and range handling, archive
unpacking, and much more!</p>
<blockquote>
<p>Because of the rewrite, we may have introduced a few bugs. Please report any issues!</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes-for-toml-plugins">Breaking changes for TOML plugins<a href="https://moonrepo.dev/blog/proto-v0.14#breaking-changes-for-toml-plugins" class="hash-link" aria-label="Direct link to Breaking changes for TOML plugins" title="Direct link to Breaking changes for TOML plugins">​</a></h2>
<p>In preparation for the next release, and as clean up during the rewrite, we've made a few breaking
changes to the TOML schema, primarily around global handling. To start, this old code:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">install</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">globals-dir</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"$PROTOSTAR_HOME/bin"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"$HOME/.protostar/bin"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">global-args</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"install"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"--force"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"{dependency}"</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Can now be rewritten as:</p>
<div class="language-toml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-toml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">[</span><span class="token table class-name" style="color:#ff94ff;font-weight:bold">globals</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">lookup-dirs</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"$PROTOSTAR_HOME/bin"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"$HOME/.protostar/bin"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key property" style="color:#b7a9f9">install-args</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"install"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"--force"</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"{dependency}"</span><span class="token punctuation" style="color:#cad4e2">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And lastly, the <code>install.unpack</code> setting has been removed. We believe our installation layer is
smart enough to unpack or move files automatically.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/proto-v0.14#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/proto/releases/tag/v0.14.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Versions defined in <code>.prototools</code> must be fully-qualified semantic versions. Partial versions
(missing patch or minor) are no longer supported. This may change in the future based on feedback.</li>
<li>Tool and plugin names must now be in kebab-case.</li>
<li>Node<!-- -->
<ul>
<li>Yarn 2+ is now installed using <code>@yarnpkg/cli-dist</code>. We no longer downgrade to the latest v1.</li>
<li>Will no longer detect a version from <code>engines</code> in <code>package.json</code>.</li>
</ul>
</li>
<li>Rust<!-- -->
<ul>
<li>Will now detect a version/channel from <code>rust-toolchain.toml</code> and <code>rust-toolchain</code>.</li>
</ul>
</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="proto" term="proto"/>
        <category label="wasm" term="wasm"/>
        <category label="plugin" term="plugin"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[moon v1.11 - Next-generation project graph]]></title>
        <id>https://moonrepo.dev/blog/moon-v1.11</id>
        <link href="https://moonrepo.dev/blog/moon-v1.11"/>
        <updated>2023-07-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[With this release, we've focused heavily on rewriting our project graph for the next-generation of]]></summary>
        <content type="html"><![CDATA[<p>With this release, we've focused heavily on rewriting our project graph for the next-generation of
moon.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-project-graph">New project graph<a href="https://moonrepo.dev/blog/moon-v1.11#new-project-graph" class="hash-link" aria-label="Direct link to New project graph" title="Direct link to New project graph">​</a></h2>
<p>One of the first features that was built for moon was the project graph, as this was required to
determine relationships between tasks and projects. Its initial implementation was rather simple, as
it was a basic directed acyclic graph (DAG). However, as moon grew in complexity, so did the project
graph, and overtime, it has accrued a lot of cruft and technical debt.</p>
<p>One of the biggest pain points has been the project graph cache, and correctly invalidating the
cache for all necessary scenarios. If you've been using moon for a long time, you're probably aware
of all the hot fixes and patches that have been released. Another problem with the cache, is that it
included hard-coded <a href="https://github.com/moonrepo/moon/issues/937" target="_blank" rel="noopener noreferrer">file system paths</a> and
<a href="https://github.com/moonrepo/moon/issues/896" target="_blank" rel="noopener noreferrer">environment variables</a>, both of which would not
invalidate the cache when changed.</p>
<p>We felt it was time to rebuild the project graph from the ground up. Some of this work has already
landed in <a href="https://moonrepo.dev/blog/moon-v1.9#rewritten-task-inheritance">previous releases</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="old-implementation">Old implementation<a href="https://moonrepo.dev/blog/moon-v1.11#old-implementation" class="hash-link" aria-label="Direct link to Old implementation" title="Direct link to Old implementation">​</a></h3>
<p>For those of you who are interested in the technical details, here's a quick overview of how the old
project graph worked. To start, the graph was composed around the following phases:</p>
<ul>
<li><strong>Build</strong> - Projects are loaded into the graph (nodes), relationships are linked (edges),
configurations are read, tasks are inherited, and platform/language rules are applied.</li>
<li><strong>Expand</strong> - In all tasks, token variables and functions are expanded/substituted, dependencies
are expanded (<code>^:deps</code>, etc), <code>.env</code> files are read (when applicable), so on and so forth.</li>
<li><strong>Validate</strong> - Enforces project and task boundaries and constraints.</li>
</ul>
<p>This is quite a lot of work, and it was all done in <em>a single pass</em>. What this means is that for
each project loaded into the graph, we would recursively build -&gt; expand -&gt; validate, until all
projects have been loaded, synchronously at once in the same thread. Because this is a rather
expensive operation, the project graph cache was introduced to avoid having to do this work on every
run.</p>
<p>Makes sense, right? For the most part yes, but there is a core problem with the solution above, and
if you've noticed it already, amazing! The problem is that out of these 3 phases, only the build
phase is truly cacheable, as the expand and validate phases are far too dynamic and dependent on the
environment. This means that the cache is only partially effective, and in some cases, entirely
broken.</p>
<p>Another unrelated problem with this solution, is that because everything is built in a single pass,
advanced functionality that requires multiple passes is not possible and has been stuck on the
backlog.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="new-implementation">New implementation<a href="https://moonrepo.dev/blog/moon-v1.11#new-implementation" class="hash-link" aria-label="Direct link to New implementation" title="Direct link to New implementation">​</a></h3>
<p>For backwards compatibility, the new project graph works in a similar manner, but has none of the
shortcomings of the old implementation (hopefully). To start, the new project graph still has the
same 3 phases, but they are <em>no longer processed in a single pass</em>, instead...</p>
<p>The build phase is now asynchronous, enabling deeper interoperability with the rest of the
async-aware codebase. However, the critical change is that the project graph cache is now written
<em>after</em> the build phase (and read <em>before</em>), instead of after the entire graph being generated.</p>
<blockquote>
<p>The new cache file is <code>.moon/cache/states/partialProjectGraph.json</code>, and is named partial because
tasks have not been expanded. Use <code>moon project-graph --json</code> for a fully expanded graph.</p>
</blockquote>
<p>The expand phase has changed quite a bit. Instead of expanding everything at once, projects and
tasks are only expanded when they are needed. For example, if only running a single target, we'll
now only expand that project and task, instead of <em>everything</em> in the graph. With this change, you
should potentially see performance increases, unless you're using <code>moon ci</code> or <code>moon check --all</code>.</p>
<p>And lastly, validation is still the same, but has been reworked so that we can easily extend it with
more validation rules in the future.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="unlocked-features">Unlocked features<a href="https://moonrepo.dev/blog/moon-v1.11#unlocked-features" class="hash-link" aria-label="Direct link to Unlocked features" title="Direct link to Unlocked features">​</a></h3>
<p>With these changes to building and expanding, we've unlocked a few new features that were not
possible before.</p>
<ul>
<li>Task dependencies can now reference tag based targets. For example, say we want to build all React
projects before starting our application.</li>
</ul>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'next dev'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'#react:build'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Task commands and arguments will now substitute environment variables, by first checking <code>env</code>,
then those from the system.</li>
</ul>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'docker build --build-arg pkg=$PKG_NAME'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">PKG_NAME</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'foo-bar'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Project dependencies can now mark relationships as <code>build</code>. This is only applicable for languages
that support build dependencies, like Rust.</li>
</ul>
<div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar" style="background-color:#00080f;color:#e5e9f1"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'foo'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'build'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="https://moonrepo.dev/blog/moon-v1.11#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2>
<p>View the <a href="https://github.com/moonrepo/moon/releases/tag/v1.11.0" target="_blank" rel="noopener noreferrer">official release</a> for a full list
of changes.</p>
<ul>
<li>Identifiers (project names, file groups, etc) can now be prefixed with underscores (<code>_</code>).</li>
<li>Added Poetry detection support for Python projects.</li>
<li>Added an <code>experiments</code> setting to <code>.moon/workspace.yml</code>.</li>
</ul>]]></content>
        <author>
            <name>Miles Johnson</name>
            <uri>https://github.com/milesj</uri>
        </author>
        <category label="project-graph" term="project-graph"/>
        <category label="project" term="project"/>
    </entry>
</feed>