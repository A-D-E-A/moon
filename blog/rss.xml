<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>moonrepo Blog</title>
        <link>https://moonrepo.dev/blog</link>
        <description>moonrepo Blog</description>
        <lastBuildDate>Wed, 08 Feb 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Remote caching is now publicly available through moonbase]]></title>
            <link>https://moonrepo.dev/blog/moonbase</link>
            <guid>https://moonrepo.dev/blog/moonbase</guid>
            <pubDate>Wed, 08 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[We are proud to announce the launch of moonbase remote caching – a new solution that]]></description>
            <content:encoded><![CDATA[<p>We are proud to announce the launch of <a href="/moonbase">moonbase</a> remote caching – a new solution that
helps moon developers streamline their build processes and save time.</p><p>Remote caching allows developers to cache artifacts across builds, improving the efficiency of their
Continuous Integration (CI) pipelines. This is accomplished by automatically caching build artifacts
when moon is run with moonbase <a href="/docs/guides/remote-cache">remote caching enabled</a>. In the event
that a CI run is executed with identical code, the cached artifacts are automatically pulled down,
reducing the time required to complete the build. In our tests, we have seen significant
improvements in CI times, upwards of 90%.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="what-is-moonbase">What is moonbase?<a href="#what-is-moonbase" class="hash-link" aria-label="Direct link to What is moonbase?" title="Direct link to What is moonbase?">​</a></h2><p>You may be asking yourself, what is moonbase? <a href="/moonbase">moonbase</a> is a new cloud service that
we've been working on to solve an array of problems in regards to repository and continous
integration health.</p><div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/org-bc5ac0d2c9196fe2d565e9e715b7a205.png" width="80%" alt="" class="inline-block"></div><p>The first problem on this list is <a href="/docs/guides/remote-cache">remote caching</a>, which has been in a
beta program for the past few months. We want to thank all the beta participants for testing our
systems!</p><p>We'll also be launching CI insights in the next few weeks. This is a system where we track all your
CI runs (via <code>moon ci</code>), and all moon tasks (actions) that ran within each job. We use this
information to track the health of your pipelines, catch regressions, alert on flakiness, and more!
But don't worry, this feature is opt-in.</p><p>We're very excited for moonbase! We have a massive roadmap ahead of us, but we're sure y'all will
enjoy everything that it has to offer.</p><div class="flex justify-center"><a class="border border-transparent rounded-md px-2 flex items-center justify-center text-base font-bold text-white bg-blurple-400 dark:bg-purple-600 hover:text-white hover:bg-blurple-500 dark:hover:bg-purple-500 cursor-pointer py-2" href="https://moonrepo.app" target="_blank">Try moonbase for free!</a></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-homepage-and-product-pages">New homepage and product pages<a href="#new-homepage-and-product-pages" class="hash-link" aria-label="Direct link to New homepage and product pages" title="Direct link to New homepage and product pages">​</a></h2><p>As part of this release, we've updated our homepage, and added new product pages for both
<a href="/moon">moon</a> and <a href="/moonbase">moonbase</a>. This includes new logos and typography, which we're very
excited for! This is only the beginning, as we're also working on additional behind the scenes
products. Stay tuned!</p>]]></content:encoded>
            <category>moonbase</category>
            <category>remote-cache</category>
        </item>
        <item>
            <title><![CDATA[moon v0.23 - Scoped task inheritance, and project config updates]]></title>
            <link>https://moonrepo.dev/blog/v0.23</link>
            <guid>https://moonrepo.dev/blog/v0.23</guid>
            <pubDate>Mon, 30 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we're launching the next iteration of our task inheritance model, as well as]]></description>
            <content:encoded><![CDATA[<p>With this release, we're launching the next iteration of our task inheritance model, as well as
quality of life improvements for project configuration.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="developer-survey">Developer survey<a href="#developer-survey" class="hash-link" aria-label="Direct link to Developer survey" title="Direct link to Developer survey">​</a></h2><p>Before we dive into this new release, we have a quick survey for everyone. We know how everyone
feels about surveys, but this one is real quick, only a few minutes, and is mostly multiple choice
questions.</p><p>We're looking for feedback on moon itself, what features you're looking for, what you currently do
not like, how you're currently using monorepos, your development workflows, so on and so forth. We'd
very much appreciate it if you could engage with this survey!</p><div class="flex justify-center"><a class="border border-transparent rounded-md px-2 flex items-center justify-center text-base font-bold text-white bg-blurple-400 dark:bg-purple-600 hover:text-white hover:bg-blurple-500 dark:hover:bg-purple-500 cursor-pointer py-2" href="https://a.sprig.com/UE1SOG1zV3o5SzdRfnNpZDpmOTQ5MjU1Yy1jYTZlLTRmYjQtOTRjZi0wMzZlZjExN2JjZDg=" target="_blank">Take survey!</a></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-task-inheritance-model">Improved task inheritance model<a href="#improved-task-inheritance-model" class="hash-link" aria-label="Direct link to Improved task inheritance model" title="Direct link to Improved task inheritance model">​</a></h2><p>One of the guiding principles behind moon is to simplify repository maintenance, with task
management being top of list. We weren't happy with the current state of things, as every build
system and task runner that exists always opted for per-project task management, which is a massive
amount of overhead and tech debt in the long run. To combat this, moon was designed from the
ground-up using a task inheritance model, where "global" tasks were defined in
<a href="/docs/config/tasks"><code>.moon/project.yml</code></a>, with per-project tasks still being an option with
<a href="/docs/config/project"><code>moon.yml</code></a>.</p><p>While inheritance worked great, it did have some shortcomings, such as:</p><ul><li>With the addition of <a href="/blog/v0.21">new programming languages</a>, there's no way to easily define
tasks for specific languages, that should only be inherited by specific projects.</li><li>There's no way to differentiate tasks between applications or libraries, as they typically have
different build/compilation systems.</li><li>All of the problems above can be "solved" with
<a href="/docs/config/project#inheritedtasks"><code>workspace.inheritedTasks</code></a> in all projects, but it's a
maintenance headache.</li></ul><p>We've been documenting a solution to these problems for many months now, and we're very excited to
finally release our new and improved task inheritance model that solves all of the problems above,
and opens the doors for future enhancements! Keep reading for more information.</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="new-moontasksyml-breaking">New <code>.moon/tasks.yml</code> (breaking)<a href="#new-moontasksyml-breaking" class="hash-link" aria-label="Direct link to new-moontasksyml-breaking" title="Direct link to new-moontasksyml-breaking">​</a></h3><p>To start, we renamed <code>.moon/project.yml</code> to <code>.moon/tasks.yml</code> as we want to emphasize that this
configuration file is for task inheritance functionality only. However, the semantics of this file
has <em>not</em> changed, and is still "tasks to be inherited by <em>all</em> projects".</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">$schema</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'https://moonrepo.dev/schemas/tasks.json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>We'll automatically rename this file for you when running a <code>moon</code> command!</p></blockquote><h3 class="anchor anchorWithStickyNavbar_JmGV" id="new-scoped-tasks-with-moontasksyml">New scoped tasks with <code>.moon/tasks/*.yml</code><a href="#new-scoped-tasks-with-moontasksyml" class="hash-link" aria-label="Direct link to new-scoped-tasks-with-moontasksyml" title="Direct link to new-scoped-tasks-with-moontasksyml">​</a></h3><p>The biggest change to task inheritance is that tasks can now be scoped by a project's
<a href="/docs/config/project#language"><code>language</code></a> or <a href="/docs/config/project#type"><code>type</code></a> using the new
<code>.moon/tasks/&lt;language&gt;.yml</code> or <code>.moon/tasks/&lt;language&gt;-&lt;type&gt;.yml</code> configuration files! Jump to the
<a href="/docs/concepts/task#inheritance">official documentation on task inheritance</a> for more information
on how scoping works, the lookup order of files, and much more.</p><p>As a demonstration, you can scope tasks to Node.js projects with <code>.moon/tasks/node.yml</code>, Rust
applications with <code>.moon/tasks/rust-application.yml</code>, Go libraries with
<code>.moon/tasks/go-library.yml</code>, Ruby scripts with <code>.moon/tasks/ruby-tool.yml</code>, so on and so forth!</p><p>We're very excited for this feature, as it's something we personally needed, and we're sure you all
do as well. It also future proofs moon for new programming languages, additional implicit scenarios
to handle, and yet to be discovered functionality.</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Node</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Go</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">PHP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Ruby</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Rust</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/node.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'prettier --write .'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/go.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'go fmt'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/php.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'phpcbf .'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/python.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'pylint .'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/ruby.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rubocop -l'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/rust.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">format</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'cargo fmt --all --check'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_JmGV" id="moved-implicitdeps-and-implicitinputs-breaking">Moved <code>implicitDeps</code> and <code>implicitInputs</code> (breaking)<a href="#moved-implicitdeps-and-implicitinputs-breaking" class="hash-link" aria-label="Direct link to moved-implicitdeps-and-implicitinputs-breaking" title="Direct link to moved-implicitdeps-and-implicitinputs-breaking">​</a></h3><p>To standardize inheritance and expansion related functionality, we've moved the
<code>runner.implicitDeps</code> and <code>runner.implicitInputs</code> settings from <code>.moon/workspace.yml</code> to
<a href="/docs/config/tasks#implicitdeps"><code>.moon/tasks.yml</code></a> and
<a href="/docs/config/tasks#implicitinputs"><code>.moon/tasks/*.yml</code></a> and removed the <code>runner</code> prefix.</p><p>This allows for implicits to also be scoped accordingly and granularly. For example, projects can
now inherit dependency manager related files as implicit inputs on a per-language basis:</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Node</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Go</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">PHP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Ruby</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">Rust</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/node.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'package.json'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/go.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'go.mod'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/php.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'composer.json'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/python.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'pyproject.toml'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/ruby.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Gemfile'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/tasks/rust.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">implicitInputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Cargo.toml'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="project-level-environment-variables">Project-level environment variables<a href="#project-level-environment-variables" class="hash-link" aria-label="Direct link to Project-level environment variables" title="Direct link to Project-level environment variables">​</a></h2><p>Since moon's inception, tasks can be configured with pre-defined environment variables using the
<a href="/docs/config/project#env-1"><code>env</code></a> setting. These variables would then be passed to the command
during execution. This works perfectly for encapsulation, but becomes tedious when the same
variables are repeated for multiple tasks.</p><p>To remedy this, environment variables can now be defined at the top of
<a href="/docs/config/project"><code>moon.yml</code></a> using the top-level <a href="/docs/config/project#env"><code>env</code></a> setting.
Variables defined at the top-level will be inherited by all tasks in the current project, but will
not override task-level variables of the same name.</p><p>To demonstrate this, the following config:</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">TARGET_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'development'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">TARGET_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'development'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">serve</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">TARGET_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'development'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Can be rewritten as:</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">env</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">TARGET_ENV</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'development'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">serve</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="globs-in-task-outputs">Globs in task outputs<a href="#globs-in-task-outputs" class="hash-link" aria-label="Direct link to Globs in task outputs" title="Direct link to Globs in task outputs">​</a></h2><p>Another feature that's been around since moon's inception is task
<a href="/docs/config/project#outputs"><code>outputs</code></a>, which only supported relative files and folders. For
historical reasons, it was the easiest solution at the time, but in practice, supporting more
granular control is better.</p><p>As such, task <code>outputs</code> now support glob patterns as well! This is perfect for restricting and
filtering down which files are cached in the artifact. However, be aware that during hydration (a
cache hit), all files <em>not matching the glob</em> will be deleted, so ensure that critical files <em>do</em>
match.</p><p>To demonstrate this, if building a JavaScript project, you may want to include <code>.js</code> and <code>.css</code>
files, but exclude everything else (<code>.map</code>, etc).</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'webpack'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'build/**/*.{js,css}'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.23.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Updated <code>moon migrate from-turborepo</code> to preserve globs in outputs.</li><li>Updated project graph to no longer cache when there's no VCS root.</li><li>Updated pnpm to use the new <code>pnpm dedupe</code> command when the version is &gt;= 7.26.0.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.24 release!</p><ul><li>New <code>moon query tasks</code> command.</li><li>New per-project <code>platform</code> setting.</li><li>Token support in task <code>outputs</code>.</li><li>TypeScript v5 support.</li></ul>]]></content:encoded>
            <category>survey</category>
            <category>tasks</category>
            <category>projects</category>
        </item>
        <item>
            <title><![CDATA[moon v0.22 - New pipeline, hashing, and caching, with Turborepo migration]]></title>
            <link>https://moonrepo.dev/blog/v0.22</link>
            <guid>https://moonrepo.dev/blog/v0.22</guid>
            <pubDate>Mon, 16 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[It's the first release of the year, and with this release, we're landing some quality of life]]></description>
            <content:encoded><![CDATA[<p>It's the first release of the year, and with this release, we're landing some quality of life
infrastructure and workflow improvements!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-action-pipeline">New action pipeline<a href="#new-action-pipeline" class="hash-link" aria-label="Direct link to New action pipeline" title="Direct link to New action pipeline">​</a></h2><p>When running targets, we generate a graph of actions to execute in order within the action runner.
An action is one of "setup toolchain", "install dependencies", "run target", so on and so forth. Our
action runner would then spawn threads for every action using the <a href="https://tokio.rs/" target="_blank" rel="noopener noreferrer">Tokio</a>
runtime. While this worked great, concurrency was entirely abstracted away from us.</p><p>To mitigate this problem, we've implemented a new system for executing actions known as the action
pipeline (or simply pipeline), which implements a dynamically scaling thread pool on top of Tokio.
This provides us with more control over concurrency, starting with the new <code>--concurrency</code> option,
which restricts the number of threads (or CPU cores).</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run :build --concurrency </span><span class="token number" style="color:#94dded">2</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="expanded-hashing-functionality">Expanded hashing functionality<a href="#expanded-hashing-functionality" class="hash-link" aria-label="Direct link to Expanded hashing functionality" title="Direct link to Expanded hashing functionality">​</a></h2><p>When we run targets in the pipeline, we hash a collection of inputs to calculate whether to continue
running or to exit early. This functionality has been extremely beneficial for optimizing the
pipeline, and so, we've expanded the hasher for other use cases. To start, the following 2 workflows
now utilize the hasher:</p><ul><li>When determining to auto-install dependencies (<code>npm install</code>, etc), we now hash all production,
development, and peer dependencies from applicable manifests (<code>package.json</code>). This has resulted
in more accurate installs, as we're no longer inadvertently installing when a non-dependency field
is modified in a manifest. On top of this, will still take into account lockfile modified
timestamps.</li><li>When generating the project graph, we now hash all sources, aliases, and configuration files, to
determine whether to load the project graph from the local cache.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="project-graph-is-now-cached">Project graph is now cached<a href="#project-graph-is-now-cached" class="hash-link" aria-label="Direct link to Project graph is now cached" title="Direct link to Project graph is now cached">​</a></h2><p>Because of the hashing improvements above, we're now able to cache the entirety of the project graph
into local cache. Depending on how many projects are in your workspace, you may see performance
improvements on subsequent runs as we're no longer re-building the project graph over and over
everytime the <code>moon</code> binary is ran.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="migrate-from-turborepo">Migrate from Turborepo<a href="#migrate-from-turborepo" class="hash-link" aria-label="Direct link to Migrate from Turborepo" title="Direct link to Migrate from Turborepo">​</a></h2><p>Turborepo is a popular task runner for Node.js based monorepos, but doesn't support all the
functionality that moon does. If you're looking to prototype moon, or migrate from Turborepo to moon
holistically, we now support a new command
<a href="/docs/commands/migrate/from-turborepo"><code>moon migrate from-turborepo</code></a>.</p><p>This command will migrate the <code>turbo.json</code> file to moon applicable configuration files!</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon migrate from-turborepo</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes">​</a></h2><h3 class="anchor anchorWithStickyNavbar_JmGV" id="renamed-events">Renamed events<a href="#renamed-events" class="hash-link" aria-label="Direct link to Renamed events" title="Direct link to Renamed events">​</a></h3><p>Because of the runner -&gt; pipeline changes above, the <code>runner.*</code> <a href="/docs/guides/webhooks">webhook</a>
events were renamed to <code>pipeline.*</code>.</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="updated-cli-options">Updated CLI options<a href="#updated-cli-options" class="hash-link" aria-label="Direct link to Updated CLI options" title="Direct link to Updated CLI options">​</a></h3><p>Renamed the <code>--upstream</code> option to <code>--remote</code>, to better align with git terminology, and removed the
<code>--report</code> option from <code>moon check</code> and <code>moon run</code> commands. Reports are now always created.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.22.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Added Bun as a Tier 1 language (doesn't do much at the moment).</li><li>Added a <a href="/docs/config/workspace#versionconstraint"><code>versionConstraint</code> setting</a> in
<code>.moon/workspace.yml</code> that enforces a requirement on the running moon binary.</li><li>Updated the <a href="/docs/config/project#project"><code>project</code> fields</a> in <code>moon.yml</code> to be optional,
excluding <code>description</code>.</li><li>Internal improvements to remote caching and artifact uploading.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.23 release!</p><ul><li>Improved task inheritance workflow.</li><li>Glob support in task <code>outputs</code>.</li><li>Project-level environment variables.</li></ul>]]></content:encoded>
            <category>graph</category>
            <category>pipeline</category>
            <category>hasher</category>
            <category>migrate</category>
        </item>
        <item>
            <title><![CDATA[What's in store for 2023]]></title>
            <link>https://moonrepo.dev/blog/2023-roadmap</link>
            <guid>https://moonrepo.dev/blog/2023-roadmap</guid>
            <pubDate>Wed, 04 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Happy new year! Let's start 2023 by reflecting on last year and diving into our tentative year long]]></description>
            <content:encoded><![CDATA[<p>Happy new year! Let's start 2023 by reflecting on last year and diving into our tentative year long
roadmap.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="year-2022-in-review">Year 2022 in review<a href="#year-2022-in-review" class="hash-link" aria-label="Direct link to Year 2022 in review" title="Direct link to Year 2022 in review">​</a></h2><p>The original concept and
<a href="https://github.com/moonrepo/moon/commit/62267e3ccda7a45c2e9355fcbddba577ae54403d" target="_blank" rel="noopener noreferrer">first commit of moon</a>
(codenamed monolith) landed October 23rd, 2021. Eight months later, we
<a href="https://twitter.com/tothemoonrepo/status/1527467865200136192" target="_blank" rel="noopener noreferrer">launched an alpha of moon</a> to the
public on May 19th, 2022. Since then, we've landed 21 amazing releases based on feedback from the
community and our long-term vision, with some such features as:</p><ul><li>Linux musl, macOS silicon, and ARM support</li><li>Full Node.js/JavaScript ecosystem support</li><li>End-to-end caching and hashing of build artifacts</li><li>Streamlined configuration</li><li>Improved developer experience</li><li>Massive performance improvements</li><li>Automatic cache cleaning</li><li>Code generation / scaffolding</li><li>Dockerfile integration</li><li>Remote caching</li><li>New langauage agnostic toolchain</li><li>Onboarding of 5 new languages: Rust, Go, PHP, Python, Ruby</li><li>Rewritten project and dependency graphs</li><li>Project-level toolchain overrides</li><li>Project specific caching</li><li>VSCode extension</li><li>2 GitHub actions</li><li>...and so much more!</li></ul><p>We're very proud with the quality and amount of features we've released in a 7 month timeframe. On
top of this, our <a href="https://github.com/moonrepo/moon/stargazers" target="_blank" rel="noopener noreferrer">GitHub stars</a> have steadily passed
the 1k mark, <a href="https://www.npmjs.com/package/@moonrepo/cli" target="_blank" rel="noopener noreferrer">npm</a> downloads are 500 a week and
growing, and our <a href="https://twitter.com/tothemoonrepo" target="_blank" rel="noopener noreferrer">Twitter</a> isn't doing too bad. This is only the
start, and we're not planning to go anywhere!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="path-to-an-official-v1-release">Path to an official v1 release<a href="#path-to-an-official-v1-release" class="hash-link" aria-label="Direct link to Path to an official v1 release" title="Direct link to Path to an official v1 release">​</a></h2><p>A common question we receive is "When is v1 going to be released?", as some consumers are weary of
using a "beta" tool. We definitely understand, and as such, have posted a
<a href="https://github.com/moonrepo/moon/issues/491" target="_blank" rel="noopener noreferrer">high-level overview</a> of what we're hoping to land
before we tag an official v1 release. It basically boils down to landing breaking changes (mainly
around configuration) before v1, so that we avoid bumping to a v2 or v3 unnecessarily. We also want
to land our <a href="#proto">toolchain changes</a> and <a href="#moonbase">remote caching</a> improvements before then.</p><p>Our current timeframe is by end of Q1, if not, early Q2.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="launching-moonbase">Launching moonbase<a href="#launching-moonbase" class="hash-link" aria-label="Direct link to Launching moonbase" title="Direct link to Launching moonbase">​</a></h2><p>We haven't mentioned this name publicly yet, but now seems like the perfect time! For the past 6
months we've been working a new web application and service called moonbase, which pairs nicely with
moon, as it provides additional functionality that can only be achieved by persisting information
across runs.</p><p>To start, this service provides <a href="/docs/guides/remote-cache">remote caching</a>, which we're already
using in production. At this point in time, objects are stored in our moonrepo S3 buckets, but one
of our major goals is to support storing objects in your private buckets, supporting additional
cloud providers like Google Cloud and Azure, and in the long-term, a self-hosted / on-premises
solution.</p><p>But that's not all! moonbase will integrate deeply with <a href="/docs/guides/ci">continuous integration</a>
pipelines to generate insights, capture metrics, and provide near real-time dashboards. Our goal is
to provide a holistic overview of your entire repository.</p><p>moonbase with publicly available remote caching is slated for end of Q1. CI integration is
tentatively slated for Q2. We have even more features that we'll reveal in the future, so stay
tuned!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="launching-proto">Launching proto<a href="#launching-proto" class="hash-link" aria-label="Direct link to Launching proto" title="Direct link to Launching proto">​</a></h2><p>Another tool we haven't mentioned yet is proto (name still in flux). proto is a standardized version
manager for programming languages and dependency managers. We've basically extracted our
<a href="/docs/concepts/toolchain">toolchain</a> into a standalone library, as it's super beneficial for
projects and developers not using moon. It provides all the functionality you'd expect from a
version manager:</p><ul><li>Downloading and installing specific versions</li><li>Automatic version detection</li><li>Updating PATH with the applicable version</li><li>Generating shims</li><li>Pinning shell, local, and global versions</li></ul><p>So how's this different from existing version managers like nvm or volta? To start, it's written in
Rust so it's <em>fast</em> and doesn't suffer from being Bash only. Because of this, it's also
multi-platform and will work on Windows. But the biggest different is that proto is language
agnostic and will support multiple languages. To start, it supports Node.js and Deno, but will be
expanded to support our other toolchain languages like Bun, PHP, Ruby, and Python. Another cool
feature is that it also manages versions of dependency managers like npm, yarn, and pnpm!</p><p>We're planning to launch proto at the start of Q2.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="expanding-language-support">Expanding language support<a href="#expanding-language-support" class="hash-link" aria-label="Direct link to Expanding language support" title="Direct link to Expanding language support">​</a></h2><p>Our initial goal for moon was to provide a first-class build system for the frontend ecosystem that
focused heavily on automation and the developer experience. We believe we've accomplished this goal,
but of course, nothing is ever actually complete, and so JavaScript, TypeScript, and Node.js support
will continually be improved.</p><p>However, that's not the entirety of the frontend ecosystem, as <a href="https://deno.land/" target="_blank" rel="noopener noreferrer">Deno</a> and
<a href="https://bun.sh/" target="_blank" rel="noopener noreferrer">Bun</a> have been gaining traction this past year, and of course, moon will support
both of them as first-class platforms by end of year.</p><p>Futhermore, we recently landed Tier 1 support for 5 new languages: Rust, Ruby, PHP, Python, and Go.
Our end of year goal for these languages is to provide full Tier 2 support. Tier 3 support is still
an unknown, as we need to investigate the best possible way to integrate these languages into the
toolchain (this work is ongoing). We'll also add new languages based on demand.</p><p>With all that being said, this is our tenative timeline around
<a href="/docs#supported-languages">language support</a> (which may shift at any time):</p><ul><li><strong>Q1</strong><ul><li>Tier 1 support for Bun.</li><li>Tier 2 support for Deno.</li></ul></li><li><strong>Q2</strong><ul><li>Tier 2 support for Bun, PHP.</li><li>Tier 3 support for Deno.</li></ul></li><li><strong>Q3</strong><ul><li>Tier 2 support for Ruby, Python.</li><li>Tier 3 support for Bun.</li></ul></li><li><strong>Q4</strong><ul><li>Tier 2 support for Rust, Go.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="supporting-release-workflows">Supporting release workflows<a href="#supporting-release-workflows" class="hash-link" aria-label="Direct link to Supporting release workflows" title="Direct link to Supporting release workflows">​</a></h2><p>moon currently excels at organizing projects, running tasks, and building artifacts, but it has no
support for release workflows. This is everything from capturing changes, bumping versions,
generating changelogs, and publishing to upstream registries. If you use
<a href="https://github.com/lerna/lerna" target="_blank" rel="noopener noreferrer">Lerna</a> or <a href="https://github.com/changesets/changesets" target="_blank" rel="noopener noreferrer">changesets</a>,
you should be very familiar with this workflow.</p><p>Since moon supports monorepos and has in-depth knowledge of the project graph, we can support
release workflows with ease. Our goal is to support this workflow (for all languages) from start to
finish by end of year, ideally much sooner than that!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="more-repository-management-tooling">More repository management tooling<a href="#more-repository-management-tooling" class="hash-link" aria-label="Direct link to More repository management tooling" title="Direct link to More repository management tooling">​</a></h2><p>The other aspect of moon is that it's a repository management tool as well as a build system. We
want to embrace this even further by providing explicit functionality or automation when applicable.
Some examples of this are in-repository secrets management, git hooks management, code ownership and
quality tooling, code review helpers, repository/configuration linting, a moon DSL, and much much
more.</p>]]></content:encoded>
            <category>roadmap</category>
            <category>moonbase</category>
            <category>proto</category>
            <category>toolchain</category>
        </item>
        <item>
            <title><![CDATA[moon v0.21 - Tiered language support with initial Go, PHP, Python, Ruby, and Rust]]></title>
            <link>https://moonrepo.dev/blog/v0.21</link>
            <guid>https://moonrepo.dev/blog/v0.21</guid>
            <pubDate>Mon, 19 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Happy Holidays 🎄☃️! With our last release of the year, we're very excited to announce our tiered]]></description>
            <content:encoded><![CDATA[<p>Happy Holidays 🎄☃️! With our last release of the year, we're very excited to announce our tiered
language support structure, which lays the foundation for turning moon into a multi-language build
system! On top of this, we've worked heavily on bug fixing, optimizations, and overall quality of
life improvements.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-tiered-language-support">New tiered language support<a href="#new-tiered-language-support" class="hash-link" aria-label="Direct link to New tiered language support" title="Direct link to New tiered language support">​</a></h2><p>The most common question we receive is whether we plan to support additional languages besides
Node.js, with Rust, Deno, and Bun being top of that list. Adding new languages is non-trivial, as we
need to build abstractions that support and integrate with the language's ecosystem, primarily
dependency managers and resolution algorithms.</p><p>This is a very large upfront cost, with a huge time and resource commitment. To reduce this burden,
we're introducing a tiered support structure, so that languages can be incrementally integrated into
moon and adopted by consumers.</p><p>The tiers break down as follows:</p><ul><li>&nbsp;<span class="inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase bg-red-100 text-red-900">Tier 0</span> <!-- -->&nbsp;<!-- --> <strong>No direct integration</strong> - Tool is not
directly supported in moon, but can still be ran using the
<a href="/docs/faq#can-we-run-other-languages">"system" task platform</a>, which expects the tool to exist
in the current environment.</li><li>&nbsp;<span class="inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase bg-orange-100 text-orange-900">Tier 1</span> <!-- -->&nbsp;<!-- --> <strong>Project categorization</strong> - Projects can
configure their primary <a href="/docs/config/project#language">language in <code>moon.yml</code></a>.</li><li>&nbsp;<span class="inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase bg-pink-100 text-pink-900">Tier 2</span> <!-- -->&nbsp;<!-- --> <strong>Ecosystem platformization</strong> - moon deeply
integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files
to infer dependencies, tasks, and other necessary information.</li><li>&nbsp;<span class="inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase bg-green-100 text-green-900">Tier 3</span> <!-- -->&nbsp;<!-- --> <strong>Toolchain integration</strong> - Language is
directly supported in the toolchain, configured in
<a href="/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>, and will automatically be downloaded and
installed.</li></ul><p>To learn more about our currently supported languages and their tiers,
<a href="/docs#supported-languages">jump to the official documentation</a>.</p><blockquote><p>One important facet we'd like to express, is that <em>all</em> languages and tools fall into Tier 0. Feel
free to use anything you'd like as a task command!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="basic-support-for-go-php-python-ruby-and-rust">Basic support for Go, PHP, Python, Ruby, and, Rust<a href="#basic-support-for-go-php-python-ruby-and-rust" class="hash-link" aria-label="Direct link to Basic support for Go, PHP, Python, Ruby, and, Rust" title="Direct link to Basic support for Go, PHP, Python, Ruby, and, Rust">​</a></h2><p>As announced above, we now incrementally support new languages, and have integrated the following 5
languages with Tier 1 support: Go, PHP, Python, Ruby, and, Rust! Start using these languages today
by setting the <a href="/docs/config/project#language"><code>language</code></a> field in <code>moon.yml</code>, or by letting moon
infer the language based on files in the project root (for example, <code>Cargo.toml</code> is Rust).</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">language</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rust'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'cargo build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'src/**/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Cargo.toml'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">test</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'cargo test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'src/**/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'tests/**/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'Cargo.toml'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Because these languages are Tier 1, moon <em>does not</em> install the language automatically, and will
require the command to already exist in the environment. Furthermore, the project language will
automatically set all task's <code>platform</code> to "system", at least until it's supported directly in the
toolchain.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="interactive-project-and-dependency-graphs">Interactive project and dependency graphs<a href="#interactive-project-and-dependency-graphs" class="hash-link" aria-label="Direct link to Interactive project and dependency graphs" title="Direct link to Interactive project and dependency graphs">​</a></h2><p>Thanks to the amazing contribution from <a href="https://github.com/IgnisDa" target="_blank" rel="noopener noreferrer">Diptesh Choudhuri</a>, we now have
interactive project and dependency graphs when running the
<a href="/docs/commands/project-graph"><code>moon project-graph</code></a> and
<a href="/docs/commands/dep-graph"><code>moon dep-graph</code></a> commands respectively.</p><p>This is only the first iteration of these graphs. Expect more advanced features in the future, like
filtering, node/edge inspection, exporting, and more!</p><div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/graph-0007e61b56b4bb9a3930f73c53766755.png" width="80%" alt="" class="inline-block"></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new---updatecache-command-line-option">New <code>--updateCache</code> command line option<a href="#new---updatecache-command-line-option" class="hash-link" aria-label="Direct link to new---updatecache-command-line-option" title="Direct link to new---updatecache-command-line-option">​</a></h2><p>Our caching layer is pretty powerful, as it helps to avoid tasks from running unnecessarily.
However, there are situations where you need to refresh or force update the cache outside of the
<a href="/docs/config/project#inputs"><code>inputs</code></a> list. This is currently achieved with the
<a href="/docs/commands/overview#caching"><code>--cache</code></a> option, like <code>moon --cache off run ...</code>, but this is
non-ideal for a few reasons:</p><ol><li>It disables <em>all caching</em>, which means dependency installs/dedupes will continually be ran. This
adds a lot of unwanted overhead.</li><li>It requires you to backspace in the terminal to add the option <em>before</em> <code>run</code> or <code>check</code>, as it's
a global option. A little tedious but important for experience.</li></ol><p>So to work around these limitations, we've added a new <code>--updateCache</code> (or <code>-u</code>) to both
<a href="/docs/commands/run"><code>moon run</code></a> and <a href="/docs/commands/run"><code>moon check</code></a>, which will bypass
reading any existing cache items, but will force update the cache base on the latest run.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run app:build --updateCache</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-multi-status-affected-filtering">New multi-status affected filtering<a href="#new-multi-status-affected-filtering" class="hash-link" aria-label="Direct link to New multi-status affected filtering" title="Direct link to New multi-status affected filtering">​</a></h2><p>We support running tasks based on affected files using the
<a href="/docs/commands/run"><code>moon run --affected</code></a> command, which is great for reducing the amount of
tasks being ran, and for applying code quality tooling like git hooks. However, you were only able
to apply a single status filter, like "deleted" or "modified", which was non-ideal... but no more!</p><p>You can now apply multiple statuses by passing the <code>--status</code> option multiple times.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon run :lint --affected --status modified --status added</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This pairs nicely with the recent
<a href="/docs/config/project#affectedfiles"><code>affectedFiles</code> task option</a> changes!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.21.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Refactored project and dependency graphs for improved performance.</li><li>Added args and env var variants to the <code>affectedFiles</code> task option.</li><li>Added <code>--minimal</code> to <code>moon init</code> for quick scaffolding and prototyping.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.22 release!</p><ul><li>Generalized hashing for use in any context (improved deps installation).</li><li>More work on language integrations.</li></ul>]]></content:encoded>
            <category>runner</category>
            <category>language</category>
            <category>platform</category>
            <category>cache</category>
            <category>graph</category>
        </item>
        <item>
            <title><![CDATA[moon v0.20 - Toolchain, caching, and hydration improvements]]></title>
            <link>https://moonrepo.dev/blog/v0.20</link>
            <guid>https://moonrepo.dev/blog/v0.20</guid>
            <pubDate>Tue, 29 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've focused heavily on future proofing our toolchain and how it integrates with]]></description>
            <content:encoded><![CDATA[<p>With this release, we've focused heavily on future proofing our toolchain and how it integrates with
moon. We've also landed a handful of quality of life improvements.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes">​</a></h2><p>To start, we have a few breaking changes this release to be aware of!</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="moved-toolchain-settings">Moved toolchain settings<a href="#moved-toolchain-settings" class="hash-link" aria-label="Direct link to Moved toolchain settings" title="Direct link to Moved toolchain settings">​</a></h3><p>The <a href="/docs/config/workspace"><code>.moon/workspace.yml</code></a> config file was getting rather bloated and
complicated, as it contained the projects list, settings for each toolchain language, and settings
for each supported service (runner, generator, etc). Furthermore, this file will keep getting larger
with each new language and service we support.</p><p>To future proof moon, and to land as many breaking changes before an official v1, we've decided to
move toolchain specific settings into a new file, <a href="/docs/config/toolchain"><code>.moon/toolchain.yml</code></a>.
This new file will house all language and dependency manager specific settings.</p><p>To migrate, move the <code>node</code> and <code>typescript</code> settings from <code>.moon/workspace.yml</code> to
<code>.moon/toolchain.yml</code>.</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/toolchain.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">typescript</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_JmGV" id="moved-project-level-overrides">Moved project-level overrides<a href="#moved-project-level-overrides" class="hash-link" aria-label="Direct link to Moved project-level overrides" title="Direct link to Moved project-level overrides">​</a></h3><p>Continuing with the changes above, we've also moved the <code>workspace.node</code> and <code>workspace.typescript</code>
from <a href="/docs/config/project"><code>moon.yml</code></a> into a new parent field, <code>toolchain</code>. We think this makes
more sense.</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">workspace</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'...'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">toolchain</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'...'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="future-of-the-toolchain">Future of the toolchain<a href="#future-of-the-toolchain" class="hash-link" aria-label="Direct link to Future of the toolchain" title="Direct link to Future of the toolchain">​</a></h2><p>We're really proud of our toolchain, as it avoids an array problems that developers deal with on a
day to day basis, primarily around running tasks using the wrong version of Node.js or their chosen
package manager. While we're in the process of supporting additional languages, starting with
<a href="https://deno.land/" target="_blank" rel="noopener noreferrer">Deno</a>, we had an idea... Since this is basically a better "version manager for
tools", why not extract this out into something else?</p><p>And that's what we plan to do! Before we do so, we've had to make some architectural changes, many
of which have landed in this release. During this process, we were able to implement an even better
toolchain, polish many of the edge cases, and improve performance! Stay tuned for more information
on this new tool!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="increased-output-hydration-by-8-10x">Increased output hydration by 8-10x<a href="#increased-output-hydration-by-8-10x" class="hash-link" aria-label="Direct link to Increased output hydration by 8-10x" title="Direct link to Increased output hydration by 8-10x">​</a></h2><p>In moon, hydration is the concept of unpacking an existing hashed artifact into a
<a href="/docs/config/project#outputs">task's outputs</a> during a cache hit. In our previous implementation,
we would delete all existing outputs before unpacking the archive to ensure a clean slate and to
avoid stale files. While this worked, it wasn't the most performant, taking about 280ms for 1,000
files (which is still reasonably fast!).</p><p>In our new implementation, we now utilize a smart file tree diffing algorithm that will only unpack
files <em>with different content</em>, and will automatically remove stale files in the process. This has
resulted in a 10x performance increase, taking about 30ms! Multiply this by many projects, the
results should be very apparent.</p><p>We hope you enjoy this improvement, as it's the first of many to come!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="cache-any-and-all-targets">Cache any and all targets<a href="#cache-any-and-all-targets" class="hash-link" aria-label="Direct link to Cache any and all targets" title="Direct link to Cache any and all targets">​</a></h2><p>By default, all <a href="/docs/concepts/target">targets</a> that produce outputs are cached and archived. For
targets that <em>do not</em> produce outputs, like testing, linting, and typechecking, these are not
cached. This will result in slower CI times as they are continuously ran, even if nothing has
changed. However with our new <a href="/docs/guides/remote-cache">remote caching</a> layer, we can skip these
from running entirely!</p><p>To achieve this, we've added a new setting to <a href="/docs/config/workspace"><code>.moon/workspace.yml</code></a>
called <a href="/docs/config/workspace#archivabletargets"><code>runner.archivableTargets</code></a>. This setting
accepts a list of targets that should be archived, regardless of whether or not they produce
outputs.</p><p>For example, if we want to cache and archive testing, linting, and typechecking, we can define the
following:</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">runner</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">archivableTargets</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">':lint'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">':test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">':typecheck'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="path-handling-in-generator-templates">Path handling in generator templates<a href="#path-handling-in-generator-templates" class="hash-link" aria-label="Direct link to Path handling in generator templates" title="Direct link to Path handling in generator templates">​</a></h2><p>Our code generation is powered by <a href="https://tera.netlify.app/docs/#built-ins" target="_blank" rel="noopener noreferrer">Tera</a>, a templating
engine with a ton of built-in utilities. However, it does not provide utilities for file paths, and
as such, we now provide <code>path_join</code> and <code>path_relative</code> filters.</p><div class="language-twig codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-twig codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">{{</span><span class="token twig language-twig"> some_path </span><span class="token twig language-twig operator" style="color:#b7a9f9">|</span><span class="token twig language-twig"> path_relative</span><span class="token twig language-twig punctuation" style="color:#cad4e2">(</span><span class="token twig language-twig">from </span><span class="token twig language-twig operator" style="color:#b7a9f9">=</span><span class="token twig language-twig"> workspace_root</span><span class="token twig language-twig punctuation" style="color:#cad4e2">)</span><span class="token twig language-twig"> </span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">}}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We also now inject variables for the working directory, destination, and workspace root. This will
help with custom paths, especially within frontmatter!
<a href="/docs/guides/codegen#variables">View the codegen docs for more information</a>.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.20.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Added <code>vcs.remoteCandidates</code> to <code>.moon/workspace.yml</code> to customize the remotes for git to query
against.</li><li>Added support for <code>moduleSuffixes</code> and <code>moduleDetection</code> in TypeScript <code>tsconfig.json</code> compiler
options.</li><li>YAML files will now respect the closest <code>.editorconfig</code> file.</li><li>Refactored terminal output for bette readability.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.21 release!</p><ul><li>An interactive dependency and project graph visualizer.</li><li>A more performant project graph.</li><li>More quality of life improvements for affected files.</li></ul>]]></content:encoded>
            <category>hydration</category>
            <category>toolchain</category>
            <category>generator</category>
            <category>runner</category>
        </item>
        <item>
            <title><![CDATA[Integrating TypeScript in a monorepo]]></title>
            <link>https://moonrepo.dev/blog/typescript-monorepo</link>
            <guid>https://moonrepo.dev/blog/typescript-monorepo</guid>
            <pubDate>Mon, 21 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[A common question in the JavaScript ecosystem is how to integrate TypeScript in a monorepo. This is]]></description>
            <content:encoded><![CDATA[<p>A common question in the JavaScript ecosystem is how to integrate TypeScript in a monorepo. This is
a fair question, as there's no in-depth source of truth, or one perfect way of doing it. However, we
took it upon ourselves to answer this question!</p><p>Based on our experience scaling and managing frontend repositories in open source and large
companies like Airbnb and Coinbase, we're happy to
<a href="/docs/guides/javascript/typescript-project-refs">announce an in-depth guide on using TypeScript project references in a monorepo</a>!</p><p>We hope you find this guide useful, and if you have any questions, feel free to discuss them in our
<a href="https://discord.gg/qCh9MEynv2" target="_blank" rel="noopener noreferrer">Discord community</a>!</p>]]></content:encoded>
            <category>typescript</category>
            <category>monorepo</category>
        </item>
        <item>
            <title><![CDATA[moon v0.19 - Remote caching beta, affected files, and graph optimization]]></title>
            <link>https://moonrepo.dev/blog/v0.19</link>
            <guid>https://moonrepo.dev/blog/v0.19</guid>
            <pubDate>Mon, 14 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've focused heavily on our remote caching architecture. Since this is a massive]]></description>
            <content:encoded><![CDATA[<p>With this release, we've focused heavily on our remote caching architecture. Since this is a massive
task that requires much work behind the scenes, this overall release is rather light.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="remote-caching-beta">Remote caching beta<a href="#remote-caching-beta" class="hash-link" aria-label="Direct link to Remote caching beta" title="Direct link to Remote caching beta">​</a></h2><p>A major request for moon is to support remote caching. This is a critical feature that allows
artifacts to be shared across machines and environments, by storing them in a cloud storage
provider, like AWS S3.</p><p>We've been working on this feature for months, primarily behind the scenes building the necessary
services and tools, and we've finally reached a point where we could integrate it with moon
directly! However, since this feature is very complex, it's not yet available to the public, but
while you wait, you can sign up for beta access! Jump over to the
<a href="/docs/guides/remote-cache">official remote caching documentation for more information</a>!</p><p>We'll be working on remote caching through every release, continually polishing the implementation,
supporting new features, enabling new regions, calculating pricing, so on and so forth. So stay
tuned!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="affected-files-filtering">Affected files filtering<a href="#affected-files-filtering" class="hash-link" aria-label="Direct link to Affected files filtering" title="Direct link to Affected files filtering">​</a></h2><p>We've spent a good portion of this release working on affected detection for projects and tasks,
primarily through <code>--affected</code>, and have uncovered and fixed a handful of edge cases. With that
being said, we asked ourselves, "How could we improve the developer experience even more"? What
about passing the affected files list to the running task?</p><p>And that's exactly what we've done through the new task option
<a href="/docs/config/project#affectedfiles"><code>affectedFiles</code></a>! This option works in unison with the
<code>--affected</code> option, enabling some awesome functionality. Given the following config:</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">lint</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'eslint'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token key atrule">affectedFiles</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we run this task <em>without</em> <code>--affected</code>, it will append an argument for the current directory
(<code>.</code>). This will lint the entire project.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># moon run project:lint</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">eslint </span><span class="token builtin class-name" style="color:#ff94ff;font-weight:bold">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, when we run this task <em>with</em> <code>--affected</code>, and have have touched files in the working tree,
it will now append an argument for each file that matches the task's <code>inputs</code>. This will now only
lint the provided files, <em>instead</em> of the entire project.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># moon run project:lint --affected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">eslint ./file.ts ./another/file.ts</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This functionality is <em>perfect</em> pre-commit hooks, and as such, we've added a
<a href="/docs/guides/git-hooks">guide for utilizing this pattern with git hooks</a>!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="dependency-graph-optimizations">Dependency graph optimizations<a href="#dependency-graph-optimizations" class="hash-link" aria-label="Direct link to Dependency graph optimizations" title="Direct link to Dependency graph optimizations">​</a></h2><p>Our dependency graph determines which targets to run, what tools to install, projects to sync, and
in which order. It's a very complex directed acyclic graph, and has only gotten more complicated
over the year, especially with the introduction of project-level tool overrides.</p><p>We decided to rewrite the dependency graph from the ground up to mitigate many of these issues,
optimize nodes and edges, reduce the number of data cloning, and to increase the overall
performance. Everything will still work exactly the same (all of our existing tests passed with no
issue)!</p><p>On top of this, we've also migrated the internals of moon to a new hashing algorithm that should see
a 5-10% increase in performance!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.19.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Package managers in the toolchain are now installed in isolation, instead of through Node.js.</li><li>JSON files will now respect the closest <code>.editorconfig</code> file.</li><li>Webhook payloads now include information about the running CI/CD environment.</li><li>Generator can now merge JSON/YAML template files.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.20 release!</p><ul><li>Continuation of remote caching work!</li><li>Performance improvements for output hydration.</li><li>Toolchain improvements.</li></ul>]]></content:encoded>
            <category>affected</category>
            <category>remote-cache</category>
            <category>dep-graph</category>
        </item>
        <item>
            <title><![CDATA[moon v0.18 - Improved configuration and initialization flow]]></title>
            <link>https://moonrepo.dev/blog/v0.18</link>
            <guid>https://moonrepo.dev/blog/v0.18</guid>
            <pubDate>Mon, 31 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Happy Halloween 🎃 👻! With this spooky release, we've focused heavily on our internals and]]></description>
            <content:encoded><![CDATA[<p>Happy Halloween 🎃 👻! With this spooky release, we've focused heavily on our internals and
benchmarking performance metrics, so it's rather light on new features, but we still have some to
show!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-projects-configuration">Improved projects configuration<a href="#improved-projects-configuration" class="hash-link" aria-label="Direct link to Improved projects configuration" title="Direct link to Improved projects configuration">​</a></h2><p>When moon initially launched, it required defining all
<a href="/docs/config/workspace#projects"><code>projects</code></a> using a map. In v0.3, we added support for globs to
ease the burden of defining many projects. At this point, you had to choose between the 2 patterns,
which wasn't always ideal.</p><p>To improve upon this, you can now define a map <em>and</em> globs using a 3rd pattern, like so.</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">projects</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">globs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'apps/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'packages/*'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">sources</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">www</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'www'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-moon-init-flow">Improved <code>moon init</code> flow<a href="#improved-moon-init-flow" class="hash-link" aria-label="Direct link to improved-moon-init-flow" title="Direct link to improved-moon-init-flow">​</a></h2><p>The <code>moon init</code> command hasn't changed much since our v0.1 release, and with many new features and
configurations over these last 18 releases, the initialization flow has fallen quite behind. We felt
it was the perfect time to modernize this command a bit.</p><p>On top of automatically detecting settings from the environment, the command will also now prompt
you with additional questions while configuring Node.js or TypeScript. Here's an example of this
flow:</p><div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/init-flow-2a3ba1d56ee42c65dabf1f219d732e98.png" width="80%" alt="" class="inline-block"></div><p>Furthermore, the command also supports enabling a new tool (appending configuration to
<code>.moon/workspace.yml</code>) into an <em>existing</em> moon repository, by running <code>moon init --tool &lt;name&gt;</code>.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="customize-node-execution-arguments">Customize <code>node</code> execution arguments<a href="#customize-node-execution-arguments" class="hash-link" aria-label="Direct link to customize-node-execution-arguments" title="Direct link to customize-node-execution-arguments">​</a></h2><p>moon manages the Node.js binary in our toolchain, and runs all Node.js based tasks using this
binary, instead of relying on the binary found in the developer's environment. Because of this, how
<code>node</code> is executed is abstracted away from end users.</p><p>What if you wanted to use an <a href="https://nodejs.org/api/esm.html#loaders" target="_blank" rel="noopener noreferrer">experimental loader</a> and
execute TypeScript code at <em>runtime</em>? Or to preserve symlinks? Well, you couldn't... but no longer,
as we've added a new setting, <a href="/docs/config/toolchain#binexecargs"><code>node.binExecArgs</code></a>, that
allows additional <code>node</code> <a href="https://nodejs.org/api/cli.html#options" target="_blank" rel="noopener noreferrer">CLI arguments</a> to be defined,
that will be passed to <em>all</em> executions.</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">binExecArgs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'--loader'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@boost/module/loader'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Learn more about the
<a href="https://boostlib.dev/docs/module#ecmascript-module-loaders" target="_blank" rel="noopener noreferrer">Boost module loader</a>!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.18.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Default Node.js version has been updated to v18.12 (the new LTS) from v16.17.</li><li>Updated the <code>moon check</code> command to support an <code>--all</code> flag.</li><li>Improvements to how we store stdout/stderr logs for ran targets.</li><li>Work tree dirty checks when running migration commands.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.19 release!</p><ul><li>Laying the groundwork for <em>remote caching</em>!</li><li>An in-repo secrets management layer.</li><li>Performance and affected improvements.</li></ul>]]></content:encoded>
            <category>projects</category>
            <category>config</category>
            <category>init</category>
            <category>node</category>
        </item>
        <item>
            <title><![CDATA[moon v0.17 - Webhooks, extended YAML, and improved runtime performance]]></title>
            <link>https://moonrepo.dev/blog/v0.17</link>
            <guid>https://moonrepo.dev/blog/v0.17</guid>
            <pubDate>Fri, 21 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we're landing the first iteration of our notifier service, starting with]]></description>
            <content:encoded><![CDATA[<p>With this release, we're landing the first iteration of our notifier service, starting with
webhooks! We've also spent some time working on quality of life improvements.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes">​</a></h2><p>To start, we have a few breaking changes this release to be aware of!</p><h3 class="anchor anchorWithStickyNavbar_JmGV" id="minor-changes-to-id-formatting">Minor changes to ID formatting<a href="#minor-changes-to-id-formatting" class="hash-link" aria-label="Direct link to Minor changes to ID formatting" title="Direct link to Minor changes to ID formatting">​</a></h3><p>An ID refers to many things — project names, task names, target segments, so on and so forth. When
parsing these values, we format them to remove unwanted characters, as these IDs are used in many
contexts, many of which need to be strict.</p><p>Previously, we would remove unwanted characters entirely. Instead, we now replace them with dashes
(<code>-</code>) for better readability. Take the following for example:</p><table><thead><tr><th align="left">ID</th><th align="left">Old</th><th align="left">New</th></tr></thead><tbody><tr><td align="left">domain.com</td><td align="left">domaincom</td><td align="left">domain-com</td></tr><tr><td align="left">build:esm</td><td align="left">buildesm</td><td align="left">build-esm</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_JmGV" id="task-type-has-been-renamed-to-platform">Task <code>type</code> has been renamed to <code>platform</code><a href="#task-type-has-been-renamed-to-platform" class="hash-link" aria-label="Direct link to task-type-has-been-renamed-to-platform" title="Direct link to task-type-has-been-renamed-to-platform">​</a></h3><p>This setting was renamed for a few reasons. To start, tasks actually have a
<a href="/docs/concepts/task#types">type internally</a> that is not configured, but is inferred based on
what's configured. This was a bit confusing.</p><p>And secondly, our toolchain refers to language integrations as platforms, and since this setting
determines which tool to run with, we wanted to align on the platform terminology.</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Before</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">After</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">clean</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rm -rf ./dist'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'system'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">clean</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'rm -rf ./dist'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">platform</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'system'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><blockquote><p>Because of this change, the <code>$taskType</code> token was also renamed to <code>$taskPlatform</code>!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="webhook-events-experimental">Webhook events (experimental)<a href="#webhook-events-experimental" class="hash-link" aria-label="Direct link to Webhook events (experimental)" title="Direct link to Webhook events (experimental)">​</a></h2><p>Looking to gather metrics for your pipelines? Gain insight into run durations and failures? Maybe
you want to send Slack or Discord notifications? With our new notifier system, this is now possible
through webhooks!</p><p>Simply enable the <a href="/docs/config/workspace#webhookurl"><code>notifier.webhookUrl</code></a> setting to start
receiving events from your CI environments.</p><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">notifier</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">webhookUrl</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'https://api.company.com/some/endpoint'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>View the <a href="/docs/guides/webhooks">official guide on webhooks</a> for a full list of events and an
example payload structure!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="yaml-anchors-and-aliases">YAML anchors and aliases<a href="#yaml-anchors-and-aliases" class="hash-link" aria-label="Direct link to YAML anchors and aliases" title="Direct link to YAML anchors and aliases">​</a></h2><p>We've updated our YAML configuration files to support extended syntax,
<a href="https://support.atlassian.com/bitbucket-cloud/docs/yaml-anchors/" target="_blank" rel="noopener noreferrer">anchors (<code>&amp;</code>) and aliases (<code>*</code>)</a>.
With this new syntax, you're now able to reduce the amount of duplication required in your config
files, especially when declaring tasks, as demonstrated below!</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Before</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">After</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">astro</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro dev'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(astro)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(astro)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'dist'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">check</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro check'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(astro)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'~:typecheck'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">preview</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro preview'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(astro)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'~:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-yaml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yaml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">_astro</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token important">&amp;astro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">command</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'astro'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@group(astro)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token key atrule">tasks</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">dev</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token important">*astro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'dev'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">build</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token important">*astro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'dist'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">check</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token important">*astro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'check'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">preview</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token important">*astro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">args</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'preview'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">deps</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token punctuation" style="color:#cad4e2">-</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'~:build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">local</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#94dded">true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="vs-code-extension">VS Code extension<a href="#vs-code-extension" class="hash-link" aria-label="Direct link to VS Code extension" title="Direct link to VS Code extension">​</a></h2><p>If you missed the <a href="/blog/vscode-extension">announcement earlier this week</a>, we released the initial
version of our new VS Code extension! Give it a try and
<a href="/docs/editors/vscode">refer to the documentation</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.17.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Increased runtime performance and reduced memory consumption.</li><li>Template enum variables can now define objects for their
<a href="/docs/config/template#values"><code>values</code></a>.</li><li>Task <code>deps</code> can now omit the <code>~:</code> prefix for tasks within the current project.</li><li>The <code>moon check</code> command can now use the <code>--report</code> option.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.18 release!</p><ul><li>Workflow improvements for <code>moon init</code>.</li><li>Benchmarks and performance tuning.</li><li>Individual stdout/stderr log files when running tasks.</li></ul>]]></content:encoded>
            <category>notifier</category>
            <category>runner</category>
            <category>config</category>
            <category>editors</category>
            <category>vscode</category>
        </item>
        <item>
            <title><![CDATA[New VS Code extension!]]></title>
            <link>https://moonrepo.dev/blog/vscode-extension</link>
            <guid>https://moonrepo.dev/blog/vscode-extension</guid>
            <pubDate>Mon, 17 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[We're very excited to announce the initial release of our Visual Studio Code extension!]]></description>
            <content:encoded><![CDATA[<p>We're very excited to announce the initial release of our Visual Studio Code extension!</p><p>If you're a huge VS Code fan like us, you most likely use extensions in your everyday workflow. We
want to enhance this experience by providing a fully integrated and interactive moon console! Here's
a preview of what it looks like:</p><div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/projects-view-675ba8c24ec1896093663c29966b5e50.png" width="40%" alt="" class="inline-block"></div><p>Excited?? Want to learn more? Check out the official
<a href="https://marketplace.visualstudio.com/items?itemName=moonrepo.moon-console" target="_blank" rel="noopener noreferrer">moonrepo.moon-console</a>
marketplace page, or read the <a href="/docs/editors/vscode">official documentation</a>. This is only the
first iteration of the extension. Expect more advanced features in the future, like...</p><ul><li>Schema validation for configuration files</li><li>Autocompletion for configuration files</li><li>Automatic running/building of projects in the background</li><li>File type association</li><li>Integrated language server</li><li>And much more!</li></ul>]]></content:encoded>
            <category>editors</category>
            <category>vscode</category>
        </item>
        <item>
            <title><![CDATA[moon v0.16 - Per-project tool versions and TypeScript improvements]]></title>
            <link>https://moonrepo.dev/blog/v0.16</link>
            <guid>https://moonrepo.dev/blog/v0.16</guid>
            <pubDate>Thu, 06 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've landed a long standing request of supporting project-level overrides for]]></description>
            <content:encoded><![CDATA[<p>With this release, we've landed a long standing request of supporting project-level overrides for
tools configured in the workspace, as well as some quality of life improvements for TypeScript.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="per-project-tool-version-overrides">Per-project tool version overrides<a href="#per-project-tool-version-overrides" class="hash-link" aria-label="Direct link to Per-project tool version overrides" title="Direct link to Per-project tool version overrides">​</a></h2><p>Since moons inception, our <a href="/docs/concepts/toolchain">toolchain</a> has only supported a single
version of a tool (Node.js), as we wanted to embrace the single version policy and encourage all
consumers to keep their tooling version consistent across all projects for reliability. While this
works flawlessly, it's not entirely realistic, as many companies have legacy projects that are stuck
on older versions for whatever reason, and integrating them into moon was rather difficult.</p><p>Well no more! We've refactored our toolchain to support tool overrides on a project-by-project
basis. Since we only support Node.js at the moment, this can be achieved with the new
<a href="/docs/config/project#node"><code>workspace.node.version</code></a> setting in
<a href="/docs/config/project"><code>moon.yml</code></a>.</p><p>For example, if your workspace Node.js version is configured as v18.</p><div class="language-yml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">.moon/workspace.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'18.0.0'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now override this version at the project-level. Let's go with v14.</p><div class="language-yml codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/moon.yml</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-yml codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token key atrule">workspace</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token key atrule">node</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:#cad4e2">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'14.0.0'</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When running a task from a project with overrides, the toolchain will download, install, and
configure the new version behind the scenes. This new version will then be used to install
dependencies and execute the tasks commands.</p><blockquote><p>Although we now support overriding the tool version, the workspace configured package manager
(<code>node.packageManager</code>) and associated version cannot be overridden. This is unlikely to change.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="per-project-dependency-installs">Per-project dependency installs<a href="#per-project-dependency-installs" class="hash-link" aria-label="Direct link to Per-project dependency installs" title="Direct link to Per-project dependency installs">​</a></h2><p>Because of the toolchain refactor above, we now support per-project dependency installs as a welcome
side-effect. This is a necessary step in supporting new languages, especially for those that don't
install dependencies in the workspace for all projects, and must install them per project.</p><p>This also means that moon now supports non-<code>package.json</code> workspaces! If your repository <em>is not</em>
using npm/pnpm/yarn workspaces, or a project <em>is not</em> listed within the workspaces glob list,
dependencies will be installed within the project.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="typescript-improvements">TypeScript improvements<a href="#typescript-improvements" class="hash-link" aria-label="Direct link to TypeScript improvements" title="Direct link to TypeScript improvements">​</a></h2><h3 class="anchor anchorWithStickyNavbar_JmGV" id="routing-outdir-to-the-cache">Routing <code>outDir</code> to the cache<a href="#routing-outdir-to-the-cache" class="hash-link" aria-label="Direct link to routing-outdir-to-the-cache" title="Direct link to routing-outdir-to-the-cache">​</a></h3><p>A requirement for using project references is that each project must compile declarations (<code>.d.ts</code>)
so that consumers/dependents can resolve type information. While this makes sense, it becomes rather
unfortunate as each project folder is now littered with the declaration outputs, which are typically
gitignored.</p><p>To improve this experience, we're introducing a new setting
<a href="/docs/config/toolchain#routeoutdirtocache"><code>typescript.routeOutDirToCache</code></a>, that will update the
<code>outDir</code> compiler option of <em>all</em> projects to route to moon's cache directory (which should already
be gitignored). This will standardize the use of project references for the entire repository.</p><p>For example, a project at "packages/components" will route to the following output directory:</p><div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">"outDir"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../../.moon/cache/types/packages/components"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>If you require declarations to live within the project, for example an npm package that ships
types, you should introduce an additional configuration to handle this, like
<code>tsconfig.build.json</code>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_JmGV" id="mapping-project-references-as-paths">Mapping project references as <code>paths</code><a href="#mapping-project-references-as-paths" class="hash-link" aria-label="Direct link to mapping-project-references-as-paths" title="Direct link to mapping-project-references-as-paths">​</a></h3><p>moon automatically keeps TypeScript project references in sync with the
<a href="/docs/config/toolchain#syncprojectreferences"><code>typescript.syncProjectReferences</code></a> setting, which
is great, but we can take it further. With the new
<a href="/docs/config/toolchain#syncprojectreferencestopaths"><code>typescript.syncProjectReferencesToPaths</code></a>
setting, project references (either synced or explicitly defined) will <em>also</em> be mapped to the
<code>paths</code> compiler option, automating the list of import aliases.</p><p>For example, if a reference has the package name <code>@brand/components</code>, the <code>paths</code> will be mapped
with:</p><div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">&lt;project&gt;/tsconfig.json</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"compilerOptions"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token comment" style="color:#97a1af;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token property" style="color:#b7a9f9">"paths"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">"@brand/components"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"../shared/components/src/index.ts"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">"@brand/components/*"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token string" style="color:#c9e166">"../shared/components/src/*"</span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token punctuation" style="color:#cad4e2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token property" style="color:#b7a9f9">"references"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">      </span><span class="token property" style="color:#b7a9f9">"path"</span><span class="token operator" style="color:#b7a9f9">:</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">"../shared/components"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">  </span><span class="token punctuation" style="color:#cad4e2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token punctuation" style="color:#cad4e2">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.16.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Template files can now be suffixed with <code>.tera</code> or <code>.twig</code> for
<a href="/docs/guides/codegen#file-extensions">syntax highlighting</a>.</li><li>We now display more commands and information when running tasks.</li><li>Declare implicit task dependencies with a new
<a href="/docs/config/workspace#implicitdeps"><code>runner.implicitDeps</code></a> setting.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.17 release!</p><ul><li>Webhooks for important pipeline events (for real this time)!</li><li>YAML anchors and references in config files.</li><li>And <a href="https://github.com/moonrepo/moon/issues/356" target="_blank" rel="noopener noreferrer">many more</a>...</li></ul>]]></content:encoded>
            <category>toolchain</category>
            <category>runner</category>
            <category>generator</category>
            <category>typescript</category>
            <category>node</category>
        </item>
        <item>
            <title><![CDATA[moon v0.15 - Enhanced Docker support and 1,000 stars!]]></title>
            <link>https://moonrepo.dev/blog/v0.15</link>
            <guid>https://moonrepo.dev/blog/v0.15</guid>
            <pubDate>Mon, 26 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've focused heavily on Docker integration and enhancing the Dockerfile]]></description>
            <content:encoded><![CDATA[<p>With this release, we've focused heavily on Docker integration and enhancing the <code>Dockerfile</code>
workflow, as well as some minor quality of life improvements for template files and run reports.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="1000-️️">1,000 ⭐️🌟⭐️!<a href="#1000-️️" class="hash-link" aria-label="Direct link to 1,000 ⭐️🌟⭐️!" title="Direct link to 1,000 ⭐️🌟⭐️!">​</a></h2><p>Before we dive into the release, we want to thank everyone for the initial support, as we passed
<a href="https://github.com/moonrepo/moon" target="_blank" rel="noopener noreferrer">1,000 stars on GitHub</a> earlier this week! moon was announced back
in June, and to reach this milestone in roughly 3 months is very exciting. We greatly appreciate the
support, and to everyone that is using moon and providing feedback, we thank you from the bottom of
our hearts!</p><p>We have a very long roadmap ahead of us, but are very excited to bring all of these features to you,
and to improve the overall developer experience for your monorepos! Here's to 10,000 stars!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="first-class-docker-support">First-class Docker support<a href="#first-class-docker-support" class="hash-link" aria-label="Direct link to First-class Docker support" title="Direct link to First-class Docker support">​</a></h2><p><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a> is a very popular tool that is typically a part of a developers
workflow, but is also a very tedious one, as <code>Dockerfile</code>s have to be manually curated for every
project. We aim to mitigate this problem by supporting Docker as a first-class feature, and by
introducing 2 new commands, <a href="/docs/commands/docker/scaffold"><code>moon docker scaffold</code></a> and
<a href="/docs/commands/docker/prune"><code>moon docker prune</code></a>.</p><p>These commands will automate a <code>Dockerfile</code> as much as possible to effectively take advantage of
Docker's layer caching, multi-staged builds, to reduce the amount of manual <code>COPY</code> commands, to
reduce the overall size of the container or image, and much more. To demonstrate this, compare the
before and after <code>Dockerfile</code>s below!</p><div class="tabs-container tabList_J5MA"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_l0OV tabs__item--active">Before</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_l0OV">After</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_wHwb"><div class="language-docker codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-docker codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token instruction keyword" style="color:#b7a9f9">FROM</span><span class="token instruction"> node:latest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Install moon binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> npm install -g @moonrepo/cli</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy moon files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./.moon ./.moon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy all package.json's and lockfiles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/cli/package.json ./packages/cli/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-linux-arm64-gnu/package.json ./packages/core-linux-arm64-gnu/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-linux-arm64-musl/package.json ./packages/core-linux-arm64-musl/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-linux-x64-gnu/package.json ./packages/core-linux-x64-gnu/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-linux-x64-musl/package.json ./packages/core-linux-x64-musl/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-macos-arm64/package.json ./packages/core-macos-arm64/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-macos-x64/package.json ./packages/core-macos-x64/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/core-windows-x64-msvc/package.json ./packages/core-windows-x64-msvc/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/runtime/package.json ./packages/runtime/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/types/package.json ./packages/types/package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./package.json ./package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./yarn.lock ./yarn.lock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./.yarn ./.yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./.yarnrc.yml ./yarnrc.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Install toolchain and dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon setup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy project and required files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/types ./packages/types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> ./packages/runtime ./packages/runtime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># COPY . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Build the target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon run runtime:build</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_wHwb" hidden=""><div class="language-docker codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-docker codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic">#### BASE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">FROM</span><span class="token instruction"> node:latest </span><span class="token instruction keyword" style="color:#b7a9f9">AS</span><span class="token instruction"> base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Install moon binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> npm install -g @moonrepo/cli</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic">#### WORKSPACE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">FROM</span><span class="token instruction"> base </span><span class="token instruction keyword" style="color:#b7a9f9">AS</span><span class="token instruction"> workspace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy entire repository and scaffold</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> . .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon docker scaffold runtime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic">#### BUILD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">FROM</span><span class="token instruction"> base </span><span class="token instruction keyword" style="color:#b7a9f9">AS</span><span class="token instruction"> build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">WORKDIR</span><span class="token instruction"> /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy workspace skeleton</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#b7a9f9">--from</span><span class="token instruction options punctuation" style="color:#cad4e2">=</span><span class="token instruction options string" style="color:#c9e166">workspace</span><span class="token instruction"> /app/.moon/docker/workspace .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Install toolchain and dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon setup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Copy source files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#b7a9f9">--from</span><span class="token instruction options punctuation" style="color:#cad4e2">=</span><span class="token instruction options string" style="color:#c9e166">workspace</span><span class="token instruction"> /app/.moon/docker/sources .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Build the target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon run runtime:build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Prune workspace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token instruction keyword" style="color:#b7a9f9">RUN</span><span class="token instruction"> moon docker prune</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><blockquote><p>View the official <a href="/docs/guides/docker">Docker usage guide</a> for an in-depth walkthrough of all
these new features!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_JmGV" id="frontmatter-for-template-files">Frontmatter for template files<a href="#frontmatter-for-template-files" class="hash-link" aria-label="Direct link to Frontmatter for template files" title="Direct link to Frontmatter for template files">​</a></h2><p>We released <a href="/blog/v0.14">templates and the generator in v0.14</a> for quick and easy code generation.
Since it was the initial release, it provided the bare minimum of features for common workflows.
We'll continually improve this system over each release, and have done just that for this release,
as all template files now support <a href="/docs/guides/codegen#frontmatter">frontmatter</a>! Frontmatter is
a mechanism for declaring <em>per-file configuration</em>, and is denoted by <code>---</code> delimiters at the top of
the file.</p><p>This allows you to do some really cool stuff, like overriding the destination path of the file using
the <code>to</code> field, as well as taking full advantage of Tera's filters and conditional rendering!</p><div class="language-twig codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockTitle_x_ju">templates/react/components/base.tsx</div><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-twig codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">{%</span><span class="token twig language-twig"> </span><span class="token twig language-twig tag-name keyword" style="color:#b7a9f9">set</span><span class="token twig language-twig"> component_name </span><span class="token twig language-twig operator" style="color:#b7a9f9">=</span><span class="token twig language-twig"> name </span><span class="token twig language-twig operator" style="color:#b7a9f9">|</span><span class="token twig language-twig"> pascal_case </span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">%}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">---</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">to: components/</span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">{{</span><span class="token twig language-twig"> component_name </span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">}}</span><span class="token plain">.tsx</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">---</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">export function </span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">{{</span><span class="token twig language-twig"> component_name </span><span class="token twig language-twig delimiter punctuation" style="color:#cad4e2">}}</span><span class="token plain">() {</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">    return </span><span class="token tag punctuation" style="color:#cad4e2">&lt;</span><span class="token tag" style="color:#b7a9f9">div</span><span class="token tag" style="color:#b7a9f9"> </span><span class="token tag punctuation" style="color:#cad4e2">/&gt;</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.15.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>Run reports (via <code>--report</code>) now include additional information, like the total duration, and
estimated time savings.<ul><li>The <a href="https://github.com/marketplace/actions/moon-ci-run-reports" target="_blank" rel="noopener noreferrer">moonrepo/run-report-action</a> has
been updated with this information.</li></ul></li><li>Improved pnpm integration for Go/Rust binaries shipped in node modules.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.16 release!</p><ul><li>Quality of life improvements for TypeScript.</li><li>Per-project overrides for language/tool versions.</li></ul>]]></content:encoded>
            <category>generator</category>
            <category>docker</category>
        </item>
        <item>
            <title><![CDATA[moon v0.14 - Code generation and implicit dependencies]]></title>
            <link>https://moonrepo.dev/blog/v0.14</link>
            <guid>https://moonrepo.dev/blog/v0.14</guid>
            <pubDate>Tue, 13 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've landed some new features that have been requested multiple times since]]></description>
            <content:encoded><![CDATA[<p>With this release, we've landed some new features that have been requested multiple times since
launch. A code generation and template scaffolding layer, as well as implicit dependency scanning
for the project graph!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-moon-generate-command">New <code>moon generate</code> command<a href="#new-moon-generate-command" class="hash-link" aria-label="Direct link to new-moon-generate-command" title="Direct link to new-moon-generate-command">​</a></h2><p>Code generation is the staple of any large company or repository. Want to spin up a new application?
What about an npm package? Or maybe third-party integrations? Avoid copy-and-pasting existing code,
and instead generate it with the new <code>moon generate</code> command, which is powered by our new generator
system.</p><p>The generator will locate a template by name on the file system ("npm-package" in the example
below), prompt and interpolate variables, render the files with <a href="https://tera.netlify.app/" target="_blank" rel="noopener noreferrer">Tera</a> (a
Rust based template engine), and write the files to the target destination.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Generate code from a template to a target directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon generate npm-package ./packages/example</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Learn more about <a href="/docs/guides/codegen">code generation in the official guide</a>!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="implicit-dependency-scanning">Implicit dependency scanning<a href="#implicit-dependency-scanning" class="hash-link" aria-label="Direct link to Implicit dependency scanning" title="Direct link to Implicit dependency scanning">​</a></h2><p>This has been a request since moon's official release, and it's finally here! Up until now, if you
wanted project-to-project dependency relationships, you had to explicitly declare them with
<a href="/docs/config/project#dependson"><code>dependsOn</code></a>. But thanks to a
<a href="https://github.com/moonrepo/moon/pull/288" target="_blank" rel="noopener noreferrer">ton of</a>
<a href="https://github.com/moonrepo/moon/pull/249" target="_blank" rel="noopener noreferrer">infrastructure</a> and
<a href="https://github.com/moonrepo/moon/pull/277" target="_blank" rel="noopener noreferrer">platform</a> changes, we can now infer implicit
dependencies automatically!</p><p>We still suggest using explicit dependencies, as it provides more
<a href="/docs/concepts/project#dependencies">automation like project syncing</a>, but implicit is great for
adoption and migration purposes.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="report-ci-runs-on-pull-requests">Report CI runs on pull requests<a href="#report-ci-runs-on-pull-requests" class="hash-link" aria-label="Direct link to Report CI runs on pull requests" title="Direct link to Report CI runs on pull requests">​</a></h2><p>We're fans of continuous and easily accessible feedback, and as such, have released a new GitHub
action, <a href="https://github.com/marketplace/actions/moon-ci-run-reports" target="_blank" rel="noopener noreferrer"><code>moonrepo/run-report-action</code></a>,
which reports the results of <a href="/docs/commands/ci"><code>moon ci</code></a> as a pull request comment. The report
looks something like the following:</p><div style="margin-bottom:1rem;margin-top:1rem;text-align:center"><img src="/assets/images/run-report-41cffa17cd530ab8cca5cef47b38dcfd.png" width="60%" alt="" class="inline-block"></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.14.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>When running in a Docker container, caching is disabled in an effort to greatly reduce the size of
the image.</li><li>Updated <code>moon setup</code> to also install Node.js dependencies.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.15 release!</p><ul><li>Major Docker workflow improvements!</li><li>Frontmatter configuration within template files.</li></ul>]]></content:encoded>
            <category>generator</category>
            <category>project-graph</category>
            <category>ci</category>
        </item>
        <item>
            <title><![CDATA[moon v0.13 - Hashing and toolchain improvements]]></title>
            <link>https://moonrepo.dev/blog/v0.13</link>
            <guid>https://moonrepo.dev/blog/v0.13</guid>
            <pubDate>Thu, 01 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[With this release, we've landed some improvements to our smart hashing, and paved the road for]]></description>
            <content:encoded><![CDATA[<p>With this release, we've landed some improvements to our smart hashing, and paved the road for
additional languagues and tooling.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="nodejs-is-now-optional">Node.js is now optional<a href="#nodejs-is-now-optional" class="hash-link" aria-label="Direct link to Node.js is now optional" title="Direct link to Node.js is now optional">​</a></h2><p>Title may seem confusing at first, but don't worry, everything is fine! For some context, moon has
been designed to be language agnostic as we plan to support more than JavaScript in the future.
However, some aspects of the codebase were hard-coded for JavaScript and made the assumption that
JavaScript will always be used, with one such aspect being the
<a href="/docs/config/workspace#node"><code>node</code></a> setting in
<a href="/docs/config/workspace"><code>.moon/workspace.yml</code></a>.</p><p>We've reworked this setting to be optional, which allows a repository to opt out of JavaScript.
Right now, this basically does nothing as we do not support other languages yet, but we felt it
necessary to report it anyways! A side-effect of this change is that actions in the runner have been
renamed, for example, <code>SetupToolchain</code> -&gt; <code>SetupNodeToolchain</code>.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="improved-hashing-accuracy">Improved hashing accuracy<a href="#improved-hashing-accuracy" class="hash-link" aria-label="Direct link to Improved hashing accuracy" title="Direct link to Improved hashing accuracy">​</a></h2><p>Our <a href="/docs/concepts/cache#hashing">smart hashing layer</a> is pretty powerful, but was not entirely
accurate. Up until now, when hashing a Node.js project, we'd include the <code>dependencies</code>,
<code>devDependencies</code>, and <code>peerDependencies</code> versions located within the project's <code>package.json</code> as
hash inputs. This was great, because if a dependency was explicitly upgraded in the <code>package.json</code>,
it would invalidate the previous hashes as the version number changed.</p><p>However, what if the dependency was implicitly upgraded by another project, but the <code>package.json</code>
was not modified? These kind of transitive changes were currently ignored by moon, but no longer, as
moon will now resolve all <code>package.json</code> dependencies to the resolved version found in the root
lockfile (<code>package-lock.json</code>, <code>yarn.lock</code>, etc)!</p><p>At moon, we believe in providing consumers with the ability to configure to their needs, and as
such, have added a new <a href="/docs/config/workspace#hasher"><code>hasher</code></a> setting to
<a href="/docs/config/workspace"><code>.moon/workspace.yml</code></a>. This setting will allow you to choose between the
2 hashing patterns above!</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-moon-check-command">New <code>moon check</code> command<a href="#new-moon-check-command" class="hash-link" aria-label="Direct link to new-moon-check-command" title="Direct link to new-moon-check-command">​</a></h2><p>If you're like us, you're constantly testing, linting, typechecking, so on and so forth, a project
while developing. This was rather cumbersome, as you either had to use separate run commands
(<code>moon run project:test</code>, <code>moon run project:lint</code>, etc), or use the multi-run approach
(<code>moon run project:test project:lint</code>). Both approaches were not ideal for rapid development.</p><p>To simplify this process, we've added a new <a href="/docs/commands/check"><code>moon check</code></a> command, that
will automatically run <em>all</em> build and test tasks for a project (or many projects)! Local and non-CI
tasks will <em>not</em> be ran.</p><div class="language-shell codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-shell codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token comment" style="color:#97a1af;font-style:italic"># Check project at current working directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon check</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Check project by name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon check app</span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain"></span><span class="token comment" style="color:#97a1af;font-style:italic"># Check multiple projects by name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e5e9f1"><span class="token plain">$ moon check client server</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-moonrepotypes-package">New <code>@moonrepo/types</code> package<a href="#new-moonrepotypes-package" class="hash-link" aria-label="Direct link to new-moonrepotypes-package" title="Direct link to new-moonrepotypes-package">​</a></h2><p>We have many ideas for moon specific npm packages that we plan to release, but before we do that, we
need to ensure all of them are built with the correct interfaces. To solve this, we are shipping a
new package, <a href="https://www.npmjs.com/package/@moonrepo/types" target="_blank" rel="noopener noreferrer">@moonrepo/types</a>, that simply publishes
TypeScript declarations. It contains everything from project and task shapes, configuration
structures, runner information, and more.</p><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-background-color:#00080f;--prism-color:#e5e9f1"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#e5e9f1"><span class="token keyword" style="color:#b7a9f9">import</span><span class="token plain"> </span><span class="token keyword" style="color:#b7a9f9">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#cad4e2">{</span><span class="token plain"> ProjectConfig </span><span class="token punctuation" style="color:#cad4e2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#b7a9f9">from</span><span class="token plain"> </span><span class="token string" style="color:#c9e166">'@moonrepo/types'</span><span class="token punctuation" style="color:#cad4e2">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes">​</a></h2><p>View the
<a href="https://github.com/moonrepo/moon/releases/tag/%40moonrepo%2Fcli%400.13.0" target="_blank" rel="noopener noreferrer">official release</a> for a
full list of changes.</p><ul><li>The runner will now fail with an error if a task has defined <code>outputs</code> but an output was not
created after the task is executed. This change was made so that artifacts are deterministic.</li><li>The <code>actionRunner</code> setting in <a href="/docs/config/workspace"><code>.moon/workspace.yml</code></a> was renamed to
<code>runner</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="whats-next">What's next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What's next?" title="Direct link to What's next?">​</a></h2><p>Expect the following in the v0.14 release!</p><ul><li>A <code>moon generate</code> command to generate new projects, files, scaffolding, and more from pre-defined
templates.</li><li>Implicit dependency discovery. moon will now scan manifest files and determine project
relationships.</li></ul>]]></content:encoded>
            <category>hasher</category>
            <category>toolchain</category>
        </item>
    </channel>
</rss>