"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[287],{5318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},360:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var r=n(5773),o=n(808),a=(n(7378),n(5318)),i=["components"],l={title:"Targets"},c=void 0,s={unversionedId:"concepts/target",id:"concepts/target",title:"Targets",description:"A target is an identifier that pairs a project to one of its tasks, in the",source:"@site/docs/concepts/target.mdx",sourceDirName:"concepts",slug:"/concepts/target",permalink:"/docs/concepts/target",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/concepts/target.mdx",tags:[],version:"current",frontMatter:{title:"Targets"},sidebar:"docs",previous:{title:"Tasks",permalink:"/docs/concepts/task"},next:{title:"Tokens",permalink:"/docs/concepts/token"}},p={},u=[{value:"Project scopes",id:"project-scopes",level:2},{value:"All projects",id:"all-projects",level:3},{value:"Dependencies <code>^</code>",id:"dependencies-",level:3},{value:"Self <code>~</code>",id:"self-",level:3}],d={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"A target is an identifier that pairs a ",(0,a.kt)("a",{parentName:"p",href:"./project"},"project")," to one of its ",(0,a.kt)("a",{parentName:"p",href:"./task"},"tasks"),", in the\nformat of ",(0,a.kt)("inlineCode",{parentName:"p"},"project_id:task_id"),"."),(0,a.kt)("p",null,"Targets are used by terminal commands..."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ moon run designSystem:build\n")),(0,a.kt)("p",null,"And configurations for declaring cross-project or cross-task dependencies."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tasks:\n  build:\n    command: 'webpack'\n    deps:\n      - 'designSystem:build'\n")),(0,a.kt)("h2",{id:"project-scopes"},"Project scopes"),(0,a.kt)("p",null,"While a target typically pairs project and task IDs, we also support advanced targets through a\nconcept known as project scopes. Scopes allow us to easily define targets with external or many\nsources, but ",(0,a.kt)("em",{parentName:"p"},"are not available in all contexts"),"."),(0,a.kt)("h3",{id:"all-projects"},"All projects"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available on the command line when running targets.")),(0,a.kt)("p",null,"For situations where you want to run a specific target in ",(0,a.kt)("em",{parentName:"p"},"all")," projects, for example ",(0,a.kt)("inlineCode",{parentName:"p"},"lint"),"ing, you\ncan utilize the all projects scope by omitting the project from the target: ",(0,a.kt)("inlineCode",{parentName:"p"},":lint"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Run `lint` in project `app`\n$ moon run app:lint\n\n# Run `lint` in all projects\n$ moon run :lint\n")),(0,a.kt)("h3",{id:"dependencies-"},"Dependencies ",(0,a.kt)("inlineCode",{parentName:"h3"},"^")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available when configuring a task.")),(0,a.kt)("p",null,"When you want to run a task for each project in your ",(0,a.kt)("a",{parentName:"p",href:"../config/project#dependson"},(0,a.kt)("inlineCode",{parentName:"a"},"dependsOn")),"\nlist, you can utilize the ",(0,a.kt)("inlineCode",{parentName:"p"},"^")," scope. This will be expanded to ",(0,a.kt)("em",{parentName:"p"},"all")," depended on projects. If you do\nnot want all projects, then you'll need to explicitly define them using identifiers."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="project.yml"',title:'"project.yml"'},"dependsOn:\n    - 'apiClients'\n    - 'designSystem'\n\n# Configured as\ntasks:\n    build:\n        command: 'webpack'\n        deps:\n            - '^:build'\n\n# Resolves to\ntasks:\n    build:\n        command: 'webpack'\n        deps:\n            - 'apiClients:build'\n            - 'designSystem:build'\n")),(0,a.kt)("h3",{id:"self-"},"Self ",(0,a.kt)("inlineCode",{parentName:"h3"},"~")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available when configuring a task.")),(0,a.kt)("p",null,"When referring to another task within the current project, you can utilize the ",(0,a.kt)("inlineCode",{parentName:"p"},"~")," scope, which will\nbe expanded to the current project's identifier. This is useful for situations where the identifier\nis unknown, for example, when configuring ",(0,a.kt)("a",{parentName:"p",href:"../config/global-project"},(0,a.kt)("inlineCode",{parentName:"a"},".moon/project.yml")),". Or if you\njust want a shortcut!"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/project.yml"',title:'".moon/project.yml"'},"# Configured as\ntasks:\n    lint:\n        command: 'eslint'\n        deps:\n            - '~:typecheck'\n    typecheck:\n        command: 'tsc'\n\n# Resolves to (assuming project is \"foo\")\ntasks:\n    lint:\n        command: 'eslint'\n        deps:\n            - 'foo:typecheck'\n    typecheck:\n        command: 'tsc'\n")))}m.isMDXComponent=!0}}]);