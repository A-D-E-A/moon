"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[74824],{45543:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>h});var t=o(24246),i=o(71670),s=o(27915),l=o(79022);const r={title:"Configuration"},c=void 0,a={id:"proto/config",title:"Configuration",description:"We support configuration for both projects and users. Both config files are in",source:"@site/docs/proto/config.mdx",sourceDirName:"proto",slug:"/proto/config",permalink:"/docs/proto/config",draft:!1,unlisted:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/proto/config.mdx",tags:[],version:"current",frontMatter:{title:"Configuration"},sidebar:"proto",previous:{title:"Version detection",permalink:"/docs/proto/detection"},next:{title:"Supported tools",permalink:"/docs/proto/tools"}},d={},h=[{value:"Project configuration",id:"project-configuration",level:2},{value:"<code>[plugins]</code>",id:"plugins",level:3},{value:"User configuration",id:"user-configuration",level:2},{value:"<code>auto-install</code>",id:"auto-install",level:3},{value:"<code>auto-clean</code>",id:"auto-clean",level:3},{value:"<code>detect-strategy</code><VersionLabel></VersionLabel>",id:"detect-strategy",level:3},{value:"<code>node-intercept-globals</code>",id:"node-intercept-globals",level:3},{value:"<code>pin-latest</code><VersionLabel></VersionLabel>",id:"pin-latest",level:3},{value:"<code>[http]</code><VersionLabel></VersionLabel>",id:"http",level:3},{value:"<code>[plugins]</code>",id:"plugins-1",level:3},{value:"GitHub Action",id:"github-action",level:2}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{text:"1 min"}),"\n",(0,t.jsxs)(n.p,{children:["We support configuration for both projects and users. Both config files are in\n",(0,t.jsx)(n.a,{href:"https://toml.io/en/",children:"TOML"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"project-configuration",children:"Project configuration"}),"\n",(0,t.jsxs)(n.p,{children:["proto supports pinning versions of tools on a per-project or per-directory basis through our\n",(0,t.jsx)(n.code,{children:".prototools"})," configuration file. This file takes precedence during ",(0,t.jsx)(n.a,{href:"./detection",children:"version detection"}),"\nand can be created/updated with ",(0,t.jsx)(n.a,{href:"./commands/pin",children:(0,t.jsx)(n.code,{children:"proto pin"})}),"."]}),"\n",(0,t.jsx)(n.p,{children:"This configuration simply maps tools to versions for the current directory."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title=".prototools"',children:'node = "16.16.0"\nnpm = "9"\ngo = "1.20"\nrust = "1.68.0"\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"The names of tools are the same used on the command line!"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"plugins",children:(0,t.jsx)(n.code,{children:"[plugins]"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"./plugins",children:"Plugins"})," can also be configured with the ",(0,t.jsx)(n.code,{children:"[plugins]"})," section.\n",(0,t.jsx)(n.a,{href:"./plugins#enabling-plugins",children:"Learn more about this syntax"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title=".prototools"',children:'[plugins]\nmy-tool = "source:https://raw.githubusercontent.com/my/tool/master/proto-plugin.toml"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Once configured, you can run a plugin as if it was a built-in tool:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ proto install my-tool\n"})}),"\n",(0,t.jsx)(n.h2,{id:"user-configuration",children:"User configuration"}),"\n",(0,t.jsxs)(n.p,{children:["proto operates with sane defaults and accomplishes its goals very well. However, we also believe in\nuser choice and customization, and as such, support a user configuration file located at\n",(0,t.jsx)(n.code,{children:"~/.proto/config.toml"}),", which can be used to customize the behavior of proto."]}),"\n",(0,t.jsx)(n.p,{children:"Some of these settings (excluding plugins) can also be configured via environment variables."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"PROTO_AUTO_INSTALL=true proto run node\n"})}),"\n",(0,t.jsx)(n.h3,{id:"auto-install",children:(0,t.jsx)(n.code,{children:"auto-install"})}),"\n",(0,t.jsxs)(n.p,{children:["When enabled, will automatically installing missing tools when ",(0,t.jsx)(n.a,{href:"./commands/run",children:(0,t.jsx)(n.code,{children:"proto run"})})," is run,\ninstead of erroring. Defaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:"auto-install = true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"auto-clean",children:(0,t.jsx)(n.code,{children:"auto-clean"})}),"\n",(0,t.jsxs)(n.p,{children:["When enabled, will automatically clean up the proto cache when ",(0,t.jsx)(n.a,{href:"./commands/use",children:(0,t.jsx)(n.code,{children:"proto use"})})," is run.\nDefaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:"auto-clean = true\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"detect-strategy",children:[(0,t.jsx)(n.code,{children:"detect-strategy"}),(0,t.jsx)(l.Z,{version:"0.23.0"})]}),"\n",(0,t.jsxs)(n.p,{children:["The strategy to use when ",(0,t.jsx)(n.a,{href:"./detection",children:"detecting versions"}),". Defaults to ",(0,t.jsx)(n.code,{children:"first-available"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"first-available"})," - Will use the first available version that is found. Either from ",(0,t.jsx)(n.code,{children:".prototools"}),"\nor a tool specific file (",(0,t.jsx)(n.code,{children:".nvmrc"}),", etc)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"prefer-prototools"})," - Prefer a ",(0,t.jsx)(n.code,{children:".prototools"})," version, even if found in a parent directory. If none\nfound, falls back to tool specific file."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:'detect-strategy = "prefer-prototools"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"node-intercept-globals",children:(0,t.jsx)(n.code,{children:"node-intercept-globals"})}),"\n",(0,t.jsxs)(n.p,{children:["When enabled, will intercept global package installs for node/npm/pnpm/yarn and suggest using\n",(0,t.jsx)(n.a,{href:"./commands/install-global",children:(0,t.jsx)(n.code,{children:"proto install-global"})})," instead. Defaults to ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:"node-intercept-globals = false\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"pin-latest",children:[(0,t.jsx)(n.code,{children:"pin-latest"}),(0,t.jsx)(l.Z,{version:"0.19.0"})]}),"\n",(0,t.jsx)(n.p,{children:'When defined and a tool is installed with the "latest" version, will automatically pin the resolved\nversion to the configured location. Accepts the following locations:'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"global"})," - Pins globally to ",(0,t.jsx)(n.code,{children:"~/.proto/config.toml"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"local"})," - Pins locally to ",(0,t.jsx)(n.code,{children:".prototools"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:'pin-latest = "local"\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"http",children:[(0,t.jsx)(n.code,{children:"[http]"}),(0,t.jsx)(l.Z,{version:"0.18.0"})]}),"\n",(0,t.jsx)(n.p,{children:"Can be used to customize the HTTP client used by proto and warpgate, primarily for requesting files\nto download, available versions, and more. The following settings are available:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"allow-invalid-certs"})," - When enabled, will allow invalid certificates instead of failing. This is\nan ",(0,t.jsx)(n.em,{children:"escape hatch"})," and should only be used if other settings have failed. Be sure you know what\nyou're doing!"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"proxies"})," - A list of proxy URLs to use for requests."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"root-cert"})," - The path to a root certificate to use for requests. This is useful for overriding\nthe native certificate, or for using a self-signed certificate, especially when in a\ncorporate/internal environment. Supports ",(0,t.jsx)(n.code,{children:"pem"})," and ",(0,t.jsx)(n.code,{children:"der"})," files."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",metastring:'title="~/.proto/config.toml"',children:'[http]\nroot-cert = "/path/to/root/cert.pem"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"plugins-1",children:(0,t.jsx)(n.code,{children:"[plugins]"})}),"\n",(0,t.jsxs)(n.p,{children:["A mapping of plugins available to the user, and not just a project/directory. Refer to the\n",(0,t.jsx)(n.a,{href:"#plugins",children:(0,t.jsx)(n.code,{children:"[plugins]"})})," section above for more information."]}),"\n",(0,t.jsx)(n.h2,{id:"github-action",children:"GitHub Action"}),"\n",(0,t.jsxs)(n.p,{children:["To streamline GitHub CI workflows, we provide the\n",(0,t.jsx)(n.a,{href:"https://github.com/moonrepo/setup-proto",children:(0,t.jsx)(n.code,{children:"moonrepo/setup-proto"})})," action, which can be used to\ninstall ",(0,t.jsx)(n.code,{children:"proto"})," globally, and cache the toolchain found at ",(0,t.jsx)(n.code,{children:"~/.proto"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title=".github/workflows/ci.yml"',children:"# ...\njobs:\n  ci:\n    name: 'CI'\n    runs-on: 'ubuntu-latest'\n    steps:\n      - uses: 'actions/checkout@v4'\n      - uses: 'moonrepo/setup-proto@v1'\n      - run: 'proto use'\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},27915:(e,n,o)=>{o.d(n,{Z:()=>l});var t=o(83469),i=o(9619),s=o(24246);function l(e){let{text:n}=e;return(0,s.jsx)(i.Z,{text:n,icon:t.SZw,variant:"success",className:"absolute right-0 top-1.5"})}},79022:(e,n,o)=>{o.d(n,{Z:()=>s});var t=o(9619),i=o(24246);function s(e){let{header:n,inline:o,updated:s,version:l}=e;return(0,i.jsx)(t.Z,{text:`v${l}`,variant:s?"success":"info",className:n?"absolute right-0 top-1.5":o?"inline-block":"ml-2"})}},9619:(e,n,o)=>{o.d(n,{Z:()=>r});var t=o(40624),i=o(31792),s=o(24246);const l={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function r(e){let{className:n,icon:o,text:r,variant:c}=e;return(0,s.jsxs)("span",{className:(0,t.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",c?l[c]:"bg-gray-100 text-gray-800",n),children:[o&&(0,s.jsx)(i.Z,{icon:o,className:"mr-1"}),r]})}},71670:(e,n,o)=>{o.d(n,{Z:()=>r,a:()=>l});var t=o(27378);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);