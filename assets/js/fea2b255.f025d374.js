"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3287],{35318:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(27378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),c=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=a,k=m["".concat(i,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(k,l(l({ref:t},p),{},{components:n})):r.createElement(k,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<o;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},90360:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(25773),a=(n(27378),n(35318));const o={title:"Targets"},l=void 0,s={unversionedId:"concepts/target",id:"concepts/target",title:"Targets",description:"A target is an identifier that pairs a project to one of its tasks, in the",source:"@site/docs/concepts/target.mdx",sourceDirName:"concepts",slug:"/concepts/target",permalink:"/docs/concepts/target",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/concepts/target.mdx",tags:[],version:"current",frontMatter:{title:"Targets"},sidebar:"docs",previous:{title:"Projects",permalink:"/docs/concepts/project"},next:{title:"Tasks",permalink:"/docs/concepts/task"}},i={},c=[{value:"Project scopes",id:"project-scopes",level:2},{value:"All projects",id:"all-projects",level:3},{value:"Dependencies <code>^</code>",id:"dependencies-",level:3},{value:"Self <code>~</code>",id:"self-",level:3}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"A target is an identifier that pairs a ",(0,a.kt)("a",{parentName:"p",href:"./project"},"project")," to one of its ",(0,a.kt)("a",{parentName:"p",href:"./task"},"tasks"),", in the\nformat of ",(0,a.kt)("inlineCode",{parentName:"p"},"project_name_or_alias:task_name"),"."),(0,a.kt)("p",null,"Targets are used by terminal commands..."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ moon run designSystem:build\n")),(0,a.kt)("p",null,"And configurations for declaring cross-project or cross-task dependencies."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"tasks:\n  build:\n    command: 'webpack'\n    deps:\n      - 'designSystem:build'\n")),(0,a.kt)("h2",{id:"project-scopes"},"Project scopes"),(0,a.kt)("p",null,"While a target typically pairs project and task names, we also support advanced targets through a\nconcept known as project scopes. Scopes allow us to easily define targets with external or many\nsources, but ",(0,a.kt)("em",{parentName:"p"},"are not available in all contexts"),"."),(0,a.kt)("h3",{id:"all-projects"},"All projects"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available on the command line when running targets.")),(0,a.kt)("p",null,"For situations where you want to run a specific target in ",(0,a.kt)("em",{parentName:"p"},"all")," projects, for example ",(0,a.kt)("inlineCode",{parentName:"p"},"lint"),"ing, you\ncan utilize the all projects scope by omitting the project from the target: ",(0,a.kt)("inlineCode",{parentName:"p"},":lint"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Run `lint` in project `app`\n$ moon run app:lint\n\n# Run `lint` in all projects\n$ moon run :lint\n")),(0,a.kt)("h3",{id:"dependencies-"},"Dependencies ",(0,a.kt)("inlineCode",{parentName:"h3"},"^")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available when configuring a task.")),(0,a.kt)("p",null,"When you want to include a reference for each project ",(0,a.kt)("a",{parentName:"p",href:"./project#dependencies"},"that's depended on"),",\nyou can utilize the ",(0,a.kt)("inlineCode",{parentName:"p"},"^")," scope. This will be expanded to ",(0,a.kt)("em",{parentName:"p"},"all")," depended on projects. If you do not\nwant all projects, then you'll need to explicitly define them."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="moon.yml"',title:'"moon.yml"'},"dependsOn:\n    - 'apiClients'\n    - 'designSystem'\n\n# Configured as\ntasks:\n    build:\n        command: 'webpack'\n        deps:\n            - '^:build'\n\n# Resolves to\ntasks:\n    build:\n        command: 'webpack'\n        deps:\n            - 'apiClients:build'\n            - 'designSystem:build'\n")),(0,a.kt)("h3",{id:"self-"},"Self ",(0,a.kt)("inlineCode",{parentName:"h3"},"~")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only available when configuring a task.")),(0,a.kt)("p",null,"When referring to another task within the current project, you can utilize the ",(0,a.kt)("inlineCode",{parentName:"p"},"~")," scope, or emit\nthe ",(0,a.kt)("inlineCode",{parentName:"p"},"~:")," prefix altogether, which will be expanded to the current project's name. This is useful for\nsituations where the name is unknown, for example, when configuring\n",(0,a.kt)("a",{parentName:"p",href:"../config/tasks"},(0,a.kt)("inlineCode",{parentName:"a"},".moon/tasks.yml")),". Or if you just want a shortcut!"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/tasks.yml"',title:'".moon/tasks.yml"'},"# Configured as\ntasks:\n    lint:\n        command: 'eslint'\n        deps:\n            - '~:typecheck'\n            # OR\n            - 'typecheck'\n    typecheck:\n        command: 'tsc'\n\n# Resolves to (assuming project is \"foo\")\ntasks:\n    lint:\n        command: 'eslint'\n        deps:\n            - 'foo:typecheck'\n    typecheck:\n        command: 'tsc'\n")))}u.isMDXComponent=!0}}]);