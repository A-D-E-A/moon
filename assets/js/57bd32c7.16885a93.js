"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[911],{5318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,f=m["".concat(c,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(f,l(l({ref:t},p),{},{components:n})):r.createElement(f,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6243:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(7378),a=n(8944),o="tabItem_lLGn";function l(e){var t=e.children,n=e.hidden,l=e.className;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(o,l),hidden:n},t)}},637:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(5773),a=n(7378),o=n(6457),l=n(784),i=n(9947),c=n(3457),s=n(8944),p="tabList_lSCs",u="tabItem_WhCL";function m(e){var t,n,o,m=e.lazy,d=e.block,f=e.defaultValue,g=e.values,h=e.groupId,k=e.className,b=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=g?g:b.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),y=(0,l.l)(v,(function(e,t){return e.value===t.value}));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var j=null===f?f:null!=(t=null!=f?f:null==(n=b.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(o=b[0])?void 0:o.props.value;if(null!==j&&!v.some((function(e){return e.value===j})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+j+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,i.U)(),N=w.tabGroupChoices,x=w.setTabGroupChoices,E=(0,a.useState)(j),T=E[0],C=E[1],O=[],Z=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var I=N[h];null!=I&&I!==T&&v.some((function(e){return e.value===I}))&&C(I)}var P=function(e){var t=e.currentTarget,n=O.indexOf(t),r=v[n].value;r!==T&&(Z(t),C(r),null!=h&&x(h,r))},D=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=O.indexOf(e.currentTarget)+1;n=O[r]||O[0];break;case"ArrowLeft":var a=O.indexOf(e.currentTarget)-1;n=O[a]||O[O.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,s.Z)("tabs-container",p)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":d},k)},v.map((function(e){var t=e.value,n=e.label,o=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return O.push(e)},onKeyDown:D,onFocus:P,onClick:P},o,{className:(0,s.Z)("tabs__item",u,null==o?void 0:o.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),m?(0,a.cloneElement)(b.filter((function(e){return e.props.value===T}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},b.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function d(e){var t=(0,o.Z)();return a.createElement(m,(0,r.Z)({key:String(t)},e))}},7915:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(7378),a=n(5268),o=n(9619);function l(e){var t=e.text;return r.createElement(o.Z,{text:t,icon:a.SZw,variant:"success",className:"absolute right-0 top-1.5"})}},9634:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(7378),a=n(1884),o=n(5773),l=n(808),i=n(7765),c=n(5268),s=n(8896),p=["name"],u={discord:i.omb,github:i.zhw,"new-project":c.g6h,"new-task":c.EQ8,project:c.pL1,"project-config":c.dhu,"project-config-global":c.YdP,"project-graph":c.Bkj,"run-task":c.sl_,task:c.diR,"task-config":c.o$R,token:c.BwA,toolchain:c.AlB,twitter:i.mdU,workspace:c.emM,"workspace-config":c.cRF};function m(e){var t=e.name,n=(0,l.Z)(e,p);return r.createElement(s.Z,(0,o.Z)({},n,{icon:u[t]}))}function d(e){var t=e.links;return r.createElement("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},t.map((function(e){return r.createElement(a.Z,{key:e.url,href:e.url,className:"focus:outline-none"},r.createElement("div",{className:"relative rounded-lg px-3 py-3 flex items-center space-x-2 border-solid border border-t-0 border-b-2 bg-gray-50 hover:bg-gray-100/90 border-gray-200/75 dark:bg-slate-700 dark:hover:bg-slate-600 dark:border-slate-900/75"},r.createElement("div",{className:"flex-shrink-0"},r.createElement(m,{size:"lg",name:e.icon})),r.createElement("div",{className:"flex-1 min-w-0 text-gray-900 dark:text-gray-100"},e.label)))})))}},9619:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(7378),a=n(8944),o=n(8896),l={failure:"bg-red-100 text-red-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function i(e){var t=e.className,n=e.icon,i=e.text,c=e.variant;return r.createElement("span",{className:(0,a.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",c?l[c]:"bg-gray-100 text-gray-800",t)},n&&r.createElement(o.Z,{icon:n,className:"mr-1"}),i)}},6570:function(e,t,n){n.r(t),n.d(t,{assets:function(){return f},contentTitle:function(){return m},default:function(){return k},frontMatter:function(){return u},metadata:function(){return d},toc:function(){return g}});var r=n(5773),a=n(808),o=(n(7378),n(5318)),l=n(637),i=n(6243),c=n(7915),s=n(9634),p=["components"],u={title:"Create a project"},m=void 0,d={unversionedId:"create-project",id:"create-project",title:"Create a project",description:"With a workspace, we can now house one or many projects,",source:"@site/docs/create-project.mdx",sourceDirName:".",slug:"/create-project",permalink:"/docs/create-project",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/create-project.mdx",tags:[],version:"current",frontMatter:{title:"Create a project"},sidebar:"docs",previous:{title:"Setup workspace",permalink:"/docs/setup-workspace"},next:{title:"Create a task",permalink:"/docs/create-task"}},f={},g=[{value:"Declaring a project in the workspace",id:"declaring-a-project-in-the-workspace",level:2},{value:"Configuring a project",id:"configuring-a-project",level:2},{value:"Adding optional metadata",id:"adding-optional-metadata",level:3},{value:"Next steps",id:"next-steps",level:2}],h={toc:g};function k(e){var t=e.components,n=(0,a.Z)(e,p);return(0,o.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(c.Z,{text:"3 min",mdxType:"HeaderLabel"}),(0,o.kt)("p",null,"With a ",(0,o.kt)("a",{parentName:"p",href:"./setup-workspace"},"workspace"),", we can now house one or many ",(0,o.kt)("a",{parentName:"p",href:"./concepts/project"},"projects"),",\nwith a project being an application, library, or tool. In the end, each project will have its own\nbuild layer, personal tasks, and custom configuration."),(0,o.kt)("h2",{id:"declaring-a-project-in-the-workspace"},"Declaring a project in the workspace"),(0,o.kt)("p",null,"Although a project may exist in your repository, it's not accessible from moon until it's been\nmapped in the ",(0,o.kt)("a",{parentName:"p",href:"./config/workspace#projects"},(0,o.kt)("inlineCode",{parentName:"a"},"projects"))," setting found in\n",(0,o.kt)("a",{parentName:"p",href:"./config/workspace"},(0,o.kt)("inlineCode",{parentName:"a"},".moon/workspace.yml")),". When mapping a project, we require a unique identifier\nfor the project, and a project source location (path relative from the workspace root)."),(0,o.kt)("p",null,'Let\'s say we have a frontend web application called "client", and a backend Node.js application\ncalled "server", our ',(0,o.kt)("inlineCode",{parentName:"p"},"projects")," setting would look like the following."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/workspace.yml"',title:'".moon/workspace.yml"'},"projects:\n    client: 'apps/client'\n    server: 'apps/server'\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"For easier maintenance, we suggest alpha sorting the ",(0,o.kt)("inlineCode",{parentName:"p"},"projects")," map!")),(0,o.kt)("p",null,"We can now run ",(0,o.kt)("a",{parentName:"p",href:"./commands/project"},(0,o.kt)("inlineCode",{parentName:"a"},"moon project client"))," and\n",(0,o.kt)("a",{parentName:"p",href:"./commands/project"},(0,o.kt)("inlineCode",{parentName:"a"},"moon project server"))," to display information about each project. If these\nprojects were not mapped, or were pointing to an invalid source, the command would throw an error."),(0,o.kt)("h2",{id:"configuring-a-project"},"Configuring a project"),(0,o.kt)("p",null,"A project can be configured in 1 of 2 ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Through the ",(0,o.kt)("a",{parentName:"li",href:"./config/global-project"},(0,o.kt)("inlineCode",{parentName:"a"},".moon/project.yml"))," config file, which defines file groups\nand tasks that are inherited by ",(0,o.kt)("em",{parentName:"li"},"all")," projects within the workspace. Perfect for standardizing\ncommon tasks like linting, type-checking, and code formatting."),(0,o.kt)("li",{parentName:"ul"},"Through the ",(0,o.kt)("a",{parentName:"li",href:"./config/project"},(0,o.kt)("inlineCode",{parentName:"a"},"project.yml"))," config file, found at the root of each project,\nwhich defines files groups, tasks, dependencies, and more that are unique to that project.")),(0,o.kt)("p",null,"Both config files are optional, and can be used separately or together, the choice is yours!"),(0,o.kt)("p",null,"Now let's continue with our client and server example above. If we wanted to configure both\nprojects, and defined config that's also share between the 2, we could do something like the\nfollowing:"),(0,o.kt)(l.Z,{groupId:"project-config",defaultValue:"client",values:[{label:"Client",value:"client"},{label:"Server",value:"server"},{label:"Both (inherited)",value:"inherit"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"client",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="apps/client/project.yml"',title:'"apps/client/project.yml"'},"tasks:\n    build:\n        command: 'webpack'\n        args:\n            - 'build'\n            - '--mode'\n            - 'production'\n            - '--entry'\n            - 'src/index.tsx'\n            - '--output-path'\n            - 'build'\n        inputs:\n            - 'src/**/*'\n        outputs:\n            - 'build'\n"))),(0,o.kt)(i.Z,{value:"server",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="apps/server/project.yml"',title:'"apps/server/project.yml"'},"tasks:\n    build:\n        command: 'babel'\n        args:\n            - 'src'\n            - '--out-dir'\n            - 'build'\n        inputs:\n            - 'src/**/*'\n        outputs:\n            - 'build'\n"))),(0,o.kt)(i.Z,{value:"inherit",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".moon/project.yml"',title:'".moon/project.yml"'},"tasks:\n    format:\n        command: 'prettier'\n        args: '--write .'\n        inputs:\n            - 'src/**/*'\n    lint:\n        command: 'eslint'\n        args: '--no-error-on-unmatched-pattern .'\n        inputs:\n            - 'src/**/*'\n    test:\n        command: 'jest'\n        args: '--passWithNoTests .'\n        inputs:\n            - 'src/**/*'\n            - 'tests/**/*'\n    typecheck:\n        command: 'tsc'\n        args: '--build'\n        inputs:\n            - 'src/**/*'\n            - 'types/**/*'\n")))),(0,o.kt)("h3",{id:"adding-optional-metadata"},"Adding optional metadata"),(0,o.kt)("p",null,"When utilizing moon in a large monorepo or organization, ownership becomes very important. To combat\nthis problem, moon supports the ",(0,o.kt)("a",{parentName:"p",href:"./config/project#project"},(0,o.kt)("inlineCode",{parentName:"a"},"project"))," field within a project's\n",(0,o.kt)("a",{parentName:"p",href:"./config/project"},(0,o.kt)("inlineCode",{parentName:"a"},"project.yml"))," config."),(0,o.kt)("p",null,"This field is ",(0,o.kt)("em",{parentName:"p"},"optional")," by default, but when defined it provides metadata about the project,\nspecifically around team ownership, which developers maintain the project, where to discuss it, and\nmore!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="project.yml"',title:'"project.yml"'},"project:\n  type: 'tool'\n  name: 'moon'\n  description: 'A repo management tool.'\n  channel: '#moon'\n  owner: 'infra.platform'\n  maintainers: ['miles.johnson']\n")),(0,o.kt)("h2",{id:"next-steps"},"Next steps"),(0,o.kt)(s.Z,{links:[{icon:"new-task",label:"Create a task",url:"./create-task"},{icon:"workspace-config",label:(0,o.kt)("span",null,"Configure ",(0,o.kt)("code",null,".moon/workspace.yml")," further"),url:"./config/workspace"},{icon:"project-config-global",label:(0,o.kt)("span",null,"Configure ",(0,o.kt)("code",null,".moon/project.yml")," further"),url:"./config/global-project"},{icon:"project-config",label:(0,o.kt)("span",null,"Configure ",(0,o.kt)("code",null,"project.yml")," further"),url:"./config/project"},{icon:"project",label:"Learn about projects",url:"./concepts/project"}],mdxType:"NextSteps"}))}k.isMDXComponent=!0}}]);