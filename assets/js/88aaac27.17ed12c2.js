"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4138],{5318:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var o=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=o.createContext({}),p=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return o.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,g=u["".concat(i,".").concat(d)]||u[d]||c[d]||r;return n?o.createElement(g,l(l({ref:t},m),{},{components:n})):o.createElement(g,l({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var p=2;p<r;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4903:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(7378),a=n(8944),r=n(5484),l=n(9213);const s="admonition_uH4V",i="admonitionHeading_P5_N",p="admonitionIcon_MF44",m="admonitionContent_yySL";const c={note:{infimaClassName:"secondary",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:o.createElement(l.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 12 16"},o.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:o.createElement(l.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 12 16"},o.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:o.createElement(l.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:o.createElement(l.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return o.createElement("svg",{viewBox:"0 0 16 16"},o.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:o.createElement(l.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},u={secondary:"note",important:"info",success:"tip",warning:"danger"};function d(e){const{mdxAdmonitionTitle:t,rest:n}=function(e){const t=o.Children.toArray(e),n=t.find((e=>{var t;return o.isValidElement(e)&&"mdxAdmonitionTitle"===(null==(t=e.props)?void 0:t.mdxType)})),a=o.createElement(o.Fragment,null,t.filter((e=>e!==n)));return{mdxAdmonitionTitle:n,rest:a}}(e.children);return{...e,title:e.title??t,children:n}}function g(e){const{children:t,type:n,title:l,icon:g}=d(e),k=function(e){const t=u[e]??e;return c[t]||(console.warn(`No admonition config found for admonition type "${t}". Using Info as fallback.`),c.info)}(n),y=l??k.label,{iconComponent:f}=k,h=g??o.createElement(f,null);return o.createElement("div",{className:(0,a.Z)(r.k.common.admonition,r.k.common.admonitionType(e.type),"alert",`alert--${k.infimaClassName}`,s)},o.createElement("div",{className:i},o.createElement("span",{className:p},h),y),o.createElement("div",{className:m},t))}},7915:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(7378),a=n(3469),r=n(9619);function l(e){let{text:t}=e;return o.createElement(r.Z,{text:t,icon:a.SZw,variant:"success",className:"absolute right-0 top-1.5"})}},2921:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7378),a=n(4903),r=n(3828);const l={bun:"Buno",deno:"Deno",go:"Go",node:"Node.js",php:"PHP",python:"Python",ruby:"Ruby",rust:"Rust"};function s(e){let{children:t,noError:n}=e;const s=(0,r.gE)(),i=o.Children.toArray(t).find((e=>!!o.isValidElement(e)&&("string"==typeof e.key&&e.key.endsWith(s))));return i?o.createElement(o.Fragment,null,i):n?null:o.createElement(a.Z,{type:"danger"},"Sorry, there's no example for ",l[s]||s,". Try switching to another language for the time being!")}},3828:(e,t,n)=>{n.d(t,{ZP:()=>s,gE:()=>l});var o=n(7378);function a(){return"undefined"!=typeof window&&"localStorage"in window}function r(){return a()&&localStorage.getItem("moonrepo.language")||"node"}function l(){const[e,t]=(0,o.useState)(r());return(0,o.useEffect)((()=>{const e=e=>{t(e.detail)};return window.addEventListener("onMoonrepoChangeLanguage",e),()=>{window.removeEventListener("onMoonrepoChangeLanguage",e)}})),e}function s(){const[e,t]=(0,o.useState)(r()),n=(0,o.useCallback)((e=>{let{target:n}=e;const o=n.value;if(t(o),a())try{localStorage.setItem("moonrepo.language",o)}catch{}window.dispatchEvent(new CustomEvent("onMoonrepoChangeLanguage",{bubbles:!0,detail:o}))}),[]);return o.createElement("select",{value:e,onChange:n,className:"outline-none min-w-0 bg-white border border-solid border-gray-400 dark:border-transparent rounded-md p-0.5 text-sm text-gray-800 placeholder-gray-600 h-full font-sans"},o.createElement("option",{value:"go"},"Go"),o.createElement("option",{value:"node"},"Node.js"),o.createElement("option",{value:"php"},"PHP"),o.createElement("option",{value:"python"},"Python"),o.createElement("option",{value:"ruby"},"Ruby"),o.createElement("option",{value:"rust"},"Rust"))}},9634:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(7378),a=n(1884),r=n(5773),l=n(9928),s=n(3469),i=n(1792);const p={discord:l.omb,github:l.zhw,moon:s.Gp0,"new-project":s.g6h,"new-task":s.EQ8,project:s.pL1,"project-config":s.dhu,"project-config-global":s.YdP,"project-graph":s.Bkj,"run-task":s.sl_,task:s.diR,"task-config":s.o$R,token:s.BwA,toolchain:s.AlB,"toolchain-config":s.eDR,twitter:l.mdU,workspace:s.emM,"workspace-config":s.cRF};function m(e){let{name:t,...n}=e;return o.createElement(i.Z,(0,r.Z)({},n,{icon:p[t]}))}function c(e){let{links:t}=e;return o.createElement("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},t.map((e=>o.createElement(a.default,{key:e.url,href:e.url,className:"focus:outline-none"},o.createElement("div",{className:"relative rounded-lg px-3 py-3 flex items-center space-x-2 border-solid border border-t-0 border-b-2 bg-gray-50 hover:bg-gray-100/90 border-gray-200/75 dark:bg-slate-700 dark:hover:bg-slate-600 dark:border-slate-900/75"},o.createElement("div",{className:"flex-shrink-0"},o.createElement(m,{size:"lg",name:e.icon})),o.createElement("div",{className:"flex-1 min-w-0 text-gray-900 dark:text-gray-100"},e.label))))))}},9619:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7378),a=n(8944),r=n(1792);const l={failure:"bg-red-100 text-red-900",info:"bg-pink-100 text-pink-900",success:"bg-green-100 text-green-900",warning:"bg-orange-100 text-orange-900"};function s(e){let{className:t,icon:n,text:s,variant:i}=e;return o.createElement("span",{className:(0,a.Z)("inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase",i?l[i]:"bg-gray-100 text-gray-800",t)},n&&o.createElement(r.Z,{icon:n,className:"mr-1"}),s)}},5442:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>fe,contentTitle:()=>ke,default:()=>Ne,frontMatter:()=>ge,metadata:()=>ye,toc:()=>he});var o=n(5773),a=(n(7378),n(5318)),r=n(7915),l=n(9634),s=n(2921);const i={toc:[]};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'go'\n\ntasks:\n    build:\n        command: 'go build'\n")))}p.isMDXComponent=!0;const m={toc:[]};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'javascript'\n\ntasks:\n    build:\n        command: 'webpack build'\n")))}c.isMDXComponent=!0;const u={toc:[]};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'php'\n\ntasks:\n    build:\n        command: 'phar pack'\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"PHP doesn't have a concept of building like compiled languages, so these examples will reference\n",(0,a.kt)("a",{parentName:"p",href:"https://www.mankier.com/1/phar"},"PHAR creation")," using the command line.")))}d.isMDXComponent=!0;const g={toc:[]};function k(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'python'\n\ntasks:\n    build:\n        command: 'python'\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Python doesn't have a concept of building like compiled languages, so these examples will reference\n",(0,a.kt)("a",{parentName:"p",href:"https://packaging.python.org/en/latest/tutorials/packaging-projects/"},"project building"),".")))}k.isMDXComponent=!0;const y={toc:[]};function f(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'ruby'\n\ntasks:\n    build:\n        command: 'rake build'\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Ruby doesn't have a concept of building like compiled languages, so these examples are merely\ntheoretical.")))}f.isMDXComponent=!0;const h={toc:[]};function b(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {4,5}',title:'"<project>/moon.yml"',"{4,5}":!0},"language: 'rust'\n\ntasks:\n    build:\n        command: 'cargo build'\n")))}b.isMDXComponent=!0;const N={toc:[]};function j(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'go'\n\ntasks:\n    build:\n        command: 'go build -o build'\n")))}j.isMDXComponent=!0;const w={toc:[]};function x(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'javascript'\n\ntasks:\n    build:\n        command: 'webpack build --mode production --no-stats'\n")))}x.isMDXComponent=!0;const v={toc:[]};function C(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'php'\n\ntasks:\n    build:\n        command: 'phar pack -h sha256'\n")))}C.isMDXComponent=!0;const T={toc:[]};function M(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'python'\n\ntasks:\n    build:\n        command: 'python -m build'\n")))}M.isMDXComponent=!0;const D={toc:[]};function X(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},D,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'ruby'\n\ntasks:\n    build:\n        command: 'rake build --quiet'\n")))}X.isMDXComponent=!0;const E={toc:[]};function Z(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},E,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5}',title:'"<project>/moon.yml"',"{5}":!0},"language: 'rust'\n\ntasks:\n    build:\n        command: 'cargo build --release'\n")))}Z.isMDXComponent=!0;const L={toc:[]};function P(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},L,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'go'\n\ntasks:\n    build:\n        command: 'go build -o build'\n        inputs:\n            - 'src/**/*'\n            - 'go.mod'\n            - '/go.mod'\n")))}P.isMDXComponent=!0;const O={toc:[]};function R(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},O,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'javascript'\n\ntasks:\n    build:\n        command: 'webpack build --mode production --no-stats'\n        inputs:\n            - 'src/**/*'\n            - 'webpack.config.js'\n            - '/webpack-shared.config.js'\n")))}R.isMDXComponent=!0;const A={toc:[]};function B(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},A,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'php'\n\ntasks:\n    build:\n        command: 'phar pack -h sha256'\n        inputs:\n            - 'src/**/*'\n            - 'composer.json'\n            - '/composer.json'\n")))}B.isMDXComponent=!0;const G={toc:[]};function H(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},G,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'python'\n\ntasks:\n    build:\n        command: 'python -m build'\n        inputs:\n            - 'src/**/*'\n            - 'pyproject.toml'\n            - '/.python-version'\n")))}H.isMDXComponent=!0;const I={toc:[]};function z(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},I,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'ruby'\n\ntasks:\n    build:\n        command: 'rake build --quiet'\n        inputs:\n            - 'src/**/*'\n            - 'Rakefile'\n            - '/Gemfile'\n")))}z.isMDXComponent=!0;const F={toc:[]};function S(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},F,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {6-9}',title:'"<project>/moon.yml"',"{6-9}":!0},"language: 'rust'\n\ntasks:\n    build:\n        command: 'cargo build --release'\n        inputs:\n            - 'src/**/*'\n            - 'Cargo.toml'\n            - '/Cargo.toml'\n")))}S.isMDXComponent=!0;const q={toc:[]};function J(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},q,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5,10,11}',title:'"<project>/moon.yml"',"{5,10,11}":!0},"language: 'go'\n\ntasks:\n    build:\n        command: 'go build -o @out(0)'\n        inputs:\n            - 'src/**/*'\n            - 'go.mod'\n            - '/go.mod'\n        outputs:\n            - 'build' # Just an example!\n")))}J.isMDXComponent=!0;const V={toc:[]};function W(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},V,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {5,10,11}',title:'"<project>/moon.yml"',"{5,10,11}":!0},"language: 'javascript'\n\ntasks:\n    build:\n        command: 'webpack build --mode production --no-stats --output-path @out(0)'\n        inputs:\n            - 'src/**/*'\n            - 'webpack.config.js'\n            - '/webpack-shared.config.js'\n        outputs:\n            - 'build'\n")))}W.isMDXComponent=!0;const _={toc:[]};function U(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},_,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10,11}',title:'"<project>/moon.yml"',"{10,11}":!0},"language: 'php'\n\ntasks:\n    build:\n        command: 'phar pack -h sha256'\n        inputs:\n            - 'src/**/*'\n            - 'composer.json'\n            - '/composer.json'\n        outputs:\n            - 'file.phar' # Just an example!\n")))}U.isMDXComponent=!0;const $={toc:[]};function Q(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},$,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10,11}',title:'"<project>/moon.yml"',"{10,11}":!0},"language: 'python'\n\ntasks:\n    build:\n        command: 'python -m build'\n        inputs:\n            - 'src/**/*'\n            - 'pyproject.toml'\n            - '/.python-version'\n        outputs:\n            - 'dist'\n")))}Q.isMDXComponent=!0;const Y={toc:[]};function K(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},Y,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10,11}',title:'"<project>/moon.yml"',"{10,11}":!0},"language: 'ruby'\n\ntasks:\n    build:\n        command: 'rake build --quiet'\n        inputs:\n            - 'src/**/*'\n            - 'Rakefile'\n            - '/Gemfile'\n        outputs:\n            - 'build' # Just an example!\n")))}K.isMDXComponent=!0;const ee={toc:[]};function te(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},ee,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10,11}',title:'"<project>/moon.yml"',"{10,11}":!0},"language: 'rust'\n\ntasks:\n    build:\n        command: 'cargo build --release'\n        inputs:\n            - 'src/**/*'\n            - 'Cargo.toml'\n            - '/Cargo.toml'\n        outputs:\n            - 'target/release' # Just an example!\n")))}te.isMDXComponent=!0;const ne={toc:[]};function oe(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},ne,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {8,10}',title:'"<project>/moon.yml"',"{8,10}":!0},"language: 'go'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'go build -o @out(0)'\n        inputs:\n            - '@globs(sources)'\n            - 'go.mod'\n            - '/go.mod'\n        outputs:\n            - 'build' # Just an example!\n")))}oe.isMDXComponent=!0;const ae={toc:[]};function re(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},ae,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10}',title:'"<project>/moon.yml"',"{10}":!0},"language: 'javascript'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'webpack build --mode production --no-stats --output-path @out(0)'\n        inputs:\n            - '@globs(sources)'\n            - 'webpack.config.js'\n            - '/webpack-shared.config.js'\n        outputs:\n            - 'build'\n")))}re.isMDXComponent=!0;const le={toc:[]};function se(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},le,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10}',title:'"<project>/moon.yml"',"{10}":!0},"language: 'php'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'phar pack -h sha256'\n        inputs:\n            - '@globs(sources)'\n            - 'composer.json'\n            - '/composer.json'\n        outputs:\n            - 'file.phar' # Just an example!\n")))}se.isMDXComponent=!0;const ie={toc:[]};function pe(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},ie,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10}',title:'"<project>/moon.yml"',"{10}":!0},"language: 'python'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'python -m build'\n        inputs:\n            - '@globs(sources)'\n            - 'pyproject.toml'\n            - '/.python-version'\n        outputs:\n            - 'dist'\n")))}pe.isMDXComponent=!0;const me={toc:[]};function ce(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},me,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10}',title:'"<project>/moon.yml"',"{10}":!0},"language: 'ruby'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'rake build --quiet'\n        inputs:\n            - '@globs(sources)'\n            - 'Rakefile'\n            - '/Gemfile'\n        outputs:\n            - 'build' # Just an example!\n")))}ce.isMDXComponent=!0;const ue={toc:[]};function de(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},ue,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {10}',title:'"<project>/moon.yml"',"{10}":!0},"language: 'rust'\n\nfileGroups:\n    # ...\n\ntasks:\n    build:\n        command: 'cargo build --release'\n        inputs:\n            - '@globs(sources)'\n            - 'Cargo.toml'\n            - '/Cargo.toml'\n        outputs:\n            - 'target/release' # Just an example!\n")))}de.isMDXComponent=!0;const ge={title:"Create a task"},ke=void 0,ye={unversionedId:"create-task",id:"create-task",title:"Create a task",description:"The primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks",source:"@site/docs/create-task.mdx",sourceDirName:".",slug:"/create-task",permalink:"/docs/create-task",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/create-task.mdx",tags:[],version:"current",frontMatter:{title:"Create a task"},sidebar:"docs",previous:{title:"Create a project",permalink:"/docs/create-project"},next:{title:"Run a task",permalink:"/docs/run-task"}},fe={},he=[{value:"Configuring a task",id:"configuring-a-task",level:2},{value:"Inputs",id:"inputs",level:3},{value:"Outputs",id:"outputs",level:3},{value:"Depending on other tasks",id:"depending-on-other-tasks",level:2},{value:"Using file groups",id:"using-file-groups",level:2},{value:"Next steps",id:"next-steps",level:2}],be={toc:he};function Ne(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},be,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)(r.Z,{text:"6 min",mdxType:"HeaderLabel"}),(0,a.kt)("p",null,"The primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks\nto run. In moon, a task is a binary or system command that is ran as a child process within the\ncontext of a project (is the current working directory). Tasks are defined per project with\n",(0,a.kt)("a",{parentName:"p",href:"./config/project"},(0,a.kt)("inlineCode",{parentName:"a"},"moon.yml")),", or inherited by many projects with\n",(0,a.kt)("a",{parentName:"p",href:"./config/tasks"},(0,a.kt)("inlineCode",{parentName:"a"},".moon/tasks.yml")),", but can also be inferred from a language's ecosystem\n(",(0,a.kt)("a",{parentName:"p",href:"./migrate-to-moon"},"we'll talk about this later"),")."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Change the language dropdown at the top right to switch the examples!")),(0,a.kt)("h2",{id:"configuring-a-task"},"Configuring a task"),(0,a.kt)("p",null,"Most \u2014 if not all projects \u2014 utilize the same core tasks: linting, testing, code formatting,\ntypechecking, and ",(0,a.kt)("em",{parentName:"p"},"building"),". Because these are so universal, let's implement the build task within\na project using ",(0,a.kt)("a",{parentName:"p",href:"./config/project"},(0,a.kt)("inlineCode",{parentName:"a"},"moon.yml")),"."),(0,a.kt)("p",null,"Begin by creating the ",(0,a.kt)("inlineCode",{parentName:"p"},"moon.yml")," file at the root of a project and add ",(0,a.kt)("inlineCode",{parentName:"p"},"build")," to the\n",(0,a.kt)("a",{parentName:"p",href:"./config/project#tasks"},(0,a.kt)("inlineCode",{parentName:"a"},"tasks"))," field, with a ",(0,a.kt)("a",{parentName:"p",href:"./config/project#command"},(0,a.kt)("inlineCode",{parentName:"a"},"command"))," parameter."),(0,a.kt)(s.Z,{mdxType:"LangPartials"},(0,a.kt)(p,{key:"go",mdxType:"BaseGo"}),(0,a.kt)(c,{key:"node",mdxType:"BaseNode"}),(0,a.kt)(d,{key:"php",mdxType:"BasePHP"}),(0,a.kt)(k,{key:"python",mdxType:"BasePython"}),(0,a.kt)(f,{key:"ruby",mdxType:"BaseRuby"}),(0,a.kt)(b,{key:"rust",mdxType:"BaseRust"})),(0,a.kt)("p",null,"By itself, this isn't doing much, so let's add some arguments. Arguments can also be defined with\nthe ",(0,a.kt)("a",{parentName:"p",href:"./config/project#args"},(0,a.kt)("inlineCode",{parentName:"a"},"args"))," setting."),(0,a.kt)(s.Z,{mdxType:"LangPartials"},(0,a.kt)(j,{key:"go",mdxType:"ArgsGo"}),(0,a.kt)(x,{key:"node",mdxType:"ArgsNode"}),(0,a.kt)(C,{key:"php",mdxType:"ArgsPHP"}),(0,a.kt)(M,{key:"python",mdxType:"ArgsPython"}),(0,a.kt)(X,{key:"ruby",mdxType:"ArgsRuby"}),(0,a.kt)(Z,{key:"rust",mdxType:"ArgsRust"})),(0,a.kt)("p",null,"With this, the task can be ran from the command line with\n",(0,a.kt)("a",{parentName:"p",href:"./commands/run"},(0,a.kt)("inlineCode",{parentName:"a"},"moon run <project>:build")),"! This is tasks in its most simplest form, but continue\nreading on how to take full advantage of our task runner."),(0,a.kt)("h3",{id:"inputs"},"Inputs"),(0,a.kt)("p",null,"Our task above works, but isn't very efficient as it ",(0,a.kt)("em",{parentName:"p"},"always")," runs, regardless of what has changed\nsince the last time it has ran. This becomes problematic in continuous integration environments, not\njust locally."),(0,a.kt)("p",null,"To mitigate this problem, moon provides a system known as inputs, which are file paths, globs, and\nenvironment variables that are used by the task when it's ran. moon will use and compare these\ninputs to calculate whether to run, or to return the previous run state from the cache."),(0,a.kt)("p",null,"If you're a bit confused, let's demonstrate this by expanding the task with the\n",(0,a.kt)("a",{parentName:"p",href:"./config/project#inputs"},(0,a.kt)("inlineCode",{parentName:"a"},"inputs"))," setting."),(0,a.kt)(s.Z,{mdxType:"LangPartials"},(0,a.kt)(P,{key:"go",mdxType:"InputsGo"}),(0,a.kt)(R,{key:"node",mdxType:"InputsNode"}),(0,a.kt)(B,{key:"php",mdxType:"InputsPHP"}),(0,a.kt)(H,{key:"python",mdxType:"InputsPython"}),(0,a.kt)(z,{key:"ruby",mdxType:"InputsRuby"}),(0,a.kt)(S,{key:"rust",mdxType:"InputsRust"})),(0,a.kt)("p",null,"This list of inputs may look complicated, but they are merely run checks. For example, when moon\ndetects a change in..."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Any files within the ",(0,a.kt)("inlineCode",{parentName:"li"},"src")," folder, relative from the project's root."),(0,a.kt)("li",{parentName:"ul"},"A config file in the project's root."),(0,a.kt)("li",{parentName:"ul"},"A shared config file in the workspace root (denoted by the leading ",(0,a.kt)("inlineCode",{parentName:"li"},"/"),").")),(0,a.kt)("p",null,"...the task will be ran! If the change occurs ",(0,a.kt)("em",{parentName:"p"},"outside")," of the project or ",(0,a.kt)("em",{parentName:"p"},"outside")," the list of\ninputs, the task will ",(0,a.kt)("em",{parentName:"p"},"not")," be ran."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Inputs are a powerful feature that can be fine-tuned to your project's need. Be as granular or open\nas you want, the choice is yours!")),(0,a.kt)("h3",{id:"outputs"},"Outputs"),(0,a.kt)("p",null,"Outputs are the opposite of ",(0,a.kt)("a",{parentName:"p",href:"#inputs"},"inputs"),", as they are files and folders that are created as a\nresult of running the task. With that being said, outputs are ",(0,a.kt)("em",{parentName:"p"},"optional"),", as not all tasks require\nthem, and the ones that do are typically build related."),(0,a.kt)("p",null,"Now why is declaring outputs important? For incremental builds and smart caching! When moon\nencounters a build that has already been built, it hydrates all necessary outputs from the cache,\nthen immediately exits. No more waiting for long builds!"),(0,a.kt)("p",null,"Continuing our example, let's route the built files and expand our task with the\n",(0,a.kt)("a",{parentName:"p",href:"./config/project#outputs"},(0,a.kt)("inlineCode",{parentName:"a"},"outputs"))," setting."),(0,a.kt)(s.Z,{mdxType:"LangPartials"},(0,a.kt)(J,{key:"go",mdxType:"OutputsGo"}),(0,a.kt)(W,{key:"node",mdxType:"OutputsNode"}),(0,a.kt)(U,{key:"php",mdxType:"OutputsPHP"}),(0,a.kt)(Q,{key:"python",mdxType:"OutputsPython"}),(0,a.kt)(K,{key:"ruby",mdxType:"OutputsRuby"}),(0,a.kt)(te,{key:"rust",mdxType:"OutputsRust"})),(0,a.kt)("h2",{id:"depending-on-other-tasks"},"Depending on other tasks"),(0,a.kt)("p",null,"For scenarios where you need run a task ",(0,a.kt)("em",{parentName:"p"},"before")," another task, as you're expecting some repository\nstate or artifact to exist, can be achieved with the ",(0,a.kt)("a",{parentName:"p",href:"./config/project#deps"},(0,a.kt)("inlineCode",{parentName:"a"},"deps"))," setting, which\nrequires a list of ",(0,a.kt)("a",{parentName:"p",href:"./concepts/target"},"targets"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"<project>:<task>")," - Full canonical target."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"~:<task>")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"<task>")," - A task within the current project."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"^:<task>")," - A task from all ",(0,a.kt)("a",{parentName:"li",href:"./concepts/project#dependencies"},"depended on projects"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml" {1,7,8}',title:'"<project>/moon.yml"',"{1,7,8}":!0},"dependsOn:\n    # ...\n\ntasks:\n    build:\n        # ...\n        deps:\n            - '^:build'\n")),(0,a.kt)("h2",{id:"using-file-groups"},"Using file groups"),(0,a.kt)("p",null,"Once you're familiar with configuring tasks, you may notice certain inputs being repeated\nconstantly, like source files, test files, and configuration. To reduce the amount of boilerplate\nrequired, moon provides a feature known as ",(0,a.kt)("a",{parentName:"p",href:"./concepts/file-group"},"file groups"),", which enables\ngrouping of similar file types within a project using\n",(0,a.kt)("a",{parentName:"p",href:"./concepts/file-pattern"},"file glob patterns or literal file paths"),"."),(0,a.kt)("p",null,"File groups are defined with the ",(0,a.kt)("a",{parentName:"p",href:"./config/project#filegroups"},(0,a.kt)("inlineCode",{parentName:"a"},"fileGroups"))," setting, which maps a\nlist of file paths/globs to a group, like so."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml"',title:'"<project>/moon.yml"'},"fileGroups:\n    configs:\n        - '*.config.js'\n    sources:\n        - 'src/**/*'\n        - 'types/**/*'\n    tests:\n        - 'tests/**/*'\n")),(0,a.kt)("p",null,"We can then replace the inputs in our task above with these new file groups using a syntax known as\n",(0,a.kt)("a",{parentName:"p",href:"./concepts/token"},"tokens"),", specifically the ",(0,a.kt)("a",{parentName:"p",href:"./concepts/token#globs"},(0,a.kt)("inlineCode",{parentName:"a"},"@globs"))," and\n",(0,a.kt)("a",{parentName:"p",href:"./concepts/token#files"},(0,a.kt)("inlineCode",{parentName:"a"},"@files"))," token functions. Tokens are an advanced feature, so please refer\nto their documentation for more information!"),(0,a.kt)(s.Z,{mdxType:"LangPartials"},(0,a.kt)(oe,{key:"go",mdxType:"FilegroupsGo"}),(0,a.kt)(re,{key:"node",mdxType:"FilegroupsNode"}),(0,a.kt)(se,{key:"php",mdxType:"FilegroupsPHP"}),(0,a.kt)(pe,{key:"python",mdxType:"FilegroupsPython"}),(0,a.kt)(ce,{key:"ruby",mdxType:"FilegroupsRuby"}),(0,a.kt)(de,{key:"rust",mdxType:"FilegroupsRust"})),(0,a.kt)("p",null,"With file groups (and tokens), you're able to reduce the amount of configuration required ",(0,a.kt)("em",{parentName:"p"},"and"),"\nencourage certain file structures for consuming projects!"),(0,a.kt)("h2",{id:"next-steps"},"Next steps"),(0,a.kt)(l.Z,{links:[{icon:"run-task",label:"Run a task",url:"./run-task"},{icon:"project-config-global",label:(0,a.kt)("span",null,"Configure ",(0,a.kt)("code",null,".moon/tasks.yml")," further"),url:"./config/tasks"},{icon:"project-config",label:(0,a.kt)("span",null,"Configure ",(0,a.kt)("code",null,"moon.yml")," further"),url:"./config/project"},{icon:"task",label:"Learn about tasks",url:"./concepts/task"},{icon:"token",label:"Learn about tokens",url:"./concepts/token"}],mdxType:"NextSteps"}))}Ne.isMDXComponent=!0}}]);