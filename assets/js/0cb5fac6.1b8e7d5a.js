"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1719],{9798:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(7378),a=o(8944);const r="tabItem_wHwb";function s(e){let{children:t,hidden:o,className:s}=e;return n.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,s),hidden:o},t)}},3337:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(5773),a=o(7378),r=o(8944),s=o(6457),l=o(784),i=o(9947),u=o(3457);const p="tabList_J5MA",c="tabItem_l0OV";function d(e){var t;const{lazy:o,block:s,defaultValue:d,values:m,groupId:k,className:b}=e,g=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),y=m??g.map((e=>{let{props:{value:t,label:o,attributes:n}}=e;return{value:t,label:o,attributes:n}})),h=(0,l.l)(y,((e,t)=>e.value===t.value));if(h.length>0)throw new Error(`Docusaurus error: Duplicate values "${h.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===d?d:d??(null==(t=g.find((e=>e.props.default)))?void 0:t.props.value)??g[0].props.value;if(null!==v&&!y.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${y.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:f,setTabGroupChoices:w}=(0,i.U)(),[N,x]=(0,a.useState)(v),j=[],{blockElementScrollPositionUntilNextRender:S}=(0,u.o5)();if(null!=k){const e=f[k];null!=e&&e!==N&&y.some((t=>t.value===e))&&x(e)}const E=e=>{const t=e.currentTarget,o=j.indexOf(t),n=y[o].value;n!==N&&(S(t),x(n),null!=k&&w(k,String(n)))},T=e=>{var t;let o=null;switch(e.key){case"Enter":E(e);break;case"ArrowRight":{const t=j.indexOf(e.currentTarget)+1;o=j[t]??j[0];break}case"ArrowLeft":{const t=j.indexOf(e.currentTarget)-1;o=j[t]??j[j.length-1];break}}null==(t=o)||t.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",p)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":s},b)},y.map((e=>{let{value:t,label:o,attributes:s}=e;return a.createElement("li",(0,n.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>j.push(e),onKeyDown:T,onClick:E},s,{className:(0,r.Z)("tabs__item",c,null==s?void 0:s.className,{"tabs__item--active":N===t})}),o??t)}))),o?(0,a.cloneElement)(g.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,s.Z)();return a.createElement(d,(0,n.Z)({key:String(t)},e))}},6642:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(7378),a=o(4267),r=o(9798),s=o(3337);function l(e,t,o){let n=e.package?`yarn workspace ${e.package} add `:"yarn add ";return e.dev?n+="--dev ":e.peer&&(n+="--peer "),o&&t&&!e.package&&(n+="-W "),n+=e.dep,n}function i(e,t){let o="pnpm add ";return e.dev?o+="--save-dev ":e.peer&&(o+="--save-peer "),e.package?o+=`--filter ${e.package} `:t&&(o+="-w "),o+=e.dep,o}function u(e){let t=l(e,!1,!0),o=i(e,!1);return e.package||(t+="\n\n# If using workspaces\n",o+="\n\n# If using workspaces\n",t+=l(e,!0,!0),o+=i(e,!0)),n.createElement(s.Z,{groupId:"package-manager",defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"Yarn (classic)",value:"yarn1"},{label:"npm",value:"npm"},{label:"pnpm",value:"pnpm"}]},n.createElement(r.Z,{value:"yarn"},n.createElement(a.Z,{language:"shell"},l(e,!1,!1))),n.createElement(r.Z,{value:"yarn1"},n.createElement(a.Z,{language:"shell"},t)),n.createElement(r.Z,{value:"npm"},n.createElement(a.Z,{language:"shell"},function(e){let t="npm install ";return e.dev?t+="--save-dev ":e.peer&&(t+="--save-peer "),e.package&&(t+=`--workspace ${e.package} `),t+=e.dep,t}(e))),n.createElement(r.Z,{value:"pnpm"},n.createElement(a.Z,{language:"shell"},o)))}},1911:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var n=o(5773),a=(o(7378),o(5318));o(6642);const r={title:"Storybook example",sidebar_label:"Storybook"},s=void 0,l={unversionedId:"guides/examples/storybook",id:"guides/examples/storybook",title:"Storybook example",description:"Storybook is a frontend workshop for building UI components and pages in isolation. Thousands of teams use it for UI development, testing, and documentation. It\u2019s open source and free.",source:"@site/docs/guides/examples/storybook.mdx",sourceDirName:"guides/examples",slug:"/guides/examples/storybook",permalink:"/docs/guides/examples/storybook",draft:!1,editUrl:"https://github.com/moonrepo/moon/tree/master/website/docs/guides/examples/storybook.mdx",tags:[],version:"current",frontMatter:{title:"Storybook example",sidebar_label:"Storybook"},sidebar:"guides",previous:{title:"Solid",permalink:"/docs/guides/examples/solid"},next:{title:"TypeScript",permalink:"/docs/guides/examples/typescript"}},i={},u=[{value:"Setup",id:"setup",level:2},{value:"Vite integration",id:"vite-integration",level:3},{value:"Webpack integration",id:"webpack-integration",level:3},{value:"Jest integration",id:"jest-integration",level:3}],p={toc:u};function c(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Storybook is a frontend workshop for building UI components and pages in isolation. Thousands of teams use it for UI development, testing, and documentation. It\u2019s open source and free."),(0,a.kt)("p",null,"Storybook v7 is typically coupled with ",(0,a.kt)("a",{parentName:"p",href:"https://vitejs.dev/"},"Vite"),". To scaffold a new Storybook project with Vite, run the following command in a project root. This guide assumes you are using React, however it is possible to use almost any (meta) framework with Storybook."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npx storybook init\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"We highly suggest reading our documentation on ",(0,a.kt)("a",{parentName:"p",href:"./vite"},"using Vite (and Vitest) with moon"),"\nand ",(0,a.kt)("a",{parentName:"p",href:"./jest"},"using Jest with moon")," for a more holistic view.")),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("p",null,"This section assumes Storybook is being used with Vite."),(0,a.kt)("p",null,"After setting up your Storybook, ensure your ",(0,a.kt)("inlineCode",{parentName:"p"},"<project>/moon.yml")," has the following scripts:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml"',title:'"<project>/moon.yml"'},'tasks:\n    storybook:\n        local: true\n        command: "storybook dev"\n        inputs:\n            - "@globs(sources)"\n            - "@globs(tests)"\n            - ".storybook/**/*"\n')),(0,a.kt)("p",null,"To run your Storybook dev server:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"moon run <project>:storybook\n")),(0,a.kt)("h3",{id:"vite-integration"},"Vite integration"),(0,a.kt)("p",null,"Storybook 7 uses Vite out of the box, as such no configuration is required but should you choose to extend the Vite config, you can do so by passing in ",(0,a.kt)("inlineCode",{parentName:"p"},"viteFinal"),": "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title=".storybook/main.ts"',title:'".storybook/main.ts"'},"// .storybook/main.js|cjs|ts\n\nimport { mergeConfig } from 'vite';\n\nexport default {\n  stories: ['../stories/**/*.stories.mdx', '../stories/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: ['@storybook/addon-links', '@storybook/addon-essentials'],\n  core: {\n    builder: '@storybook/builder-vite',\n  },\n  async viteFinal(config) {\n    // Merge custom configuration into the default config\n    return mergeConfig(config, {\n      // Use the same \"resolve\" configuration as your app\n      resolve: (await import('../vite.config.js')).default.resolve,\n      // Add dependencies to pre-optimization\n      optimizeDeps: {\n        include: ['storybook-dark-mode'],\n      },\n    });\n  },\n};\n")),(0,a.kt)("p",null,"For more information on how to integrate Vite with Storybook see the ",(0,a.kt)("a",{parentName:"p",href:"https://storybook.js.org/docs/7.0/react/builders/vite#configuration"},"relevant docs"),"."),(0,a.kt)("h3",{id:"webpack-integration"},"Webpack integration"),(0,a.kt)("p",null,"If you opt to use Webpack with your Storybook project, you can do so by passing it in the config:"),(0,a.kt)("p",null,"Be sure to install the relevant packages:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npm install --save-dev @storybook/builder-webpack5\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title=".storybook/main.ts"',title:'".storybook/main.ts"'},"// .storybook/main.js|cjs|ts\n\nexport default {\n  core: {\n    builder: '@storybook/builder-webpack5',\n  },\n};\n")),(0,a.kt)("p",null,"For more information on how to integrate Webpack with Storybook see the ",(0,a.kt)("a",{parentName:"p",href:"https://storybook.js.org/docs/7.0/react/builders/webpack"},"relevant docs"),"."),(0,a.kt)("h3",{id:"jest-integration"},"Jest integration"),(0,a.kt)("p",null,"You can use Jest to test your stories, but isn't a requirement. Storybook ships with first party plugins for improved DX"),(0,a.kt)("p",null,"Install the test runner and any relevant packages"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npm install --save-dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n")),(0,a.kt)("p",null,"Add the test task to your Moon project"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="<project>/moon.yml"',title:'"<project>/moon.yml"'},'tasks:\n    test:\n        command: "test-storybook"\n        inputs:\n            - "@globs(sources)"\n            - "@globs(tests)"\n            - ".storybook/**/*"\n')),(0,a.kt)("p",null,"Then you need to enable plugins and interactions in your Storybook project:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title=".storybook/main.ts"',title:'".storybook/main.ts"'},"// .storybook/main.js|ts\n\nexport default {\n  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: [\n    // Other Storybook addons\n    '@storybook/addon-interactions', // Addon is registered here\n    '@storybook/addon-coverage',\n  ],\n  features: {\n    interactionsDebugger: true, // Enable playback controls\n  },\n};\n")),(0,a.kt)("p",null,"To test your Storybook project"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"moon run <project>:test\n")),(0,a.kt)("p",null,"And start writing your tests, for an extended guide on how to write tests within your Stories see ",(0,a.kt)("a",{parentName:"p",href:"https://storybook.js.org/docs/react/writing-tests/interaction-testing#write-an-interaction-test"},"writing an interaction test")," on the Storybook docs."))}c.isMDXComponent=!0}}]);