"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[45750],{35318:(e,t,o)=>{o.d(t,{Zo:()=>m,kt:()=>u});var n=o(27378);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=s(o),u=r,g=c["".concat(p,".").concat(u)]||c[u]||d[u]||a;return o?n.createElement(g,i(i({ref:t},m),{},{components:o})):n.createElement(g,i({ref:t},m))}));function u(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=o[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}c.displayName="MDXCreateElement"},3842:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=o(25773),r=(o(27378),o(35318));const a={slug:"proto-v0.23",title:"proto v0.23 - New detection strategy, tool commands, and more",authors:["milesj"],tags:["proto"],image:"./img/proto/v0.23.png"},i=void 0,l={permalink:"/blog/proto-v0.23",editUrl:"https://github.com/moonrepo/moon/tree/master/website/blog/2023-11-16_proto-v0.23.mdx",source:"@site/blog/2023-11-16_proto-v0.23.mdx",title:"proto v0.23 - New detection strategy, tool commands, and more",description:"With this release, we've reorganized our commands, improved version detection, and Windows support.",date:"2023-11-16T00:00:00.000Z",formattedDate:"November 16, 2023",tags:[{label:"proto",permalink:"/blog/tags/proto"}],readingTime:1.86,hasTruncateMarker:!0,authors:[{name:"Miles Johnson",title:"Founder, developer",url:"https://github.com/milesj",imageURL:"/img/authors/miles.jpg",key:"milesj"}],frontMatter:{slug:"proto-v0.23",title:"proto v0.23 - New detection strategy, tool commands, and more",authors:["milesj"],tags:["proto"],image:"./img/proto/v0.23.png"},nextItem:{title:"moon v1.16 - Bun support, Rust improvements, and more!",permalink:"/blog/moon-v1.16"}},p={image:o(81174).Z,authorsImageUrls:[void 0]},s=[{value:"New <code>detect-strategy</code> setting",id:"new-detect-strategy-setting",level:2},{value:"New <code>proto tool</code> command group (breaking)",id:"new-proto-tool-command-group-breaking",level:2},{value:"New <code>proto tool info</code> command",id:"new-proto-tool-info-command",level:2},{value:"Other changes",id:"other-changes",level:2}],m={toc:s};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"With this release, we've reorganized our commands, improved version detection, and Windows support."),(0,r.kt)("h2",{id:"new-detect-strategy-setting"},"New ",(0,r.kt)("inlineCode",{parentName:"h2"},"detect-strategy")," setting"),(0,r.kt)("p",null,"Up until now, when proto would attempt to detect a version, it would use a version from the closest\n",(0,r.kt)("inlineCode",{parentName:"p"},".prototools")," file, or tool specific file (",(0,r.kt)("inlineCode",{parentName:"p"},"package.json"),", ",(0,r.kt)("inlineCode",{parentName:"p"},".nvmrc"),", etc), which ever matched first.\nFor the most part, this works great, but what if you wanted ",(0,r.kt)("inlineCode",{parentName:"p"},".prototools")," to take precedence over\nother files, even if found in a higher parent directory? You unfortunately couldn't."),(0,r.kt)("p",null,"To support this new flow, we're introducing a new\n",(0,r.kt)("a",{parentName:"p",href:"/docs/proto/config#user-configuration"},(0,r.kt)("inlineCode",{parentName:"a"},"~/.proto/config.toml"))," setting called\n",(0,r.kt)("a",{parentName:"p",href:"/docs/proto/config#detect-strategy"},(0,r.kt)("inlineCode",{parentName:"a"},"detect-strategy")),". This setting supports the following values,\nwith more possibly in the future!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"first-available")," (default) - Will use the first available version that is found. Either from\n",(0,r.kt)("inlineCode",{parentName:"li"},".prototools")," or a tool specific file."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"prefer-prototools")," - Prefer a ",(0,r.kt)("inlineCode",{parentName:"li"},".prototools")," version, even if found in a parent directory. If none\nfound, falls back to tool specific file.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="~/.proto/config.toml"',title:'"~/.proto/config.toml"'},'detect-strategy = "prefer-prototools"\n')),(0,r.kt)("h2",{id:"new-proto-tool-command-group-breaking"},"New ",(0,r.kt)("inlineCode",{parentName:"h2"},"proto tool")," command group (breaking)"),(0,r.kt)("p",null,"Our CLI surface area has been growing and we felt it was time to start grouping commands, starting\nwith the new ",(0,r.kt)("a",{parentName:"p",href:"/docs/proto/commands/tool"},(0,r.kt)("inlineCode",{parentName:"a"},"proto tool")),' command. This command will contain "not used\nvery often" subcommands in relation to tools and their plugins, primarily for managing plugins, and\nviewing tool information and inventory. As such, we\'ve deprecated and moved the following top-level\ncommands:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Moved ",(0,r.kt)("inlineCode",{parentName:"li"},"proto add-plugin")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"proto tool add"),"."),(0,r.kt)("li",{parentName:"ul"},"Moved ",(0,r.kt)("inlineCode",{parentName:"li"},"proto remove-plugin")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"proto tool remove"),"."),(0,r.kt)("li",{parentName:"ul"},"Moved ",(0,r.kt)("inlineCode",{parentName:"li"},"proto plugins")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"proto tool list-plugins"),"."),(0,r.kt)("li",{parentName:"ul"},"Moved ",(0,r.kt)("inlineCode",{parentName:"li"},"proto tools")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"proto tool list"),".")),(0,r.kt)("h2",{id:"new-proto-tool-info-command"},"New ",(0,r.kt)("inlineCode",{parentName:"h2"},"proto tool info")," command"),(0,r.kt)("p",null,"Continuing with the changes above, we're also introducing a new command,\n",(0,r.kt)("a",{parentName:"p",href:"/docs/proto/commands/tool/info"},(0,r.kt)("inlineCode",{parentName:"a"},"proto tool info")),", which displays detailed information about a\ntool and its backing plugin. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ proto tool info node\n\nnode - Node.js\n\nInventory\n  Store: ~/.proto/tools/node\n  Executable: ~/.proto/tools/node/20.0.0/bin/node\n  Globals directory: ~/.proto/tools/node/globals/bin\n  Binaries:\n    - ~/.proto/bin/node (primary)\n  Shims:\n    - ~/.proto/shims/node (primary)\n\nPlugin\n  Version: 0.5.2\n  Source: https://github.com/moonrepo/node-plugin/releases/download/v0.5.2/node_plugin.wasm\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This command also supports JSON output via ",(0,r.kt)("inlineCode",{parentName:"p"},"--json"),".")),(0,r.kt)("h2",{id:"other-changes"},"Other changes"),(0,r.kt)("p",null,"View the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/moonrepo/proto/releases/tag/v0.23.0"},"official release")," for a full list\nof changes."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Added support to plugins to ignore certain paths when detecting a version."),(0,r.kt)("li",{parentName:"ul"},"Updated Windows to create 3 shim files for each tool: ",(0,r.kt)("inlineCode",{parentName:"li"},".cmd")," (cmd.exe), ",(0,r.kt)("inlineCode",{parentName:"li"},".ps1")," (powershell), and\nno extension (bash).")))}d.isMDXComponent=!0},81174:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/v0.23-704e27515ee32771a256e88e67e45880.png"}}]);